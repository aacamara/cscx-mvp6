(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zd={exports:{}},Di={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function v_(){if(up)return Di;up=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var f in o)f!=="key"&&(u[f]=o[f])}else u=o;return o=u.ref,{$$typeof:t,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Di.Fragment=n,Di.jsx=a,Di.jsxs=a,Di}var dp;function b_(){return dp||(dp=1,Zd.exports=v_()),Zd.exports}var c=b_(),Fd={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function w_(){if(hp)return Ee;hp=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),v=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function S(O,H,Z){this.props=O,this.context=H,this.refs=E,this.updater=Z||_}S.prototype.isReactComponent={},S.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},S.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function N(){}N.prototype=S.prototype;function j(O,H,Z){this.props=O,this.context=H,this.refs=E,this.updater=Z||_}var C=j.prototype=new N;C.constructor=j,A(C,S.prototype),C.isPureReactComponent=!0;var D=Array.isArray;function z(){}var R={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function I(O,H,Z){var te=Z.ref;return{$$typeof:t,type:O,key:H,ref:te!==void 0?te:null,props:Z}}function Q(O,H){return I(O.type,H,O.props)}function Y(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function X(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Z){return H[Z]})}var P=/\/+/g;function U(O,H){return typeof O=="object"&&O!==null&&O.key!=null?X(""+O.key):H.toString(36)}function J(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(z,z):(O.status="pending",O.then(function(H){O.status==="pending"&&(O.status="fulfilled",O.value=H)},function(H){O.status==="pending"&&(O.status="rejected",O.reason=H)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function T(O,H,Z,te,le){var oe=typeof O;(oe==="undefined"||oe==="boolean")&&(O=null);var de=!1;if(O===null)de=!0;else switch(oe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(O.$$typeof){case t:case n:de=!0;break;case y:return de=O._init,T(de(O._payload),H,Z,te,le)}}if(de)return le=le(O),de=te===""?"."+U(O,0):te,D(le)?(Z="",de!=null&&(Z=de.replace(P,"$&/")+"/"),T(le,H,Z,"",function(Ne){return Ne})):le!=null&&(Y(le)&&(le=Q(le,Z+(le.key==null||O&&O.key===le.key?"":(""+le.key).replace(P,"$&/")+"/")+de)),H.push(le)),1;de=0;var ce=te===""?".":te+":";if(D(O))for(var fe=0;fe<O.length;fe++)te=O[fe],oe=ce+U(te,fe),de+=T(te,H,Z,oe,le);else if(fe=w(O),typeof fe=="function")for(O=fe.call(O),fe=0;!(te=O.next()).done;)te=te.value,oe=ce+U(te,fe++),de+=T(te,H,Z,oe,le);else if(oe==="object"){if(typeof O.then=="function")return T(J(O),H,Z,te,le);throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return de}function $(O,H,Z){if(O==null)return O;var te=[],le=0;return T(O,te,"","",function(oe){return H.call(Z,oe,le++)}),te}function q(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(Z){(O._status===0||O._status===-1)&&(O._status=1,O._result=Z)},function(Z){(O._status===0||O._status===-1)&&(O._status=2,O._result=Z)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var V=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ne={map:$,forEach:function(O,H,Z){$(O,function(){H.apply(this,arguments)},Z)},count:function(O){var H=0;return $(O,function(){H++}),H},toArray:function(O){return $(O,function(H){return H})||[]},only:function(O){if(!Y(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ee.Activity=x,Ee.Children=ne,Ee.Component=S,Ee.Fragment=a,Ee.Profiler=o,Ee.PureComponent=j,Ee.StrictMode=i,Ee.Suspense=m,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Ee.cache=function(O){return function(){return O.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(O,H,Z){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var te=A({},O.props),le=O.key;if(H!=null)for(oe in H.key!==void 0&&(le=""+H.key),H)!L.call(H,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&H.ref===void 0||(te[oe]=H[oe]);var oe=arguments.length-2;if(oe===1)te.children=Z;else if(1<oe){for(var de=Array(oe),ce=0;ce<oe;ce++)de[ce]=arguments[ce+2];te.children=de}return I(O.type,le,te)},Ee.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ee.createElement=function(O,H,Z){var te,le={},oe=null;if(H!=null)for(te in H.key!==void 0&&(oe=""+H.key),H)L.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(le[te]=H[te]);var de=arguments.length-2;if(de===1)le.children=Z;else if(1<de){for(var ce=Array(de),fe=0;fe<de;fe++)ce[fe]=arguments[fe+2];le.children=ce}if(O&&O.defaultProps)for(te in de=O.defaultProps,de)le[te]===void 0&&(le[te]=de[te]);return I(O,oe,le)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(O){return{$$typeof:f,render:O}},Ee.isValidElement=Y,Ee.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:q}},Ee.memo=function(O,H){return{$$typeof:p,type:O,compare:H===void 0?null:H}},Ee.startTransition=function(O){var H=R.T,Z={};R.T=Z;try{var te=O(),le=R.S;le!==null&&le(Z,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(z,V)}catch(oe){V(oe)}finally{H!==null&&Z.types!==null&&(H.types=Z.types),R.T=H}},Ee.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ee.use=function(O){return R.H.use(O)},Ee.useActionState=function(O,H,Z){return R.H.useActionState(O,H,Z)},Ee.useCallback=function(O,H){return R.H.useCallback(O,H)},Ee.useContext=function(O){return R.H.useContext(O)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(O,H){return R.H.useDeferredValue(O,H)},Ee.useEffect=function(O,H){return R.H.useEffect(O,H)},Ee.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Ee.useId=function(){return R.H.useId()},Ee.useImperativeHandle=function(O,H,Z){return R.H.useImperativeHandle(O,H,Z)},Ee.useInsertionEffect=function(O,H){return R.H.useInsertionEffect(O,H)},Ee.useLayoutEffect=function(O,H){return R.H.useLayoutEffect(O,H)},Ee.useMemo=function(O,H){return R.H.useMemo(O,H)},Ee.useOptimistic=function(O,H){return R.H.useOptimistic(O,H)},Ee.useReducer=function(O,H,Z){return R.H.useReducer(O,H,Z)},Ee.useRef=function(O){return R.H.useRef(O)},Ee.useState=function(O){return R.H.useState(O)},Ee.useSyncExternalStore=function(O,H,Z){return R.H.useSyncExternalStore(O,H,Z)},Ee.useTransition=function(){return R.H.useTransition()},Ee.version="19.2.3",Ee}var fp;function ll(){return fp||(fp=1,Fd.exports=w_()),Fd.exports}var M=ll();const ay=sf(M);var Wd={exports:{}},zi={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function __(){return mp||(mp=1,(function(t){function n(T,$){var q=T.length;T.push($);e:for(;0<q;){var V=q-1>>>1,ne=T[V];if(0<o(ne,$))T[V]=$,T[q]=ne,q=V;else break e}}function a(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var $=T[0],q=T.pop();if(q!==$){T[0]=q;e:for(var V=0,ne=T.length,O=ne>>>1;V<O;){var H=2*(V+1)-1,Z=T[H],te=H+1,le=T[te];if(0>o(Z,q))te<ne&&0>o(le,Z)?(T[V]=le,T[te]=q,V=te):(T[V]=Z,T[H]=q,V=H);else if(te<ne&&0>o(le,q))T[V]=le,T[te]=q,V=te;else break e}}return $}function o(T,$){var q=T.sortIndex-$.sortIndex;return q!==0?q:T.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var m=[],p=[],y=1,x=null,v=3,w=!1,_=!1,A=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function C(T){for(var $=a(p);$!==null;){if($.callback===null)i(p);else if($.startTime<=T)i(p),$.sortIndex=$.expirationTime,n(m,$);else break;$=a(p)}}function D(T){if(A=!1,C(T),!_)if(a(m)!==null)_=!0,z||(z=!0,X());else{var $=a(p);$!==null&&J(D,$.startTime-T)}}var z=!1,R=-1,L=5,I=-1;function Q(){return E?!0:!(t.unstable_now()-I<L)}function Y(){if(E=!1,z){var T=t.unstable_now();I=T;var $=!0;try{e:{_=!1,A&&(A=!1,N(R),R=-1),w=!0;var q=v;try{t:{for(C(T),x=a(m);x!==null&&!(x.expirationTime>T&&Q());){var V=x.callback;if(typeof V=="function"){x.callback=null,v=x.priorityLevel;var ne=V(x.expirationTime<=T);if(T=t.unstable_now(),typeof ne=="function"){x.callback=ne,C(T),$=!0;break t}x===a(m)&&i(m),C(T)}else i(m);x=a(m)}if(x!==null)$=!0;else{var O=a(p);O!==null&&J(D,O.startTime-T),$=!1}}break e}finally{x=null,v=q,w=!1}$=void 0}}finally{$?X():z=!1}}}var X;if(typeof j=="function")X=function(){j(Y)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,U=P.port2;P.port1.onmessage=Y,X=function(){U.postMessage(null)}}else X=function(){S(Y,0)};function J(T,$){R=S(function(){T(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(T){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var q=v;v=$;try{return T()}finally{v=q}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var q=v;v=T;try{return $()}finally{v=q}},t.unstable_scheduleCallback=function(T,$,q){var V=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?V+q:V):q=V,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=q+ne,T={id:y++,callback:$,priorityLevel:T,startTime:q,expirationTime:ne,sortIndex:-1},q>V?(T.sortIndex=q,n(p,T),a(m)===null&&T===a(p)&&(A?(N(R),R=-1):A=!0,J(D,q-V))):(T.sortIndex=ne,n(m,T),_||w||(_=!0,z||(z=!0,X()))),T},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(T){var $=v;return function(){var q=v;v=$;try{return T.apply(this,arguments)}finally{v=q}}}})(th)),th}var gp;function S_(){return gp||(gp=1,eh.exports=__()),eh.exports}var nh={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function j_(){if(pp)return Et;pp=1;var t=ll();function n(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,p,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:m,containerInfo:p,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Et.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return u(m,p,null,y)},Et.flushSync=function(m){var p=d.T,y=i.p;try{if(d.T=null,i.p=2,m)return m()}finally{d.T=p,i.p=y,i.d.f()}},Et.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Et.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Et.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,x=f(y,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:x,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Et.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,x=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Et.requestFormReset=function(m){i.d.r(m)},Et.unstable_batchedUpdates=function(m,p){return m(p)},Et.useFormState=function(m,p,y){return d.H.useFormState(m,p,y)},Et.useFormStatus=function(){return d.H.useHostTransitionStatus()},Et.version="19.2.3",Et}var xp;function ry(){if(xp)return nh.exports;xp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),nh.exports=j_(),nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function N_(){if(yp)return zi;yp=1;var t=S_(),n=ll(),a=ry();function i(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function d(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function f(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function p(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(i(188));return s!==e?null:e}for(var r=e,l=s;;){var h=r.return;if(h===null)break;var g=h.alternate;if(g===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===r)return m(h),e;if(g===l)return m(h),s;g=g.sibling}throw Error(i(188))}if(r.return!==l.return)r=h,l=g;else{for(var b=!1,k=h.child;k;){if(k===r){b=!0,r=h,l=g;break}if(k===l){b=!0,l=h,r=g;break}k=k.sibling}if(!b){for(k=g.child;k;){if(k===r){b=!0,r=g,l=h;break}if(k===l){b=!0,l=g,r=h;break}k=k.sibling}if(!b)throw Error(i(189))}}if(r.alternate!==l)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:s}function y(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=y(e),s!==null)return s;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function U(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case z:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case j:return e.displayName||"Context";case N:return(e._context.displayName||"Context")+".Consumer";case C:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return s=e.displayName||null,s!==null?s:U(e.type)||"Memo";case L:s=e._payload,e=e._init;try{return U(e(s))}catch{}}return null}var J=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},V=[],ne=-1;function O(e){return{current:e}}function H(e){0>ne||(e.current=V[ne],V[ne]=null,ne--)}function Z(e,s){ne++,V[ne]=e.current,e.current=s}var te=O(null),le=O(null),oe=O(null),de=O(null);function ce(e,s){switch(Z(oe,s),Z(le,e),Z(te,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?M0(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=M0(s),e=D0(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(te),Z(te,e)}function fe(){H(te),H(le),H(oe)}function Ne(e){e.memoizedState!==null&&Z(de,e);var s=te.current,r=D0(s,e.type);s!==r&&(Z(le,e),Z(te,r))}function ue(e){le.current===e&&(H(te),H(le)),de.current===e&&(H(de),ki._currentValue=q)}var he,me;function ve(e){if(he===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);he=s&&s[1]||"",me=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+e+me}var Ae=!1;function be(e,s){if(!e||Ae)return"";Ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(se){var ee=se}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(se){ee=se}e.call(ie.prototype)}}else{try{throw Error()}catch(se){ee=se}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),b=g[0],k=g[1];if(b&&k){var B=b.split(`
`),W=k.split(`
`);for(h=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(l===B.length||h===W.length)for(l=B.length-1,h=W.length-1;1<=l&&0<=h&&B[l]!==W[h];)h--;for(;1<=l&&0<=h;l--,h--)if(B[l]!==W[h]){if(l!==1||h!==1)do if(l--,h--,0>h||B[l]!==W[h]){var ae=`
`+B[l].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=l&&0<=h);break}}}finally{Ae=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ve(r):""}function De(e,s){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve("Lazy");case 13:return e.child!==s&&s!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return ve("Activity");default:return""}}function ht(e){try{var s="",r=null;do s+=De(e,r),r=e,e=e.return;while(e);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var nt=Object.prototype.hasOwnProperty,jt=t.unstable_scheduleCallback,kt=t.unstable_cancelCallback,Gs=t.unstable_shouldYield,Ps=t.unstable_requestPaint,xt=t.unstable_now,Ca=t.unstable_getCurrentPriorityLevel,Mn=t.unstable_ImmediatePriority,os=t.unstable_UserBlockingPriority,Ys=t.unstable_NormalPriority,Dc=t.unstable_LowPriority,ka=t.unstable_IdlePriority,zc=t.log,Uc=t.unstable_setDisableYieldValue,Xs=null,At=null;function Sn(e){if(typeof zc=="function"&&Uc(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Xs,e)}catch{}}var Tt=Math.clz32?Math.clz32:Bc,$c=Math.log,Lc=Math.LN2;function Bc(e){return e>>>=0,e===0?32:31-($c(e)/Lc|0)|0}var Oa=256,Ra=262144,Ma=4194304;function Dn(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Da(e,s,r){var l=e.pendingLanes;if(l===0)return 0;var h=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var k=l&134217727;return k!==0?(l=k&~g,l!==0?h=Dn(l):(b&=k,b!==0?h=Dn(b):r||(r=k&~e,r!==0&&(h=Dn(r))))):(k=l&~g,k!==0?h=Dn(k):b!==0?h=Dn(b):r||(r=l&~e,r!==0&&(h=Dn(r)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,r=s&-s,g>=r||g===32&&(r&4194048)!==0)?s:h}function Ks(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Hc(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gl(){var e=Ma;return Ma<<=1,(Ma&62914560)===0&&(Ma=4194304),e}function qr(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function Qs(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qc(e,s,r,l,h,g){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var k=e.entanglements,B=e.expirationTimes,W=e.hiddenUpdates;for(r=b&~r;0<r;){var ae=31-Tt(r),ie=1<<ae;k[ae]=0,B[ae]=-1;var ee=W[ae];if(ee!==null)for(W[ae]=null,ae=0;ae<ee.length;ae++){var se=ee[ae];se!==null&&(se.lane&=-536870913)}r&=~ie}l!==0&&pl(e,l,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~s))}function pl(e,s,r){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-Tt(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function xl(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var l=31-Tt(r),h=1<<l;h&s|e[l]&s&&(e[l]|=s),r&=~h}}function yl(e,s){var r=s&-s;return r=(r&42)!==0?1:Ir(r),(r&(e.suspendedLanes|s))!==0?0:r}function Ir(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vl(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:sp(e.type))}function bl(e,s){var r=$.p;try{return $.p=e,s()}finally{$.p=r}}var jn=Math.random().toString(36).slice(2),ft="__reactFiber$"+jn,Nt="__reactProps$"+jn,zn="__reactContainer$"+jn,za="__reactEvents$"+jn,wl="__reactListeners$"+jn,Ic="__reactHandles$"+jn,_l="__reactResources$"+jn,Js="__reactMarker$"+jn;function Gr(e){delete e[ft],delete e[Nt],delete e[za],delete e[wl],delete e[Ic]}function cs(e){var s=e[ft];if(s)return s;for(var r=e.parentNode;r;){if(s=r[zn]||r[ft]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=q0(e);e!==null;){if(r=e[ft])return r;e=q0(e)}return s}e=r,r=e.parentNode}return null}function us(e){if(e=e[ft]||e[zn]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function ds(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(i(33))}function hs(e){var s=e[_l];return s||(s=e[_l]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function rt(e){e[Js]=!0}var Sl=new Set,jl={};function Un(e,s){fs(e,s),fs(e+"Capture",s)}function fs(e,s){for(jl[e]=s,e=0;e<s.length;e++)Sl.add(s[e])}var Vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pr={},Nl={};function Gc(e){return nt.call(Nl,e)?!0:nt.call(Pr,e)?!1:Vc.test(e)?Nl[e]=!0:(Pr[e]=!0,!1)}function Ua(e,s,r){if(Gc(s))if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+r)}}function $a(e,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+r)}}function dn(e,s,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(s,r,""+l)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function El(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Pc(e,s,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,g=l.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){r=""+b,g.call(this,b)}}),Object.defineProperty(e,s,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ms(e){if(!e._valueTracker){var s=El(e)?"checked":"value";e._valueTracker=Pc(e,s,""+e[s])}}function Al(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return e&&(l=El(e)?e.checked?"true":"false":e.value),e=l,e!==r?(s.setValue(e),!0):!1}function Zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yc=/[\n"\\]/g;function Rt(e){return e.replace(Yc,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fs(e,s,r,l,h,g,b,k){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),s!=null?b==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Ot(s)):e.value!==""+Ot(s)&&(e.value=""+Ot(s)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),s!=null?Yr(e,b,Ot(s)):r!=null?Yr(e,b,Ot(r)):l!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+Ot(k):e.removeAttribute("name")}function Tl(e,s,r,l,h,g,b,k){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),s!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){ms(e);return}r=r!=null?""+Ot(r):"",s=s!=null?""+Ot(s):r,k||s===e.value||(e.value=s),e.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=k?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ms(e)}function Yr(e,s,r){s==="number"&&Zs(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function $n(e,s,r,l){if(e=e.options,s){s={};for(var h=0;h<r.length;h++)s["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=s.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&l&&(e[r].defaultSelected=!0)}else{for(r=""+Ot(r),s=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function Tf(e,s,r){if(s!=null&&(s=""+Ot(s),s!==e.value&&(e.value=s),r==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=r!=null?""+Ot(r):""}function Cf(e,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(i(92));if(J(l)){if(1<l.length)throw Error(i(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=Ot(s),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),ms(e)}function La(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var mb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kf(e,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,r):typeof r!="number"||r===0||mb.has(s)?s==="float"?e.cssFloat=r:e[s]=(""+r).trim():e[s]=r+"px"}function Of(e,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&r[h]!==l&&kf(e,h,l)}else for(var g in s)s.hasOwnProperty(g)&&kf(e,g,s[g])}function Xc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cl(e){return pb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ln(){}var Kc=null;function Qc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,Ha=null;function Rf(e){var s=us(e);if(s&&(e=s.stateNode)){var r=e[Nt]||null;e:switch(e=s.stateNode,s.type){case"input":if(Fs(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Rt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==e&&l.form===e.form){var h=l[Nt]||null;if(!h)throw Error(i(90));Fs(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===e.form&&Al(l)}break e;case"textarea":Tf(e,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&$n(e,!!r.multiple,s,!1)}}}var Jc=!1;function Mf(e,s,r){if(Jc)return e(s,r);Jc=!0;try{var l=e(s);return l}finally{if(Jc=!1,(Ba!==null||Ha!==null)&&(xo(),Ba&&(s=Ba,e=Ha,Ha=Ba=null,Rf(s),e)))for(s=0;s<e.length;s++)Rf(e[s])}}function Xr(e,s){var r=e.stateNode;if(r===null)return null;var l=r[Nt]||null;if(l===null)return null;r=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=!1;if(Bn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Zc=!1}var gs=null,Fc=null,kl=null;function Df(){if(kl)return kl;var e,s=Fc,r=s.length,l,h="value"in gs?gs.value:gs.textContent,g=h.length;for(e=0;e<r&&s[e]===h[e];e++);var b=r-e;for(l=1;l<=b&&s[r-l]===h[g-l];l++);return kl=h.slice(e,1<l?1-l:void 0)}function Ol(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Rl(){return!0}function zf(){return!1}function Mt(e){function s(r,l,h,g,b){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(r=e[k],this[k]=r?r(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rl:zf,this.isPropagationStopped=zf,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),s}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=Mt(Ws),Qr=x({},Ws,{view:0,detail:0}),xb=Mt(Qr),Wc,eu,Jr,Dl=x({},Qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(Wc=e.screenX-Jr.screenX,eu=e.screenY-Jr.screenY):eu=Wc=0,Jr=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:eu}}),Uf=Mt(Dl),yb=x({},Dl,{dataTransfer:0}),vb=Mt(yb),bb=x({},Qr,{relatedTarget:0}),tu=Mt(bb),wb=x({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),_b=Mt(wb),Sb=x({},Ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jb=Mt(Sb),Nb=x({},Ws,{data:0}),$f=Mt(Nb),Eb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ab={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cb(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Tb[e])?!!s[e]:!1}function nu(){return Cb}var kb=x({},Qr,{key:function(e){if(e.key){var s=Eb[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ab[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return e.type==="keypress"?Ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ob=Mt(kb),Rb=x({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lf=Mt(Rb),Mb=x({},Qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Db=Mt(Mb),zb=x({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ub=Mt(zb),$b=x({},Dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lb=Mt($b),Bb=x({},Ws,{newState:0,oldState:0}),Hb=Mt(Bb),qb=[9,13,27,32],su=Bn&&"CompositionEvent"in window,Zr=null;Bn&&"documentMode"in document&&(Zr=document.documentMode);var Ib=Bn&&"TextEvent"in window&&!Zr,Bf=Bn&&(!su||Zr&&8<Zr&&11>=Zr),Hf=" ",qf=!1;function If(e,s){switch(e){case"keyup":return qb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qa=!1;function Vb(e,s){switch(e){case"compositionend":return Vf(s);case"keypress":return s.which!==32?null:(qf=!0,Hf);case"textInput":return e=s.data,e===Hf&&qf?null:e;default:return null}}function Gb(e,s){if(qa)return e==="compositionend"||!su&&If(e,s)?(e=Df(),kl=Fc=gs=null,qa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bf&&s.locale!=="ko"?null:s.data;default:return null}}var Pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Pb[e.type]:s==="textarea"}function Pf(e,s,r,l){Ba?Ha?Ha.push(l):Ha=[l]:Ba=l,s=jo(s,"onChange"),0<s.length&&(r=new Ml("onChange","change",null,r,l),e.push({event:r,listeners:s}))}var Fr=null,Wr=null;function Yb(e){A0(e,0)}function zl(e){var s=ds(e);if(Al(s))return e}function Yf(e,s){if(e==="change")return s}var Xf=!1;if(Bn){var au;if(Bn){var ru="oninput"in document;if(!ru){var Kf=document.createElement("div");Kf.setAttribute("oninput","return;"),ru=typeof Kf.oninput=="function"}au=ru}else au=!1;Xf=au&&(!document.documentMode||9<document.documentMode)}function Qf(){Fr&&(Fr.detachEvent("onpropertychange",Jf),Wr=Fr=null)}function Jf(e){if(e.propertyName==="value"&&zl(Wr)){var s=[];Pf(s,Wr,e,Qc(e)),Mf(Yb,s)}}function Xb(e,s,r){e==="focusin"?(Qf(),Fr=s,Wr=r,Fr.attachEvent("onpropertychange",Jf)):e==="focusout"&&Qf()}function Kb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zl(Wr)}function Qb(e,s){if(e==="click")return zl(s)}function Jb(e,s){if(e==="input"||e==="change")return zl(s)}function Zb(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var qt=typeof Object.is=="function"?Object.is:Zb;function ei(e,s){if(qt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!nt.call(s,h)||!qt(e[h],s[h]))return!1}return!0}function Zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ff(e,s){var r=Zf(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=s&&l>=s)return{node:r,offset:s-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zf(r)}}function Wf(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Wf(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function em(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Zs(e.document);s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Zs(e.document)}return s}function iu(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var Fb=Bn&&"documentMode"in document&&11>=document.documentMode,Ia=null,lu=null,ti=null,ou=!1;function tm(e,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ou||Ia==null||Ia!==Zs(l)||(l=Ia,"selectionStart"in l&&iu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ti&&ei(ti,l)||(ti=l,l=jo(lu,"onSelect"),0<l.length&&(s=new Ml("onSelect","select",null,s,r),e.push({event:s,listeners:l}),s.target=Ia)))}function ea(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Va={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},cu={},nm={};Bn&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function ta(e){if(cu[e])return cu[e];if(!Va[e])return e;var s=Va[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in nm)return cu[e]=s[r];return e}var sm=ta("animationend"),am=ta("animationiteration"),rm=ta("animationstart"),Wb=ta("transitionrun"),ew=ta("transitionstart"),tw=ta("transitioncancel"),im=ta("transitionend"),lm=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function hn(e,s){lm.set(e,s),Un(s,[e])}var Ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},tn=[],Ga=0,du=0;function $l(){for(var e=Ga,s=du=Ga=0;s<e;){var r=tn[s];tn[s++]=null;var l=tn[s];tn[s++]=null;var h=tn[s];tn[s++]=null;var g=tn[s];if(tn[s++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}g!==0&&om(r,h,g)}}function Ll(e,s,r,l){tn[Ga++]=e,tn[Ga++]=s,tn[Ga++]=r,tn[Ga++]=l,du|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function hu(e,s,r,l){return Ll(e,s,r,l),Bl(e)}function na(e,s){return Ll(e,null,null,s),Bl(e)}function om(e,s,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var h=!1,g=e.return;g!==null;)g.childLanes|=r,l=g.alternate,l!==null&&(l.childLanes|=r),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&s!==null&&(h=31-Tt(r),e=g.hiddenUpdates,l=e[h],l===null?e[h]=[s]:l.push(s),s.lane=r|536870912),g):null}function Bl(e){if(50<Si)throw Si=0,wd=null,Error(i(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Pa={};function nw(e,s,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,s,r,l){return new nw(e,s,r,l)}function fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hn(e,s){var r=e.alternate;return r===null?(r=It(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function cm(e,s){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,s=r.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Hl(e,s,r,l,h,g){var b=0;if(l=e,typeof e=="function")fu(e)&&(b=1);else if(typeof e=="string")b=l_(e,r,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case I:return e=It(31,r,s,h),e.elementType=I,e.lanes=g,e;case A:return sa(r.children,h,g,s);case E:b=8,h|=24;break;case S:return e=It(12,r,s,h|2),e.elementType=S,e.lanes=g,e;case D:return e=It(13,r,s,h),e.elementType=D,e.lanes=g,e;case z:return e=It(19,r,s,h),e.elementType=z,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j:b=10;break e;case N:b=9;break e;case C:b=11;break e;case R:b=14;break e;case L:b=16,l=null;break e}b=29,r=Error(i(130,e===null?"null":typeof e,"")),l=null}return s=It(b,r,s,h),s.elementType=e,s.type=l,s.lanes=g,s}function sa(e,s,r,l){return e=It(7,e,l,s),e.lanes=r,e}function mu(e,s,r){return e=It(6,e,null,s),e.lanes=r,e}function um(e){var s=It(18,null,null,0);return s.stateNode=e,s}function gu(e,s,r){return s=It(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var dm=new WeakMap;function nn(e,s){if(typeof e=="object"&&e!==null){var r=dm.get(e);return r!==void 0?r:(s={value:e,source:s,stack:ht(s)},dm.set(e,s),s)}return{value:e,source:s,stack:ht(s)}}var Ya=[],Xa=0,ql=null,ni=0,sn=[],an=0,ps=null,Nn=1,En="";function qn(e,s){Ya[Xa++]=ni,Ya[Xa++]=ql,ql=e,ni=s}function hm(e,s,r){sn[an++]=Nn,sn[an++]=En,sn[an++]=ps,ps=e;var l=Nn;e=En;var h=32-Tt(l)-1;l&=~(1<<h),r+=1;var g=32-Tt(s)+h;if(30<g){var b=h-h%5;g=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Nn=1<<32-Tt(s)+h|r<<h|l,En=g+e}else Nn=1<<g|r<<h|l,En=e}function pu(e){e.return!==null&&(qn(e,1),hm(e,1,0))}function xu(e){for(;e===ql;)ql=Ya[--Xa],Ya[Xa]=null,ni=Ya[--Xa],Ya[Xa]=null;for(;e===ps;)ps=sn[--an],sn[an]=null,En=sn[--an],sn[an]=null,Nn=sn[--an],sn[an]=null}function fm(e,s){sn[an++]=Nn,sn[an++]=En,sn[an++]=ps,Nn=s.id,En=s.overflow,ps=e}var yt=null,Xe=null,ze=!1,xs=null,rn=!1,yu=Error(i(519));function ys(e){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw si(nn(s,e)),yu}function mm(e){var s=e.stateNode,r=e.type,l=e.memoizedProps;switch(s[ft]=e,s[Nt]=l,r){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(r=0;r<Ni.length;r++)Oe(Ni[r],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),Tl(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),Cf(s,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||O0(s.textContent,r)?(l.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),l.onScroll!=null&&Oe("scroll",s),l.onScrollEnd!=null&&Oe("scrollend",s),l.onClick!=null&&(s.onclick=Ln),s=!0):s=!1,s||ys(e,!0)}function gm(e){for(yt=e.return;yt;)switch(yt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:yt=yt.return}}function Ka(e){if(e!==yt)return!1;if(!ze)return gm(e),ze=!0,!1;var s=e.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Ud(e.type,e.memoizedProps)),r=!r),r&&Xe&&ys(e),gm(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Xe=H0(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Xe=H0(e)}else s===27?(s=Xe,Rs(e.type)?(e=qd,qd=null,Xe=e):Xe=s):Xe=yt?on(e.stateNode.nextSibling):null;return!0}function aa(){Xe=yt=null,ze=!1}function vu(){var e=xs;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),xs=null),e}function si(e){xs===null?xs=[e]:xs.push(e)}var bu=O(null),ra=null,In=null;function vs(e,s,r){Z(bu,s._currentValue),s._currentValue=r}function Vn(e){e._currentValue=bu.current,H(bu)}function wu(e,s,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===r)break;e=e.return}}function _u(e,s,r,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var b=h.child;g=g.firstContext;e:for(;g!==null;){var k=g;g=h;for(var B=0;B<s.length;B++)if(k.context===s[B]){g.lanes|=r,k=g.alternate,k!==null&&(k.lanes|=r),wu(g.return,r,e),l||(b=null);break e}g=k.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=r,g=b.alternate,g!==null&&(g.lanes|=r),wu(b,r,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Qa(e,s,r,l){e=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var k=h.type;qt(h.pendingProps.value,b.value)||(e!==null?e.push(k):e=[k])}}else if(h===de.current){if(b=h.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ki):e=[ki])}h=h.return}e!==null&&_u(s,e,r,l),s.flags|=262144}function Il(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ia(e){ra=e,In=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vt(e){return pm(ra,e)}function Vl(e,s){return ra===null&&ia(e),pm(e,s)}function pm(e,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},In===null){if(e===null)throw Error(i(308));In=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else In=In.next=s;return r}var sw=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(r){return r()})}},aw=t.unstable_scheduleCallback,rw=t.unstable_NormalPriority,it={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new sw,data:new Map,refCount:0}}function ai(e){e.refCount--,e.refCount===0&&aw(rw,function(){e.controller.abort()})}var ri=null,ju=0,Ja=0,Za=null;function iw(e,s){if(ri===null){var r=ri=[];ju=0,Ja=Ad(),Za={status:"pending",value:void 0,then:function(l){r.push(l)}}}return ju++,s.then(xm,xm),s}function xm(){if(--ju===0&&ri!==null){Za!==null&&(Za.status="fulfilled");var e=ri;ri=null,Ja=0,Za=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function lw(e,s){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<r.length;h++)(0,r[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var ym=T.S;T.S=function(e,s){t0=xt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&iw(e,s),ym!==null&&ym(e,s)};var la=O(null);function Nu(){var e=la.current;return e!==null?e:Pe.pooledCache}function Gl(e,s){s===null?Z(la,la.current):Z(la,s.pool)}function vm(){var e=Nu();return e===null?null:{parent:it._currentValue,pool:e}}var Fa=Error(i(460)),Eu=Error(i(474)),Pl=Error(i(542)),Yl={then:function(){}};function bm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wm(e,s,r){switch(r=e[r],r===void 0?e.push(s):r!==s&&(s.then(Ln,Ln),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Sm(e),e;default:if(typeof s.status=="string")s.then(Ln,Ln);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Sm(e),e}throw ca=s,Fa}}function oa(e){try{var s=e._init;return s(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ca=r,Fa):r}}var ca=null;function _m(){if(ca===null)throw Error(i(459));var e=ca;return ca=null,e}function Sm(e){if(e===Fa||e===Pl)throw Error(i(483))}var Wa=null,ii=0;function Xl(e){var s=ii;return ii+=1,Wa===null&&(Wa=[]),wm(Wa,e,s)}function li(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Kl(e,s){throw s.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function jm(e){function s(K,G){if(e){var F=K.deletions;F===null?(K.deletions=[G],K.flags|=16):F.push(G)}}function r(K,G){if(!e)return null;for(;G!==null;)s(K,G),G=G.sibling;return null}function l(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function h(K,G){return K=Hn(K,G),K.index=0,K.sibling=null,K}function g(K,G,F){return K.index=F,e?(F=K.alternate,F!==null?(F=F.index,F<G?(K.flags|=67108866,G):F):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function b(K){return e&&K.alternate===null&&(K.flags|=67108866),K}function k(K,G,F,re){return G===null||G.tag!==6?(G=mu(F,K.mode,re),G.return=K,G):(G=h(G,F),G.return=K,G)}function B(K,G,F,re){var we=F.type;return we===A?ae(K,G,F.props.children,re,F.key):G!==null&&(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===L&&oa(we)===G.type)?(G=h(G,F.props),li(G,F),G.return=K,G):(G=Hl(F.type,F.key,F.props,null,K.mode,re),li(G,F),G.return=K,G)}function W(K,G,F,re){return G===null||G.tag!==4||G.stateNode.containerInfo!==F.containerInfo||G.stateNode.implementation!==F.implementation?(G=gu(F,K.mode,re),G.return=K,G):(G=h(G,F.children||[]),G.return=K,G)}function ae(K,G,F,re,we){return G===null||G.tag!==7?(G=sa(F,K.mode,re,we),G.return=K,G):(G=h(G,F),G.return=K,G)}function ie(K,G,F){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=mu(""+G,K.mode,F),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return F=Hl(G.type,G.key,G.props,null,K.mode,F),li(F,G),F.return=K,F;case _:return G=gu(G,K.mode,F),G.return=K,G;case L:return G=oa(G),ie(K,G,F)}if(J(G)||X(G))return G=sa(G,K.mode,F,null),G.return=K,G;if(typeof G.then=="function")return ie(K,Xl(G),F);if(G.$$typeof===j)return ie(K,Vl(K,G),F);Kl(K,G)}return null}function ee(K,G,F,re){var we=G!==null?G.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return we!==null?null:k(K,G,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===we?B(K,G,F,re):null;case _:return F.key===we?W(K,G,F,re):null;case L:return F=oa(F),ee(K,G,F,re)}if(J(F)||X(F))return we!==null?null:ae(K,G,F,re,null);if(typeof F.then=="function")return ee(K,G,Xl(F),re);if(F.$$typeof===j)return ee(K,G,Vl(K,F),re);Kl(K,F)}return null}function se(K,G,F,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return K=K.get(F)||null,k(G,K,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return K=K.get(re.key===null?F:re.key)||null,B(G,K,re,we);case _:return K=K.get(re.key===null?F:re.key)||null,W(G,K,re,we);case L:return re=oa(re),se(K,G,F,re,we)}if(J(re)||X(re))return K=K.get(F)||null,ae(G,K,re,we,null);if(typeof re.then=="function")return se(K,G,F,Xl(re),we);if(re.$$typeof===j)return se(K,G,F,Vl(G,re),we);Kl(G,re)}return null}function ge(K,G,F,re){for(var we=null,$e=null,pe=G,Ce=G=0,Me=null;pe!==null&&Ce<F.length;Ce++){pe.index>Ce?(Me=pe,pe=null):Me=pe.sibling;var Le=ee(K,pe,F[Ce],re);if(Le===null){pe===null&&(pe=Me);break}e&&pe&&Le.alternate===null&&s(K,pe),G=g(Le,G,Ce),$e===null?we=Le:$e.sibling=Le,$e=Le,pe=Me}if(Ce===F.length)return r(K,pe),ze&&qn(K,Ce),we;if(pe===null){for(;Ce<F.length;Ce++)pe=ie(K,F[Ce],re),pe!==null&&(G=g(pe,G,Ce),$e===null?we=pe:$e.sibling=pe,$e=pe);return ze&&qn(K,Ce),we}for(pe=l(pe);Ce<F.length;Ce++)Me=se(pe,K,Ce,F[Ce],re),Me!==null&&(e&&Me.alternate!==null&&pe.delete(Me.key===null?Ce:Me.key),G=g(Me,G,Ce),$e===null?we=Me:$e.sibling=Me,$e=Me);return e&&pe.forEach(function($s){return s(K,$s)}),ze&&qn(K,Ce),we}function _e(K,G,F,re){if(F==null)throw Error(i(151));for(var we=null,$e=null,pe=G,Ce=G=0,Me=null,Le=F.next();pe!==null&&!Le.done;Ce++,Le=F.next()){pe.index>Ce?(Me=pe,pe=null):Me=pe.sibling;var $s=ee(K,pe,Le.value,re);if($s===null){pe===null&&(pe=Me);break}e&&pe&&$s.alternate===null&&s(K,pe),G=g($s,G,Ce),$e===null?we=$s:$e.sibling=$s,$e=$s,pe=Me}if(Le.done)return r(K,pe),ze&&qn(K,Ce),we;if(pe===null){for(;!Le.done;Ce++,Le=F.next())Le=ie(K,Le.value,re),Le!==null&&(G=g(Le,G,Ce),$e===null?we=Le:$e.sibling=Le,$e=Le);return ze&&qn(K,Ce),we}for(pe=l(pe);!Le.done;Ce++,Le=F.next())Le=se(pe,K,Ce,Le.value,re),Le!==null&&(e&&Le.alternate!==null&&pe.delete(Le.key===null?Ce:Le.key),G=g(Le,G,Ce),$e===null?we=Le:$e.sibling=Le,$e=Le);return e&&pe.forEach(function(y_){return s(K,y_)}),ze&&qn(K,Ce),we}function Ge(K,G,F,re){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:e:{for(var we=F.key;G!==null;){if(G.key===we){if(we=F.type,we===A){if(G.tag===7){r(K,G.sibling),re=h(G,F.props.children),re.return=K,K=re;break e}}else if(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===L&&oa(we)===G.type){r(K,G.sibling),re=h(G,F.props),li(re,F),re.return=K,K=re;break e}r(K,G);break}else s(K,G);G=G.sibling}F.type===A?(re=sa(F.props.children,K.mode,re,F.key),re.return=K,K=re):(re=Hl(F.type,F.key,F.props,null,K.mode,re),li(re,F),re.return=K,K=re)}return b(K);case _:e:{for(we=F.key;G!==null;){if(G.key===we)if(G.tag===4&&G.stateNode.containerInfo===F.containerInfo&&G.stateNode.implementation===F.implementation){r(K,G.sibling),re=h(G,F.children||[]),re.return=K,K=re;break e}else{r(K,G);break}else s(K,G);G=G.sibling}re=gu(F,K.mode,re),re.return=K,K=re}return b(K);case L:return F=oa(F),Ge(K,G,F,re)}if(J(F))return ge(K,G,F,re);if(X(F)){if(we=X(F),typeof we!="function")throw Error(i(150));return F=we.call(F),_e(K,G,F,re)}if(typeof F.then=="function")return Ge(K,G,Xl(F),re);if(F.$$typeof===j)return Ge(K,G,Vl(K,F),re);Kl(K,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,G!==null&&G.tag===6?(r(K,G.sibling),re=h(G,F),re.return=K,K=re):(r(K,G),re=mu(F,K.mode,re),re.return=K,K=re),b(K)):r(K,G)}return function(K,G,F,re){try{ii=0;var we=Ge(K,G,F,re);return Wa=null,we}catch(pe){if(pe===Fa||pe===Pl)throw pe;var $e=It(29,pe,null,K.mode);return $e.lanes=re,$e.return=K,$e}finally{}}}var ua=jm(!0),Nm=jm(!1),bs=!1;function Au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ws(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _s(e,s,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Be&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Bl(e),om(e,null,r),s}return Ll(e,l,s,r),Bl(e)}function oi(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,r|=l,s.lanes=r,xl(e,r)}}function Cu(e,s){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?h=g=b:g=g.next=b,r=r.next}while(r!==null);g===null?h=g=s:g=g.next=s}else h=g=s;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}var ku=!1;function ci(){if(ku){var e=Za;if(e!==null)throw e}}function ui(e,s,r,l){ku=!1;var h=e.updateQueue;bs=!1;var g=h.firstBaseUpdate,b=h.lastBaseUpdate,k=h.shared.pending;if(k!==null){h.shared.pending=null;var B=k,W=B.next;B.next=null,b===null?g=W:b.next=W,b=B;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,k=ae.lastBaseUpdate,k!==b&&(k===null?ae.firstBaseUpdate=W:k.next=W,ae.lastBaseUpdate=B))}if(g!==null){var ie=h.baseState;b=0,ae=W=B=null,k=g;do{var ee=k.lane&-536870913,se=ee!==k.lane;if(se?(Re&ee)===ee:(l&ee)===ee){ee!==0&&ee===Ja&&(ku=!0),ae!==null&&(ae=ae.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ge=e,_e=k;ee=s;var Ge=r;switch(_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ie=ge.call(Ge,ie,ee);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,ee=typeof ge=="function"?ge.call(Ge,ie,ee):ge,ee==null)break e;ie=x({},ie,ee);break e;case 2:bs=!0}}ee=k.callback,ee!==null&&(e.flags|=64,se&&(e.flags|=8192),se=h.callbacks,se===null?h.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ae===null?(W=ae=se,B=ie):ae=ae.next=se,b|=ee;if(k=k.next,k===null){if(k=h.shared.pending,k===null)break;se=k,k=se.next,se.next=null,h.lastBaseUpdate=se,h.shared.pending=null}}while(!0);ae===null&&(B=ie),h.baseState=B,h.firstBaseUpdate=W,h.lastBaseUpdate=ae,g===null&&(h.shared.lanes=0),As|=b,e.lanes=b,e.memoizedState=ie}}function Em(e,s){if(typeof e!="function")throw Error(i(191,e));e.call(s)}function Am(e,s){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Em(r[e],s)}var er=O(null),Ql=O(0);function Tm(e,s){e=Fn,Z(Ql,e),Z(er,s),Fn=e|s.baseLanes}function Ou(){Z(Ql,Fn),Z(er,er.current)}function Ru(){Fn=Ql.current,H(er),H(Ql)}var Vt=O(null),ln=null;function Ss(e){var s=e.alternate;Z(st,st.current&1),Z(Vt,e),ln===null&&(s===null||er.current!==null||s.memoizedState!==null)&&(ln=e)}function Mu(e){Z(st,st.current),Z(Vt,e),ln===null&&(ln=e)}function Cm(e){e.tag===22?(Z(st,st.current),Z(Vt,e),ln===null&&(ln=e)):js()}function js(){Z(st,st.current),Z(Vt,Vt.current)}function Gt(e){H(Vt),ln===e&&(ln=null),H(st)}var st=O(0);function Jl(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Bd(r)||Hd(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gn=0,Te=null,Ie=null,lt=null,Zl=!1,tr=!1,da=!1,Fl=0,di=0,nr=null,ow=0;function We(){throw Error(i(321))}function Du(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!qt(e[r],s[r]))return!1;return!0}function zu(e,s,r,l,h,g){return Gn=g,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,T.H=e===null||e.memoizedState===null?hg:Ju,da=!1,g=r(l,h),da=!1,tr&&(g=Om(s,r,l,h)),km(e),g}function km(e){T.H=mi;var s=Ie!==null&&Ie.next!==null;if(Gn=0,lt=Ie=Te=null,Zl=!1,di=0,nr=null,s)throw Error(i(300));e===null||ot||(e=e.dependencies,e!==null&&Il(e)&&(ot=!0))}function Om(e,s,r,l){Te=e;var h=0;do{if(tr&&(nr=null),di=0,tr=!1,25<=h)throw Error(i(301));if(h+=1,lt=Ie=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}T.H=fg,g=s(r,l)}while(tr);return g}function cw(){var e=T.H,s=e.useState()[0];return s=typeof s.then=="function"?hi(s):s,e=e.useState()[0],(Ie!==null?Ie.memoizedState:null)!==e&&(Te.flags|=1024),s}function Uu(){var e=Fl!==0;return Fl=0,e}function $u(e,s,r){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~r}function Lu(e){if(Zl){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Zl=!1}Gn=0,lt=Ie=Te=null,tr=!1,di=Fl=0,nr=null}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Te.memoizedState=lt=e:lt=lt.next=e,lt}function at(){if(Ie===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var s=lt===null?Te.memoizedState:lt.next;if(s!==null)lt=s,Ie=e;else{if(e===null)throw Te.alternate===null?Error(i(467)):Error(i(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},lt===null?Te.memoizedState=lt=e:lt=lt.next=e}return lt}function Wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hi(e){var s=di;return di+=1,nr===null&&(nr=[]),e=wm(nr,e,s),s=Te,(lt===null?s.memoizedState:lt.next)===null&&(s=s.alternate,T.H=s===null||s.memoizedState===null?hg:Ju),e}function eo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return hi(e);if(e.$$typeof===j)return vt(e)}throw Error(i(438,String(e)))}function Bu(e){var s=null,r=Te.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Wl(),Te.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(e),l=0;l<e;l++)r[l]=Q;return s.index++,r}function Pn(e,s){return typeof s=="function"?s(e):s}function to(e){var s=at();return Hu(s,Ie,e)}function Hu(e,s,r){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var h=e.baseQueue,g=l.pending;if(g!==null){if(h!==null){var b=h.next;h.next=g.next,g.next=b}s.baseQueue=h=g,l.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{s=h.next;var k=b=null,B=null,W=s,ae=!1;do{var ie=W.lane&-536870913;if(ie!==W.lane?(Re&ie)===ie:(Gn&ie)===ie){var ee=W.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ie===Ja&&(ae=!0);else if((Gn&ee)===ee){W=W.next,ee===Ja&&(ae=!0);continue}else ie={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(k=B=ie,b=g):B=B.next=ie,Te.lanes|=ee,As|=ee;ie=W.action,da&&r(g,ie),g=W.hasEagerState?W.eagerState:r(g,ie)}else ee={lane:ie,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(k=B=ee,b=g):B=B.next=ee,Te.lanes|=ie,As|=ie;W=W.next}while(W!==null&&W!==s);if(B===null?b=g:B.next=k,!qt(g,e.memoizedState)&&(ot=!0,ae&&(r=Za,r!==null)))throw r;e.memoizedState=g,e.baseState=b,e.baseQueue=B,l.lastRenderedState=g}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function qu(e){var s=at(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var l=r.dispatch,h=r.pending,g=s.memoizedState;if(h!==null){r.pending=null;var b=h=h.next;do g=e(g,b.action),b=b.next;while(b!==h);qt(g,s.memoizedState)||(ot=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),r.lastRenderedState=g}return[g,l]}function Rm(e,s,r){var l=Te,h=at(),g=ze;if(g){if(r===void 0)throw Error(i(407));r=r()}else r=s();var b=!qt((Ie||h).memoizedState,r);if(b&&(h.memoizedState=r,ot=!0),h=h.queue,Gu(zm.bind(null,l,h,e),[e]),h.getSnapshot!==s||b||lt!==null&&lt.memoizedState.tag&1){if(l.flags|=2048,sr(9,{destroy:void 0},Dm.bind(null,l,h,r,s),null),Pe===null)throw Error(i(349));g||(Gn&127)!==0||Mm(l,s,r)}return r}function Mm(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Te.updateQueue,s===null?(s=Wl(),Te.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function Dm(e,s,r,l){s.value=r,s.getSnapshot=l,Um(s)&&$m(e)}function zm(e,s,r){return r(function(){Um(s)&&$m(e)})}function Um(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!qt(e,r)}catch{return!0}}function $m(e){var s=na(e,2);s!==null&&Lt(s,e,2)}function Iu(e){var s=Ct();if(typeof e=="function"){var r=e;if(e=r(),da){Sn(!0);try{r()}finally{Sn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},s}function Lm(e,s,r,l){return e.baseState=r,Hu(e,Ie,typeof l=="function"?l:Pn)}function uw(e,s,r,l,h){if(ao(e))throw Error(i(485));if(e=s.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};T.T!==null?r(!0):g.isTransition=!1,l(g),r=s.pending,r===null?(g.next=s.pending=g,Bm(s,g)):(g.next=r.next,s.pending=r.next=g)}}function Bm(e,s){var r=s.action,l=s.payload,h=e.state;if(s.isTransition){var g=T.T,b={};T.T=b;try{var k=r(h,l),B=T.S;B!==null&&B(b,k),Hm(e,s,k)}catch(W){Vu(e,s,W)}finally{g!==null&&b.types!==null&&(g.types=b.types),T.T=g}}else try{g=r(h,l),Hm(e,s,g)}catch(W){Vu(e,s,W)}}function Hm(e,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){qm(e,s,l)},function(l){return Vu(e,s,l)}):qm(e,s,r)}function qm(e,s,r){s.status="fulfilled",s.value=r,Im(s),e.state=r,s=e.pending,s!==null&&(r=s.next,r===s?e.pending=null:(r=r.next,s.next=r,Bm(e,r)))}function Vu(e,s,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,Im(s),s=s.next;while(s!==l)}e.action=null}function Im(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function Vm(e,s){return s}function Gm(e,s){if(ze){var r=Pe.formState;if(r!==null){e:{var l=Te;if(ze){if(Xe){t:{for(var h=Xe,g=rn;h.nodeType!==8;){if(!g){h=null;break t}if(h=on(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Xe=on(h.nextSibling),l=h.data==="F!";break e}}ys(l)}l=!1}l&&(s=r[0])}}return r=Ct(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vm,lastRenderedState:s},r.queue=l,r=cg.bind(null,Te,l),l.dispatch=r,l=Iu(!1),g=Qu.bind(null,Te,!1,l.queue),l=Ct(),h={state:s,dispatch:null,action:e,pending:null},l.queue=h,r=uw.bind(null,Te,h,g,r),h.dispatch=r,l.memoizedState=e,[s,r,!1]}function Pm(e){var s=at();return Ym(s,Ie,e)}function Ym(e,s,r){if(s=Hu(e,s,Vm)[0],e=to(Pn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=hi(s)}catch(b){throw b===Fa?Pl:b}else l=s;s=at();var h=s.queue,g=h.dispatch;return r!==s.memoizedState&&(Te.flags|=2048,sr(9,{destroy:void 0},dw.bind(null,h,r),null)),[l,g,e]}function dw(e,s){e.action=s}function Xm(e){var s=at(),r=Ie;if(r!==null)return Ym(s,r,e);at(),s=s.memoizedState,r=at();var l=r.queue.dispatch;return r.memoizedState=e,[s,l,!1]}function sr(e,s,r,l){return e={tag:e,create:r,deps:l,inst:s,next:null},s=Te.updateQueue,s===null&&(s=Wl(),Te.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,s.lastEffect=e),e}function Km(){return at().memoizedState}function no(e,s,r,l){var h=Ct();Te.flags|=e,h.memoizedState=sr(1|s,{destroy:void 0},r,l===void 0?null:l)}function so(e,s,r,l){var h=at();l=l===void 0?null:l;var g=h.memoizedState.inst;Ie!==null&&l!==null&&Du(l,Ie.memoizedState.deps)?h.memoizedState=sr(s,g,r,l):(Te.flags|=e,h.memoizedState=sr(1|s,g,r,l))}function Qm(e,s){no(8390656,8,e,s)}function Gu(e,s){so(2048,8,e,s)}function hw(e){Te.flags|=4;var s=Te.updateQueue;if(s===null)s=Wl(),Te.updateQueue=s,s.events=[e];else{var r=s.events;r===null?s.events=[e]:r.push(e)}}function Jm(e){var s=at().memoizedState;return hw({ref:s,nextImpl:e}),function(){if((Be&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Zm(e,s){return so(4,2,e,s)}function Fm(e,s){return so(4,4,e,s)}function Wm(e,s){if(typeof s=="function"){e=e();var r=s(e);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function eg(e,s,r){r=r!=null?r.concat([e]):null,so(4,4,Wm.bind(null,s,e),r)}function Pu(){}function tg(e,s){var r=at();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&Du(s,l[1])?l[0]:(r.memoizedState=[e,s],e)}function ng(e,s){var r=at();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&Du(s,l[1]))return l[0];if(l=e(),da){Sn(!0);try{e()}finally{Sn(!1)}}return r.memoizedState=[l,s],l}function Yu(e,s,r){return r===void 0||(Gn&1073741824)!==0&&(Re&261930)===0?e.memoizedState=s:(e.memoizedState=r,e=s0(),Te.lanes|=e,As|=e,r)}function sg(e,s,r,l){return qt(r,s)?r:er.current!==null?(e=Yu(e,r,l),qt(e,s)||(ot=!0),e):(Gn&42)===0||(Gn&1073741824)!==0&&(Re&261930)===0?(ot=!0,e.memoizedState=r):(e=s0(),Te.lanes|=e,As|=e,s)}function ag(e,s,r,l,h){var g=$.p;$.p=g!==0&&8>g?g:8;var b=T.T,k={};T.T=k,Qu(e,!1,s,r);try{var B=h(),W=T.S;if(W!==null&&W(k,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=lw(B,l);fi(e,s,ae,Xt(e))}else fi(e,s,l,Xt(e))}catch(ie){fi(e,s,{then:function(){},status:"rejected",reason:ie},Xt())}finally{$.p=g,b!==null&&k.types!==null&&(b.types=k.types),T.T=b}}function fw(){}function Xu(e,s,r,l){if(e.tag!==5)throw Error(i(476));var h=rg(e).queue;ag(e,h,s,q,r===null?fw:function(){return ig(e),r(l)})}function rg(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:q},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:r},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function ig(e){var s=rg(e);s.next===null&&(s=e.alternate.memoizedState),fi(e,s.next.queue,{},Xt())}function Ku(){return vt(ki)}function lg(){return at().memoizedState}function og(){return at().memoizedState}function mw(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var r=Xt();e=ws(r);var l=_s(s,e,r);l!==null&&(Lt(l,s,r),oi(l,s,r)),s={cache:Su()},e.payload=s;return}s=s.return}}function gw(e,s,r){var l=Xt();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ao(e)?ug(s,r):(r=hu(e,s,r,l),r!==null&&(Lt(r,e,l),dg(r,s,l)))}function cg(e,s,r){var l=Xt();fi(e,s,r,l)}function fi(e,s,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ao(e))ug(s,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var b=s.lastRenderedState,k=g(b,r);if(h.hasEagerState=!0,h.eagerState=k,qt(k,b))return Ll(e,s,h,0),Pe===null&&$l(),!1}catch{}finally{}if(r=hu(e,s,h,l),r!==null)return Lt(r,e,l),dg(r,s,l),!0}return!1}function Qu(e,s,r,l){if(l={lane:2,revertLane:Ad(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ao(e)){if(s)throw Error(i(479))}else s=hu(e,r,l,2),s!==null&&Lt(s,e,2)}function ao(e){var s=e.alternate;return e===Te||s!==null&&s===Te}function ug(e,s){tr=Zl=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function dg(e,s,r){if((r&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,r|=l,s.lanes=r,xl(e,r)}}var mi={readContext:vt,use:eo,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};mi.useEffectEvent=We;var hg={readContext:vt,use:eo,useCallback:function(e,s){return Ct().memoizedState=[e,s===void 0?null:s],e},useContext:vt,useEffect:Qm,useImperativeHandle:function(e,s,r){r=r!=null?r.concat([e]):null,no(4194308,4,Wm.bind(null,s,e),r)},useLayoutEffect:function(e,s){return no(4194308,4,e,s)},useInsertionEffect:function(e,s){no(4,2,e,s)},useMemo:function(e,s){var r=Ct();s=s===void 0?null:s;var l=e();if(da){Sn(!0);try{e()}finally{Sn(!1)}}return r.memoizedState=[l,s],l},useReducer:function(e,s,r){var l=Ct();if(r!==void 0){var h=r(s);if(da){Sn(!0);try{r(s)}finally{Sn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=gw.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var s=Ct();return e={current:e},s.memoizedState=e},useState:function(e){e=Iu(e);var s=e.queue,r=cg.bind(null,Te,s);return s.dispatch=r,[e.memoizedState,r]},useDebugValue:Pu,useDeferredValue:function(e,s){var r=Ct();return Yu(r,e,s)},useTransition:function(){var e=Iu(!1);return e=ag.bind(null,Te,e.queue,!0,!1),Ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,r){var l=Te,h=Ct();if(ze){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Pe===null)throw Error(i(349));(Re&127)!==0||Mm(l,s,r)}h.memoizedState=r;var g={value:r,getSnapshot:s};return h.queue=g,Qm(zm.bind(null,l,g,e),[e]),l.flags|=2048,sr(9,{destroy:void 0},Dm.bind(null,l,g,r,s),null),r},useId:function(){var e=Ct(),s=Pe.identifierPrefix;if(ze){var r=En,l=Nn;r=(l&~(1<<32-Tt(l)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Fl++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=ow++,s="_"+s+"r_"+r.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:Ku,useFormState:Gm,useActionState:Gm,useOptimistic:function(e){var s=Ct();s.memoizedState=s.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Qu.bind(null,Te,!0,r),r.dispatch=s,[e,s]},useMemoCache:Bu,useCacheRefresh:function(){return Ct().memoizedState=mw.bind(null,Te)},useEffectEvent:function(e){var s=Ct(),r={impl:e};return s.memoizedState=r,function(){if((Be&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Ju={readContext:vt,use:eo,useCallback:tg,useContext:vt,useEffect:Gu,useImperativeHandle:eg,useInsertionEffect:Zm,useLayoutEffect:Fm,useMemo:ng,useReducer:to,useRef:Km,useState:function(){return to(Pn)},useDebugValue:Pu,useDeferredValue:function(e,s){var r=at();return sg(r,Ie.memoizedState,e,s)},useTransition:function(){var e=to(Pn)[0],s=at().memoizedState;return[typeof e=="boolean"?e:hi(e),s]},useSyncExternalStore:Rm,useId:lg,useHostTransitionStatus:Ku,useFormState:Pm,useActionState:Pm,useOptimistic:function(e,s){var r=at();return Lm(r,Ie,e,s)},useMemoCache:Bu,useCacheRefresh:og};Ju.useEffectEvent=Jm;var fg={readContext:vt,use:eo,useCallback:tg,useContext:vt,useEffect:Gu,useImperativeHandle:eg,useInsertionEffect:Zm,useLayoutEffect:Fm,useMemo:ng,useReducer:qu,useRef:Km,useState:function(){return qu(Pn)},useDebugValue:Pu,useDeferredValue:function(e,s){var r=at();return Ie===null?Yu(r,e,s):sg(r,Ie.memoizedState,e,s)},useTransition:function(){var e=qu(Pn)[0],s=at().memoizedState;return[typeof e=="boolean"?e:hi(e),s]},useSyncExternalStore:Rm,useId:lg,useHostTransitionStatus:Ku,useFormState:Xm,useActionState:Xm,useOptimistic:function(e,s){var r=at();return Ie!==null?Lm(r,Ie,e,s):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Bu,useCacheRefresh:og};fg.useEffectEvent=Jm;function Zu(e,s,r,l){s=e.memoizedState,r=r(l,s),r=r==null?s:x({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Fu={enqueueSetState:function(e,s,r){e=e._reactInternals;var l=Xt(),h=ws(l);h.payload=s,r!=null&&(h.callback=r),s=_s(e,h,l),s!==null&&(Lt(s,e,l),oi(s,e,l))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var l=Xt(),h=ws(l);h.tag=1,h.payload=s,r!=null&&(h.callback=r),s=_s(e,h,l),s!==null&&(Lt(s,e,l),oi(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Xt(),l=ws(r);l.tag=2,s!=null&&(l.callback=s),s=_s(e,l,r),s!==null&&(Lt(s,e,r),oi(s,e,r))}};function mg(e,s,r,l,h,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,b):s.prototype&&s.prototype.isPureReactComponent?!ei(r,l)||!ei(h,g):!0}function gg(e,s,r,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==e&&Fu.enqueueReplaceState(s,s.state,null)}function ha(e,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(e=e.defaultProps){r===s&&(r=x({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}function pg(e){Ul(e)}function xg(e){console.error(e)}function yg(e){Ul(e)}function ro(e,s){try{var r=e.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function vg(e,s,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wu(e,s,r){return r=ws(r),r.tag=3,r.payload={element:null},r.callback=function(){ro(e,s)},r}function bg(e){return e=ws(e),e.tag=3,e}function wg(e,s,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var g=l.value;e.payload=function(){return h(g)},e.callback=function(){vg(s,r,l)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){vg(s,r,l),typeof h!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var k=l.stack;this.componentDidCatch(l.value,{componentStack:k!==null?k:""})})}function pw(e,s,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Qa(s,r,h,!0),r=Vt.current,r!==null){switch(r.tag){case 31:case 13:return ln===null?yo():r.alternate===null&&et===0&&(et=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===Yl?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),jd(e,l,h)),!1;case 22:return r.flags|=65536,l===Yl?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),jd(e,l,h)),!1}throw Error(i(435,r.tag))}return jd(e,l,h),yo(),!1}if(ze)return s=Vt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==yu&&(e=Error(i(422),{cause:l}),si(nn(e,r)))):(l!==yu&&(s=Error(i(423),{cause:l}),si(nn(s,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=nn(l,r),h=Wu(e.stateNode,l,h),Cu(e,h),et!==4&&(et=2)),!1;var g=Error(i(520),{cause:l});if(g=nn(g,r),_i===null?_i=[g]:_i.push(g),et!==4&&(et=2),s===null)return!0;l=nn(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=Wu(r.stateNode,l,e),Cu(r,e),!1;case 1:if(s=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ts===null||!Ts.has(g))))return r.flags|=65536,h&=-h,r.lanes|=h,h=bg(h),wg(h,e,r,l),Cu(r,h),!1}r=r.return}while(r!==null);return!1}var ed=Error(i(461)),ot=!1;function bt(e,s,r,l){s.child=e===null?Nm(s,null,r,l):ua(s,e.child,r,l)}function _g(e,s,r,l,h){r=r.render;var g=s.ref;if("ref"in l){var b={};for(var k in l)k!=="ref"&&(b[k]=l[k])}else b=l;return ia(s),l=zu(e,s,r,b,g,h),k=Uu(),e!==null&&!ot?($u(e,s,h),Yn(e,s,h)):(ze&&k&&pu(s),s.flags|=1,bt(e,s,l,h),s.child)}function Sg(e,s,r,l,h){if(e===null){var g=r.type;return typeof g=="function"&&!fu(g)&&g.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=g,jg(e,s,g,l,h)):(e=Hl(r.type,null,l,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(g=e.child,!od(e,h)){var b=g.memoizedProps;if(r=r.compare,r=r!==null?r:ei,r(b,l)&&e.ref===s.ref)return Yn(e,s,h)}return s.flags|=1,e=Hn(g,l),e.ref=s.ref,e.return=s,s.child=e}function jg(e,s,r,l,h){if(e!==null){var g=e.memoizedProps;if(ei(g,l)&&e.ref===s.ref)if(ot=!1,s.pendingProps=l=g,od(e,h))(e.flags&131072)!==0&&(ot=!0);else return s.lanes=e.lanes,Yn(e,s,h)}return td(e,s,r,l,h)}function Ng(e,s,r,l){var h=l.children,g=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,e!==null){for(l=s.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~g}else l=0,s.child=null;return Eg(e,s,g,r,l)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Gl(s,g!==null?g.cachePool:null),g!==null?Tm(s,g):Ou(),Cm(s);else return l=s.lanes=536870912,Eg(e,s,g!==null?g.baseLanes|r:r,r,l)}else g!==null?(Gl(s,g.cachePool),Tm(s,g),js(),s.memoizedState=null):(e!==null&&Gl(s,null),Ou(),js());return bt(e,s,h,r),s.child}function gi(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Eg(e,s,r,l,h){var g=Nu();return g=g===null?null:{parent:it._currentValue,pool:g},s.memoizedState={baseLanes:r,cachePool:g},e!==null&&Gl(s,null),Ou(),Cm(s),e!==null&&Qa(e,s,l,!0),s.childLanes=h,null}function io(e,s){return s=oo({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function Ag(e,s,r){return ua(s,e.child,null,r),e=io(s,s.pendingProps),e.flags|=2,Gt(s),s.memoizedState=null,e}function xw(e,s,r){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(ze){if(l.mode==="hidden")return e=io(s,l),s.lanes=536870912,gi(null,e);if(Mu(s),(e=Xe)?(e=B0(e,rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:ps!==null?{id:Nn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=um(e),r.return=s,s.child=r,yt=s,Xe=null)):e=null,e===null)throw ys(s);return s.lanes=536870912,null}return io(s,l)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(Mu(s),h)if(s.flags&256)s.flags&=-257,s=Ag(e,s,r);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(i(558));else if(ot||Qa(e,s,r,!1),h=(r&e.childLanes)!==0,ot||h){if(l=Pe,l!==null&&(b=yl(l,r),b!==0&&b!==g.retryLane))throw g.retryLane=b,na(e,b),Lt(l,e,b),ed;yo(),s=Ag(e,s,r)}else e=g.treeContext,Xe=on(b.nextSibling),yt=s,ze=!0,xs=null,rn=!1,e!==null&&fm(s,e),s=io(s,l),s.flags|=4096;return s}return e=Hn(e.child,{mode:l.mode,children:l.children}),e.ref=s.ref,s.child=e,e.return=s,e}function lo(e,s){var r=s.ref;if(r===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(s.flags|=4194816)}}function td(e,s,r,l,h){return ia(s),r=zu(e,s,r,l,void 0,h),l=Uu(),e!==null&&!ot?($u(e,s,h),Yn(e,s,h)):(ze&&l&&pu(s),s.flags|=1,bt(e,s,r,h),s.child)}function Tg(e,s,r,l,h,g){return ia(s),s.updateQueue=null,r=Om(s,l,r,h),km(e),l=Uu(),e!==null&&!ot?($u(e,s,g),Yn(e,s,g)):(ze&&l&&pu(s),s.flags|=1,bt(e,s,r,g),s.child)}function Cg(e,s,r,l,h){if(ia(s),s.stateNode===null){var g=Pa,b=r.contextType;typeof b=="object"&&b!==null&&(g=vt(b)),g=new r(l,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fu,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=l,g.state=s.memoizedState,g.refs={},Au(s),b=r.contextType,g.context=typeof b=="object"&&b!==null?vt(b):Pa,g.state=s.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Zu(s,r,b,l),g.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Fu.enqueueReplaceState(g,g.state,null),ui(s,l,g,h),ci(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){g=s.stateNode;var k=s.memoizedProps,B=ha(r,k);g.props=B;var W=g.context,ae=r.contextType;b=Pa,typeof ae=="object"&&ae!==null&&(b=vt(ae));var ie=r.getDerivedStateFromProps;ae=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k||W!==b)&&gg(s,g,l,b),bs=!1;var ee=s.memoizedState;g.state=ee,ui(s,l,g,h),ci(),W=s.memoizedState,k||ee!==W||bs?(typeof ie=="function"&&(Zu(s,r,ie,l),W=s.memoizedState),(B=bs||mg(s,r,B,l,ee,W,b))?(ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=W),g.props=l,g.state=W,g.context=b,l=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{g=s.stateNode,Tu(e,s),b=s.memoizedProps,ae=ha(r,b),g.props=ae,ie=s.pendingProps,ee=g.context,W=r.contextType,B=Pa,typeof W=="object"&&W!==null&&(B=vt(W)),k=r.getDerivedStateFromProps,(W=typeof k=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ie||ee!==B)&&gg(s,g,l,B),bs=!1,ee=s.memoizedState,g.state=ee,ui(s,l,g,h),ci();var se=s.memoizedState;b!==ie||ee!==se||bs||e!==null&&e.dependencies!==null&&Il(e.dependencies)?(typeof k=="function"&&(Zu(s,r,k,l),se=s.memoizedState),(ae=bs||mg(s,r,ae,l,ee,se,B)||e!==null&&e.dependencies!==null&&Il(e.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,se,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,se,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&ee===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&ee===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=se),g.props=l,g.state=se,g.context=B,l=ae):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&ee===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&ee===e.memoizedState||(s.flags|=1024),l=!1)}return g=l,lo(e,s),l=(s.flags&128)!==0,g||l?(g=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,e!==null&&l?(s.child=ua(s,e.child,null,h),s.child=ua(s,null,r,h)):bt(e,s,r,h),s.memoizedState=g.state,e=s.child):e=Yn(e,s,h),e}function kg(e,s,r,l){return aa(),s.flags|=256,bt(e,s,r,l),s.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sd(e){return{baseLanes:e,cachePool:vm()}}function ad(e,s,r){return e=e!==null?e.childLanes&~r:0,s&&(e|=Yt),e}function Og(e,s,r){var l=s.pendingProps,h=!1,g=(s.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(st.current&2)!==0),b&&(h=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,e===null){if(ze){if(h?Ss(s):js(),(e=Xe)?(e=B0(e,rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:ps!==null?{id:Nn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=um(e),r.return=s,s.child=r,yt=s,Xe=null)):e=null,e===null)throw ys(s);return Hd(e)?s.lanes=32:s.lanes=536870912,null}var k=l.children;return l=l.fallback,h?(js(),h=s.mode,k=oo({mode:"hidden",children:k},h),l=sa(l,h,r,null),k.return=s,l.return=s,k.sibling=l,s.child=k,l=s.child,l.memoizedState=sd(r),l.childLanes=ad(e,b,r),s.memoizedState=nd,gi(null,l)):(Ss(s),rd(s,k))}var B=e.memoizedState;if(B!==null&&(k=B.dehydrated,k!==null)){if(g)s.flags&256?(Ss(s),s.flags&=-257,s=id(e,s,r)):s.memoizedState!==null?(js(),s.child=e.child,s.flags|=128,s=null):(js(),k=l.fallback,h=s.mode,l=oo({mode:"visible",children:l.children},h),k=sa(k,h,r,null),k.flags|=2,l.return=s,k.return=s,l.sibling=k,s.child=l,ua(s,e.child,null,r),l=s.child,l.memoizedState=sd(r),l.childLanes=ad(e,b,r),s.memoizedState=nd,s=gi(null,l));else if(Ss(s),Hd(k)){if(b=k.nextSibling&&k.nextSibling.dataset,b)var W=b.dgst;b=W,l=Error(i(419)),l.stack="",l.digest=b,si({value:l,source:null,stack:null}),s=id(e,s,r)}else if(ot||Qa(e,s,r,!1),b=(r&e.childLanes)!==0,ot||b){if(b=Pe,b!==null&&(l=yl(b,r),l!==0&&l!==B.retryLane))throw B.retryLane=l,na(e,l),Lt(b,e,l),ed;Bd(k)||yo(),s=id(e,s,r)}else Bd(k)?(s.flags|=192,s.child=e.child,s=null):(e=B.treeContext,Xe=on(k.nextSibling),yt=s,ze=!0,xs=null,rn=!1,e!==null&&fm(s,e),s=rd(s,l.children),s.flags|=4096);return s}return h?(js(),k=l.fallback,h=s.mode,B=e.child,W=B.sibling,l=Hn(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,W!==null?k=Hn(W,k):(k=sa(k,h,r,null),k.flags|=2),k.return=s,l.return=s,l.sibling=k,s.child=l,gi(null,l),l=s.child,k=e.child.memoizedState,k===null?k=sd(r):(h=k.cachePool,h!==null?(B=it._currentValue,h=h.parent!==B?{parent:B,pool:B}:h):h=vm(),k={baseLanes:k.baseLanes|r,cachePool:h}),l.memoizedState=k,l.childLanes=ad(e,b,r),s.memoizedState=nd,gi(e.child,l)):(Ss(s),r=e.child,e=r.sibling,r=Hn(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,e!==null&&(b=s.deletions,b===null?(s.deletions=[e],s.flags|=16):b.push(e)),s.child=r,s.memoizedState=null,r)}function rd(e,s){return s=oo({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function oo(e,s){return e=It(22,e,null,s),e.lanes=0,e}function id(e,s,r){return ua(s,e.child,null,r),e=rd(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Rg(e,s,r){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),wu(e.return,s,r)}function ld(e,s,r,l,h,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:g}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=r,b.tailMode=h,b.treeForkCount=g)}function Mg(e,s,r){var l=s.pendingProps,h=l.revealOrder,g=l.tail;l=l.children;var b=st.current,k=(b&2)!==0;if(k?(b=b&1|2,s.flags|=128):b&=1,Z(st,b),bt(e,s,l,r),l=ze?ni:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rg(e,r,s);else if(e.tag===19)Rg(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(r=s.child,h=null;r!==null;)e=r.alternate,e!==null&&Jl(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=s.child,s.child=null):(h=r.sibling,r.sibling=null),ld(s,!1,h,r,g,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&Jl(e)===null){s.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}ld(s,!0,r,null,g,l);break;case"together":ld(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Yn(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),As|=s.lanes,(r&s.childLanes)===0)if(e!==null){if(Qa(e,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,r=Hn(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Hn(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function od(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Il(e)))}function yw(e,s,r){switch(s.tag){case 3:ce(s,s.stateNode.containerInfo),vs(s,it,e.memoizedState.cache),aa();break;case 27:case 5:Ne(s);break;case 4:ce(s,s.stateNode.containerInfo);break;case 10:vs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Mu(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ss(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Og(e,s,r):(Ss(s),e=Yn(e,s,r),e!==null?e.sibling:null);Ss(s);break;case 19:var h=(e.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Qa(e,s,r,!1),l=(r&s.childLanes)!==0),h){if(l)return Mg(e,s,r);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(st,st.current),l)break;return null;case 22:return s.lanes=0,Ng(e,s,r,s.pendingProps);case 24:vs(s,it,e.memoizedState.cache)}return Yn(e,s,r)}function Dg(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps)ot=!0;else{if(!od(e,r)&&(s.flags&128)===0)return ot=!1,yw(e,s,r);ot=(e.flags&131072)!==0}else ot=!1,ze&&(s.flags&1048576)!==0&&hm(s,ni,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(e=oa(s.elementType),s.type=e,typeof e=="function")fu(e)?(l=ha(e,l),s.tag=1,s=Cg(null,s,e,l,r)):(s.tag=0,s=td(null,s,e,l,r));else{if(e!=null){var h=e.$$typeof;if(h===C){s.tag=11,s=_g(null,s,e,l,r);break e}else if(h===R){s.tag=14,s=Sg(null,s,e,l,r);break e}}throw s=U(e)||e,Error(i(306,s,""))}}return s;case 0:return td(e,s,s.type,s.pendingProps,r);case 1:return l=s.type,h=ha(l,s.pendingProps),Cg(e,s,l,h,r);case 3:e:{if(ce(s,s.stateNode.containerInfo),e===null)throw Error(i(387));l=s.pendingProps;var g=s.memoizedState;h=g.element,Tu(e,s),ui(s,l,null,r);var b=s.memoizedState;if(l=b.cache,vs(s,it,l),l!==g.cache&&_u(s,[it],r,!0),ci(),l=b.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=kg(e,s,l,r);break e}else if(l!==h){h=nn(Error(i(424)),s),si(h),s=kg(e,s,l,r);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xe=on(e.firstChild),yt=s,ze=!0,xs=null,rn=!0,r=Nm(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(aa(),l===h){s=Yn(e,s,r);break e}bt(e,s,l,r)}s=s.child}return s;case 26:return lo(e,s),e===null?(r=P0(s.type,null,s.pendingProps,null))?s.memoizedState=r:ze||(r=s.type,e=s.pendingProps,l=No(oe.current).createElement(r),l[ft]=s,l[Nt]=e,wt(l,r,e),rt(l),s.stateNode=l):s.memoizedState=P0(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Ne(s),e===null&&ze&&(l=s.stateNode=I0(s.type,s.pendingProps,oe.current),yt=s,rn=!0,h=Xe,Rs(s.type)?(qd=h,Xe=on(l.firstChild)):Xe=h),bt(e,s,s.pendingProps.children,r),lo(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&ze&&((h=l=Xe)&&(l=Kw(l,s.type,s.pendingProps,rn),l!==null?(s.stateNode=l,yt=s,Xe=on(l.firstChild),rn=!1,h=!0):h=!1),h||ys(s)),Ne(s),h=s.type,g=s.pendingProps,b=e!==null?e.memoizedProps:null,l=g.children,Ud(h,g)?l=null:b!==null&&Ud(h,b)&&(s.flags|=32),s.memoizedState!==null&&(h=zu(e,s,cw,null,null,r),ki._currentValue=h),lo(e,s),bt(e,s,l,r),s.child;case 6:return e===null&&ze&&((e=r=Xe)&&(r=Qw(r,s.pendingProps,rn),r!==null?(s.stateNode=r,yt=s,Xe=null,e=!0):e=!1),e||ys(s)),null;case 13:return Og(e,s,r);case 4:return ce(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=ua(s,null,l,r):bt(e,s,l,r),s.child;case 11:return _g(e,s,s.type,s.pendingProps,r);case 7:return bt(e,s,s.pendingProps,r),s.child;case 8:return bt(e,s,s.pendingProps.children,r),s.child;case 12:return bt(e,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,vs(s,s.type,l.value),bt(e,s,l.children,r),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,ia(s),h=vt(h),l=l(h),s.flags|=1,bt(e,s,l,r),s.child;case 14:return Sg(e,s,s.type,s.pendingProps,r);case 15:return jg(e,s,s.type,s.pendingProps,r);case 19:return Mg(e,s,r);case 31:return xw(e,s,r);case 22:return Ng(e,s,r,s.pendingProps);case 24:return ia(s),l=vt(it),e===null?(h=Nu(),h===null&&(h=Pe,g=Su(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=r),h=g),s.memoizedState={parent:l,cache:h},Au(s),vs(s,it,h)):((e.lanes&r)!==0&&(Tu(e,s),ui(s,null,null,r),ci()),h=e.memoizedState,g=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),vs(s,it,l)):(l=g.cache,vs(s,it,l),l!==h.cache&&_u(s,[it],r,!0))),bt(e,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Xn(e){e.flags|=4}function cd(e,s,r,l,h){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(l0())e.flags|=8192;else throw ca=Yl,Eu}else e.flags&=-16777217}function zg(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!J0(s))if(l0())e.flags|=8192;else throw ca=Yl,Eu}function co(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?gl():536870912,e.lanes|=s,lr|=s)}function pi(e,s){if(!ze)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ke(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(s)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=r,s}function vw(e,s,r){var l=s.pendingProps;switch(xu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(s),null;case 1:return Ke(s),null;case 3:return r=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Vn(it),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ka(s)?Xn(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vu())),Ke(s),null;case 26:var h=s.type,g=s.memoizedState;return e===null?(Xn(s),g!==null?(Ke(s),zg(s,g)):(Ke(s),cd(s,h,null,l,r))):g?g!==e.memoizedState?(Xn(s),Ke(s),zg(s,g)):(Ke(s),s.flags&=-16777217):(e=e.memoizedProps,e!==l&&Xn(s),Ke(s),cd(s,h,e,l,r)),null;case 27:if(ue(s),r=oe.current,h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Xn(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}e=te.current,Ka(s)?mm(s):(e=I0(h,l,r),s.stateNode=e,Xn(s))}return Ke(s),null;case 5:if(ue(s),h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Xn(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}if(g=te.current,Ka(s))mm(s);else{var b=No(oe.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?g.multiple=!0:l.size&&(g.size=l.size);break;default:g=typeof l.is=="string"?b.createElement(h,{is:l.is}):b.createElement(h)}}g[ft]=s,g[Nt]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=g;e:switch(wt(g,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Xn(s)}}return Ke(s),cd(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,r),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&Xn(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(e=oe.current,Ka(s)){if(e=s.stateNode,r=s.memoizedProps,l=null,h=yt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[ft]=s,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||O0(e.nodeValue,r)),e||ys(s,!0)}else e=No(e).createTextNode(l),e[ft]=s,s.stateNode=e}return Ke(s),null;case 31:if(r=s.memoizedState,e===null||e.memoizedState!==null){if(l=Ka(s),r!==null){if(e===null){if(!l)throw Error(i(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[ft]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ke(s),e=!1}else r=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return s.flags&256?(Gt(s),s):(Gt(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ke(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ka(s),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[ft]=s}else aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ke(s),h=!1}else h=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Gt(s),s):(Gt(s),null)}return Gt(s),(s.flags&128)!==0?(s.lanes=r,s):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048)),r!==e&&r&&(s.child.flags|=8192),co(s,s.updateQueue),Ke(s),null);case 4:return fe(),e===null&&Od(s.stateNode.containerInfo),Ke(s),null;case 10:return Vn(s.type),Ke(s),null;case 19:if(H(st),l=s.memoizedState,l===null)return Ke(s),null;if(h=(s.flags&128)!==0,g=l.rendering,g===null)if(h)pi(l,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(g=Jl(e),g!==null){for(s.flags|=128,pi(l,!1),e=g.updateQueue,s.updateQueue=e,co(s,e),s.subtreeFlags=0,e=r,r=s.child;r!==null;)cm(r,e),r=r.sibling;return Z(st,st.current&1|2),ze&&qn(s,l.treeForkCount),s.child}e=e.sibling}l.tail!==null&&xt()>go&&(s.flags|=128,h=!0,pi(l,!1),s.lanes=4194304)}else{if(!h)if(e=Jl(g),e!==null){if(s.flags|=128,h=!0,e=e.updateQueue,s.updateQueue=e,co(s,e),pi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!ze)return Ke(s),null}else 2*xt()-l.renderingStartTime>go&&r!==536870912&&(s.flags|=128,h=!0,pi(l,!1),s.lanes=4194304);l.isBackwards?(g.sibling=s.child,s.child=g):(e=l.last,e!==null?e.sibling=g:s.child=g,l.last=g)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=xt(),e.sibling=null,r=st.current,Z(st,h?r&1|2:r&1),ze&&qn(s,l.treeForkCount),e):(Ke(s),null);case 22:case 23:return Gt(s),Ru(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&(Ke(s),s.subtreeFlags&6&&(s.flags|=8192)):Ke(s),r=s.updateQueue,r!==null&&co(s,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),e!==null&&H(la),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Vn(it),Ke(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function bw(e,s){switch(xu(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Vn(it),fe(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 31:if(s.memoizedState!==null){if(Gt(s),s.alternate===null)throw Error(i(340));aa()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(Gt(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));aa()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return H(st),null;case 4:return fe(),null;case 10:return Vn(s.type),null;case 22:case 23:return Gt(s),Ru(),e!==null&&H(la),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Vn(it),null;case 25:return null;default:return null}}function Ug(e,s){switch(xu(s),s.tag){case 3:Vn(it),fe();break;case 26:case 27:case 5:ue(s);break;case 4:fe();break;case 31:s.memoizedState!==null&&Gt(s);break;case 13:Gt(s);break;case 19:H(st);break;case 10:Vn(s.type);break;case 22:case 23:Gt(s),Ru(),e!==null&&H(la);break;case 24:Vn(it)}}function xi(e,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&e)===e){l=void 0;var g=r.create,b=r.inst;l=g(),b.destroy=l}r=r.next}while(r!==h)}}catch(k){qe(s,s.return,k)}}function Ns(e,s,r){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&e)===e){var b=l.inst,k=b.destroy;if(k!==void 0){b.destroy=void 0,h=s;var B=r,W=k;try{W()}catch(ae){qe(h,B,ae)}}}l=l.next}while(l!==g)}}catch(ae){qe(s,s.return,ae)}}function $g(e){var s=e.updateQueue;if(s!==null){var r=e.stateNode;try{Am(s,r)}catch(l){qe(e,e.return,l)}}}function Lg(e,s,r){r.props=ha(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){qe(e,s,l)}}function yi(e,s){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(h){qe(e,s,h)}}function An(e,s){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){qe(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){qe(e,s,h)}else r.current=null}function Bg(e){var s=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){qe(e,e.return,h)}}function ud(e,s,r){try{var l=e.stateNode;Iw(l,e.type,r,s),l[Nt]=s}catch(h){qe(e,e.return,h)}}function Hg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Rs(e.type)||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hd(e,s,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(e),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Ln));else if(l!==4&&(l===27&&Rs(e.type)&&(r=e.stateNode,s=null),e=e.child,e!==null))for(hd(e,s,r),e=e.sibling;e!==null;)hd(e,s,r),e=e.sibling}function uo(e,s,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(l!==4&&(l===27&&Rs(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(uo(e,s,r),e=e.sibling;e!==null;)uo(e,s,r),e=e.sibling}function qg(e){var s=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);wt(s,l,r),s[ft]=e,s[Nt]=r}catch(g){qe(e,e.return,g)}}var Kn=!1,ct=!1,fd=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,pt=null;function ww(e,s){if(e=e.containerInfo,Dd=Ro,e=em(e),iu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var b=0,k=-1,B=-1,W=0,ae=0,ie=e,ee=null;t:for(;;){for(var se;ie!==r||h!==0&&ie.nodeType!==3||(k=b+h),ie!==g||l!==0&&ie.nodeType!==3||(B=b+l),ie.nodeType===3&&(b+=ie.nodeValue.length),(se=ie.firstChild)!==null;)ee=ie,ie=se;for(;;){if(ie===e)break t;if(ee===r&&++W===h&&(k=b),ee===g&&++ae===l&&(B=b),(se=ie.nextSibling)!==null)break;ie=ee,ee=ie.parentNode}ie=se}r=k===-1||B===-1?null:{start:k,end:B}}else r=null}r=r||{start:0,end:0}}else r=null;for(zd={focusedElem:e,selectionRange:r},Ro=!1,pt=s;pt!==null;)if(s=pt,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,pt=e;else for(;pt!==null;){switch(s=pt,g=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)h=e[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,r=s,h=g.memoizedProps,g=g.memoizedState,l=r.stateNode;try{var ge=ha(r.type,h);e=l.getSnapshotBeforeUpdate(ge,g),l.__reactInternalSnapshotBeforeUpdate=e}catch(_e){qe(r,r.return,_e)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,r=e.nodeType,r===9)Ld(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=s.sibling,e!==null){e.return=s.return,pt=e;break}pt=s.return}}function Vg(e,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Jn(e,r),l&4&&xi(5,r);break;case 1:if(Jn(e,r),l&4)if(e=r.stateNode,s===null)try{e.componentDidMount()}catch(b){qe(r,r.return,b)}else{var h=ha(r.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(b){qe(r,r.return,b)}}l&64&&$g(r),l&512&&yi(r,r.return);break;case 3:if(Jn(e,r),l&64&&(e=r.updateQueue,e!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Am(e,s)}catch(b){qe(r,r.return,b)}}break;case 27:s===null&&l&4&&qg(r);case 26:case 5:Jn(e,r),s===null&&l&4&&Bg(r),l&512&&yi(r,r.return);break;case 12:Jn(e,r);break;case 31:Jn(e,r),l&4&&Yg(e,r);break;case 13:Jn(e,r),l&4&&Xg(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=kw.bind(null,r),Jw(e,r))));break;case 22:if(l=r.memoizedState!==null||Kn,!l){s=s!==null&&s.memoizedState!==null||ct,h=Kn;var g=ct;Kn=l,(ct=s)&&!g?Zn(e,r,(r.subtreeFlags&8772)!==0):Jn(e,r),Kn=h,ct=g}break;case 30:break;default:Jn(e,r)}}function Gg(e){var s=e.alternate;s!==null&&(e.alternate=null,Gg(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Gr(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,Dt=!1;function Qn(e,s,r){for(r=r.child;r!==null;)Pg(e,s,r),r=r.sibling}function Pg(e,s,r){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Xs,r)}catch{}switch(r.tag){case 26:ct||An(r,s),Qn(e,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ct||An(r,s);var l=Qe,h=Dt;Rs(r.type)&&(Qe=r.stateNode,Dt=!1),Qn(e,s,r),Ai(r.stateNode),Qe=l,Dt=h;break;case 5:ct||An(r,s);case 6:if(l=Qe,h=Dt,Qe=null,Qn(e,s,r),Qe=l,Dt=h,Qe!==null)if(Dt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(r.stateNode)}catch(g){qe(r,s,g)}else try{Qe.removeChild(r.stateNode)}catch(g){qe(r,s,g)}break;case 18:Qe!==null&&(Dt?(e=Qe,$0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),gr(e)):$0(Qe,r.stateNode));break;case 4:l=Qe,h=Dt,Qe=r.stateNode.containerInfo,Dt=!0,Qn(e,s,r),Qe=l,Dt=h;break;case 0:case 11:case 14:case 15:Ns(2,r,s),ct||Ns(4,r,s),Qn(e,s,r);break;case 1:ct||(An(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Lg(r,s,l)),Qn(e,s,r);break;case 21:Qn(e,s,r);break;case 22:ct=(l=ct)||r.memoizedState!==null,Qn(e,s,r),ct=l;break;default:Qn(e,s,r)}}function Yg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gr(e)}catch(r){qe(s,s.return,r)}}}function Xg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gr(e)}catch(r){qe(s,s.return,r)}}function _w(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Ig),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Ig),s;default:throw Error(i(435,e.tag))}}function ho(e,s){var r=_w(e);s.forEach(function(l){if(!r.has(l)){r.add(l);var h=Ow.bind(null,e,l);l.then(h,h)}})}function zt(e,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],g=e,b=s,k=b;e:for(;k!==null;){switch(k.tag){case 27:if(Rs(k.type)){Qe=k.stateNode,Dt=!1;break e}break;case 5:Qe=k.stateNode,Dt=!1;break e;case 3:case 4:Qe=k.stateNode.containerInfo,Dt=!0;break e}k=k.return}if(Qe===null)throw Error(i(160));Pg(g,b,h),Qe=null,Dt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Kg(s,e),s=s.sibling}var fn=null;function Kg(e,s){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zt(s,e),Ut(e),l&4&&(Ns(3,e,e.return),xi(3,e),Ns(5,e,e.return));break;case 1:zt(s,e),Ut(e),l&512&&(ct||r===null||An(r,r.return)),l&64&&Kn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=fn;if(zt(s,e),Ut(e),l&512&&(ct||r===null||An(r,r.return)),l&4){var g=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Js]||g[ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(l),h.head.insertBefore(g,h.querySelector("head > title"))),wt(g,l,r),g[ft]=e,rt(g),l=g;break e;case"link":var b=K0("link","href",h).get(l+(r.href||""));if(b){for(var k=0;k<b.length;k++)if(g=b[k],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(k,1);break t}}g=h.createElement(l),wt(g,l,r),h.head.appendChild(g);break;case"meta":if(b=K0("meta","content",h).get(l+(r.content||""))){for(k=0;k<b.length;k++)if(g=b[k],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(k,1);break t}}g=h.createElement(l),wt(g,l,r),h.head.appendChild(g);break;default:throw Error(i(468,l))}g[ft]=e,rt(g),l=g}e.stateNode=l}else Q0(h,e.type,e.stateNode);else e.stateNode=X0(h,l,e.memoizedProps);else g!==l?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,l===null?Q0(h,e.type,e.stateNode):X0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ud(e,e.memoizedProps,r.memoizedProps)}break;case 27:zt(s,e),Ut(e),l&512&&(ct||r===null||An(r,r.return)),r!==null&&l&4&&ud(e,e.memoizedProps,r.memoizedProps);break;case 5:if(zt(s,e),Ut(e),l&512&&(ct||r===null||An(r,r.return)),e.flags&32){h=e.stateNode;try{La(h,"")}catch(ge){qe(e,e.return,ge)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,ud(e,h,r!==null?r.memoizedProps:h)),l&1024&&(fd=!0);break;case 6:if(zt(s,e),Ut(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(ge){qe(e,e.return,ge)}}break;case 3:if(To=null,h=fn,fn=Eo(s.containerInfo),zt(s,e),fn=h,Ut(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{gr(s.containerInfo)}catch(ge){qe(e,e.return,ge)}fd&&(fd=!1,Qg(e));break;case 4:l=fn,fn=Eo(e.stateNode.containerInfo),zt(s,e),Ut(e),fn=l;break;case 12:zt(s,e),Ut(e);break;case 31:zt(s,e),Ut(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ho(e,l)));break;case 13:zt(s,e),Ut(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(mo=xt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ho(e,l)));break;case 22:h=e.memoizedState!==null;var B=r!==null&&r.memoizedState!==null,W=Kn,ae=ct;if(Kn=W||h,ct=ae||B,zt(s,e),ct=ae,Kn=W,Ut(e),l&8192)e:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(r===null||B||Kn||ct||fa(e)),r=null,s=e;;){if(s.tag===5||s.tag===26){if(r===null){B=r=s;try{if(g=B.stateNode,h)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{k=B.stateNode;var ie=B.memoizedProps.style,ee=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ge){qe(B,B.return,ge)}}}else if(s.tag===6){if(r===null){B=s;try{B.stateNode.nodeValue=h?"":B.memoizedProps}catch(ge){qe(B,B.return,ge)}}}else if(s.tag===18){if(r===null){B=s;try{var se=B.stateNode;h?L0(se,!0):L0(B.stateNode,!1)}catch(ge){qe(B,B.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,ho(e,r))));break;case 19:zt(s,e),Ut(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ho(e,l)));break;case 30:break;case 21:break;default:zt(s,e),Ut(e)}}function Ut(e){var s=e.flags;if(s&2){try{for(var r,l=e.return;l!==null;){if(Hg(l)){r=l;break}l=l.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var h=r.stateNode,g=dd(e);uo(e,g,h);break;case 5:var b=r.stateNode;r.flags&32&&(La(b,""),r.flags&=-33);var k=dd(e);uo(e,k,b);break;case 3:case 4:var B=r.stateNode.containerInfo,W=dd(e);hd(e,W,B);break;default:throw Error(i(161))}}catch(ae){qe(e,e.return,ae)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Qg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Qg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Jn(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Vg(e,s.alternate,s),s=s.sibling}function fa(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Ns(4,s,s.return),fa(s);break;case 1:An(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Lg(s,s.return,r),fa(s);break;case 27:Ai(s.stateNode);case 26:case 5:An(s,s.return),fa(s);break;case 22:s.memoizedState===null&&fa(s);break;case 30:fa(s);break;default:fa(s)}e=e.sibling}}function Zn(e,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=e,g=s,b=g.flags;switch(g.tag){case 0:case 11:case 15:Zn(h,g,r),xi(4,g);break;case 1:if(Zn(h,g,r),l=g,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){qe(l,l.return,W)}if(l=g,h=l.updateQueue,h!==null){var k=l.stateNode;try{var B=h.shared.hiddenCallbacks;if(B!==null)for(h.shared.hiddenCallbacks=null,h=0;h<B.length;h++)Em(B[h],k)}catch(W){qe(l,l.return,W)}}r&&b&64&&$g(g),yi(g,g.return);break;case 27:qg(g);case 26:case 5:Zn(h,g,r),r&&l===null&&b&4&&Bg(g),yi(g,g.return);break;case 12:Zn(h,g,r);break;case 31:Zn(h,g,r),r&&b&4&&Yg(h,g);break;case 13:Zn(h,g,r),r&&b&4&&Xg(h,g);break;case 22:g.memoizedState===null&&Zn(h,g,r),yi(g,g.return);break;case 30:break;default:Zn(h,g,r)}s=s.sibling}}function md(e,s){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&ai(r))}function gd(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&ai(e))}function mn(e,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Jg(e,s,r,l),s=s.sibling}function Jg(e,s,r,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:mn(e,s,r,l),h&2048&&xi(9,s);break;case 1:mn(e,s,r,l);break;case 3:mn(e,s,r,l),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&ai(e)));break;case 12:if(h&2048){mn(e,s,r,l),e=s.stateNode;try{var g=s.memoizedProps,b=g.id,k=g.onPostCommit;typeof k=="function"&&k(b,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){qe(s,s.return,B)}}else mn(e,s,r,l);break;case 31:mn(e,s,r,l);break;case 13:mn(e,s,r,l);break;case 23:break;case 22:g=s.stateNode,b=s.alternate,s.memoizedState!==null?g._visibility&2?mn(e,s,r,l):vi(e,s):g._visibility&2?mn(e,s,r,l):(g._visibility|=2,ar(e,s,r,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&md(b,s);break;case 24:mn(e,s,r,l),h&2048&&gd(s.alternate,s);break;default:mn(e,s,r,l)}}function ar(e,s,r,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=e,b=s,k=r,B=l,W=b.flags;switch(b.tag){case 0:case 11:case 15:ar(g,b,k,B,h),xi(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?ar(g,b,k,B,h):vi(g,b):(ae._visibility|=2,ar(g,b,k,B,h)),h&&W&2048&&md(b.alternate,b);break;case 24:ar(g,b,k,B,h),h&&W&2048&&gd(b.alternate,b);break;default:ar(g,b,k,B,h)}s=s.sibling}}function vi(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=e,l=s,h=l.flags;switch(l.tag){case 22:vi(r,l),h&2048&&md(l.alternate,l);break;case 24:vi(r,l),h&2048&&gd(l.alternate,l);break;default:vi(r,l)}s=s.sibling}}var bi=8192;function rr(e,s,r){if(e.subtreeFlags&bi)for(e=e.child;e!==null;)Zg(e,s,r),e=e.sibling}function Zg(e,s,r){switch(e.tag){case 26:rr(e,s,r),e.flags&bi&&e.memoizedState!==null&&o_(r,fn,e.memoizedState,e.memoizedProps);break;case 5:rr(e,s,r);break;case 3:case 4:var l=fn;fn=Eo(e.stateNode.containerInfo),rr(e,s,r),fn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=bi,bi=16777216,rr(e,s,r),bi=l):rr(e,s,r));break;default:rr(e,s,r)}}function Fg(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function wi(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];pt=l,e0(l,e)}Fg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wg(e),e=e.sibling}function Wg(e){switch(e.tag){case 0:case 11:case 15:wi(e),e.flags&2048&&Ns(9,e,e.return);break;case 3:wi(e);break;case 12:wi(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,fo(e)):wi(e);break;default:wi(e)}}function fo(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];pt=l,e0(l,e)}Fg(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Ns(8,s,s.return),fo(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,fo(s));break;default:fo(s)}e=e.sibling}}function e0(e,s){for(;pt!==null;){var r=pt;switch(r.tag){case 0:case 11:case 15:Ns(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ai(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,pt=l;else e:for(r=e;pt!==null;){l=pt;var h=l.sibling,g=l.return;if(Gg(l),l===r){pt=null;break e}if(h!==null){h.return=g,pt=h;break e}pt=g}}}var Sw={getCacheForType:function(e){var s=vt(it),r=s.data.get(e);return r===void 0&&(r=e(),s.data.set(e,r)),r},cacheSignal:function(){return vt(it).controller.signal}},jw=typeof WeakMap=="function"?WeakMap:Map,Be=0,Pe=null,ke=null,Re=0,He=0,Pt=null,Es=!1,ir=!1,pd=!1,Fn=0,et=0,As=0,ma=0,xd=0,Yt=0,lr=0,_i=null,$t=null,yd=!1,mo=0,t0=0,go=1/0,po=null,Ts=null,mt=0,Cs=null,or=null,Wn=0,vd=0,bd=null,n0=null,Si=0,wd=null;function Xt(){return(Be&2)!==0&&Re!==0?Re&-Re:T.T!==null?Ad():vl()}function s0(){if(Yt===0)if((Re&536870912)===0||ze){var e=Ra;Ra<<=1,(Ra&3932160)===0&&(Ra=262144),Yt=e}else Yt=536870912;return e=Vt.current,e!==null&&(e.flags|=32),Yt}function Lt(e,s,r){(e===Pe&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(cr(e,0),ks(e,Re,Yt,!1)),Qs(e,r),((Be&2)===0||e!==Pe)&&(e===Pe&&((Be&2)===0&&(ma|=r),et===4&&ks(e,Re,Yt,!1)),Tn(e))}function a0(e,s,r){if((Be&6)!==0)throw Error(i(327));var l=!r&&(s&127)===0&&(s&e.expiredLanes)===0||Ks(e,s),h=l?Aw(e,s):Sd(e,s,!0),g=l;do{if(h===0){ir&&!l&&ks(e,s,0,!1);break}else{if(r=e.current.alternate,g&&!Nw(r)){h=Sd(e,s,!1),g=!1;continue}if(h===2){if(g=s,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var k=e;h=_i;var B=k.current.memoizedState.isDehydrated;if(B&&(cr(k,b).flags|=256),b=Sd(k,b,!1),b!==2){if(pd&&!B){k.errorRecoveryDisabledLanes|=g,ma|=g,h=4;break e}g=$t,$t=h,g!==null&&($t===null?$t=g:$t.push.apply($t,g))}h=b}if(g=!1,h!==2)continue}}if(h===1){cr(e,0),ks(e,s,0,!0);break}e:{switch(l=e,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ks(l,s,Yt,!Es);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=mo+300-xt(),10<h)){if(ks(l,s,Yt,!Es),Da(l,0,!0)!==0)break e;Wn=s,l.timeoutHandle=z0(r0.bind(null,l,r,$t,po,yd,s,Yt,ma,lr,Es,g,"Throttled",-0,0),h);break e}r0(l,r,$t,po,yd,s,Yt,ma,lr,Es,g,null,-0,0)}}break}while(!0);Tn(e)}function r0(e,s,r,l,h,g,b,k,B,W,ae,ie,ee,se){if(e.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Zg(s,g,ie);var ge=(g&62914560)===g?mo-xt():(g&4194048)===g?t0-xt():0;if(ge=c_(ie,ge),ge!==null){Wn=g,e.cancelPendingCommit=ge(f0.bind(null,e,s,g,r,l,h,b,k,B,ae,ie,null,ee,se)),ks(e,g,b,!W);return}}f0(e,s,g,r,l,h,b,k,B)}function Nw(e){for(var s=e;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],g=h.getSnapshot;h=h.value;try{if(!qt(g(),h))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ks(e,s,r,l){s&=~xd,s&=~ma,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var h=s;0<h;){var g=31-Tt(h),b=1<<g;l[g]=-1,h&=~b}r!==0&&pl(e,r,s)}function xo(){return(Be&6)===0?(ji(0),!1):!0}function _d(){if(ke!==null){if(He===0)var e=ke.return;else e=ke,In=ra=null,Lu(e),Wa=null,ii=0,e=ke;for(;e!==null;)Ug(e.alternate,e),e=e.return;ke=null}}function cr(e,s){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Pw(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Wn=0,_d(),Pe=e,ke=r=Hn(e.current,null),Re=s,He=0,Pt=null,Es=!1,ir=Ks(e,s),pd=!1,lr=Yt=xd=ma=As=et=0,$t=_i=null,yd=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var h=31-Tt(l),g=1<<h;s|=e[h],l&=~g}return Fn=s,$l(),r}function i0(e,s){Te=null,T.H=mi,s===Fa||s===Pl?(s=_m(),He=3):s===Eu?(s=_m(),He=4):He=s===ed?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pt=s,ke===null&&(et=1,ro(e,nn(s,e.current)))}function l0(){var e=Vt.current;return e===null?!0:(Re&4194048)===Re?ln===null:(Re&62914560)===Re||(Re&536870912)!==0?e===ln:!1}function o0(){var e=T.H;return T.H=mi,e===null?mi:e}function c0(){var e=T.A;return T.A=Sw,e}function yo(){et=4,Es||(Re&4194048)!==Re&&Vt.current!==null||(ir=!0),(As&134217727)===0&&(ma&134217727)===0||Pe===null||ks(Pe,Re,Yt,!1)}function Sd(e,s,r){var l=Be;Be|=2;var h=o0(),g=c0();(Pe!==e||Re!==s)&&(po=null,cr(e,s)),s=!1;var b=et;e:do try{if(He!==0&&ke!==null){var k=ke,B=Pt;switch(He){case 8:_d(),b=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(s=!0);var W=He;if(He=0,Pt=null,ur(e,k,B,W),r&&ir){b=0;break e}break;default:W=He,He=0,Pt=null,ur(e,k,B,W)}}Ew(),b=et;break}catch(ae){i0(e,ae)}while(!0);return s&&e.shellSuspendCounter++,In=ra=null,Be=l,T.H=h,T.A=g,ke===null&&(Pe=null,Re=0,$l()),b}function Ew(){for(;ke!==null;)u0(ke)}function Aw(e,s){var r=Be;Be|=2;var l=o0(),h=c0();Pe!==e||Re!==s?(po=null,go=xt()+500,cr(e,s)):ir=Ks(e,s);e:do try{if(He!==0&&ke!==null){s=ke;var g=Pt;t:switch(He){case 1:He=0,Pt=null,ur(e,s,g,1);break;case 2:case 9:if(bm(g)){He=0,Pt=null,d0(s);break}s=function(){He!==2&&He!==9||Pe!==e||(He=7),Tn(e)},g.then(s,s);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:bm(g)?(He=0,Pt=null,d0(s)):(He=0,Pt=null,ur(e,s,g,7));break;case 5:var b=null;switch(ke.tag){case 26:b=ke.memoizedState;case 5:case 27:var k=ke;if(b?J0(b):k.stateNode.complete){He=0,Pt=null;var B=k.sibling;if(B!==null)ke=B;else{var W=k.return;W!==null?(ke=W,vo(W)):ke=null}break t}}He=0,Pt=null,ur(e,s,g,5);break;case 6:He=0,Pt=null,ur(e,s,g,6);break;case 8:_d(),et=6;break e;default:throw Error(i(462))}}Tw();break}catch(ae){i0(e,ae)}while(!0);return In=ra=null,T.H=l,T.A=h,Be=r,ke!==null?0:(Pe=null,Re=0,$l(),et)}function Tw(){for(;ke!==null&&!Gs();)u0(ke)}function u0(e){var s=Dg(e.alternate,e,Fn);e.memoizedProps=e.pendingProps,s===null?vo(e):ke=s}function d0(e){var s=e,r=s.alternate;switch(s.tag){case 15:case 0:s=Tg(r,s,s.pendingProps,s.type,void 0,Re);break;case 11:s=Tg(r,s,s.pendingProps,s.type.render,s.ref,Re);break;case 5:Lu(s);default:Ug(r,s),s=ke=cm(s,Fn),s=Dg(r,s,Fn)}e.memoizedProps=e.pendingProps,s===null?vo(e):ke=s}function ur(e,s,r,l){In=ra=null,Lu(s),Wa=null,ii=0;var h=s.return;try{if(pw(e,h,s,r,Re)){et=1,ro(e,nn(r,e.current)),ke=null;return}}catch(g){if(h!==null)throw ke=h,g;et=1,ro(e,nn(r,e.current)),ke=null;return}s.flags&32768?(ze||l===1?e=!0:ir||(Re&536870912)!==0?e=!1:(Es=e=!0,(l===2||l===9||l===3||l===6)&&(l=Vt.current,l!==null&&l.tag===13&&(l.flags|=16384))),h0(s,e)):vo(s)}function vo(e){var s=e;do{if((s.flags&32768)!==0){h0(s,Es);return}e=s.return;var r=vw(s.alternate,s,Fn);if(r!==null){ke=r;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=e}while(s!==null);et===0&&(et=5)}function h0(e,s){do{var r=bw(e.alternate,e);if(r!==null){r.flags&=32767,ke=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(e=e.sibling,e!==null)){ke=e;return}ke=e=r}while(e!==null);et=6,ke=null}function f0(e,s,r,l,h,g,b,k,B){e.cancelPendingCommit=null;do bo();while(mt!==0);if((Be&6)!==0)throw Error(i(327));if(s!==null){if(s===e.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=du,qc(e,r,g,b,k,B),e===Pe&&(ke=Pe=null,Re=0),or=s,Cs=e,Wn=r,vd=g,bd=h,n0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Rw(Ys,function(){return y0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=T.T,T.T=null,h=$.p,$.p=2,b=Be,Be|=4;try{ww(e,s,r)}finally{Be=b,$.p=h,T.T=l}}mt=1,m0(),g0(),p0()}}function m0(){if(mt===1){mt=0;var e=Cs,s=or,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=T.T,T.T=null;var l=$.p;$.p=2;var h=Be;Be|=4;try{Kg(s,e);var g=zd,b=em(e.containerInfo),k=g.focusedElem,B=g.selectionRange;if(b!==k&&k&&k.ownerDocument&&Wf(k.ownerDocument.documentElement,k)){if(B!==null&&iu(k)){var W=B.start,ae=B.end;if(ae===void 0&&(ae=W),"selectionStart"in k)k.selectionStart=W,k.selectionEnd=Math.min(ae,k.value.length);else{var ie=k.ownerDocument||document,ee=ie&&ie.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),ge=k.textContent.length,_e=Math.min(B.start,ge),Ge=B.end===void 0?_e:Math.min(B.end,ge);!se.extend&&_e>Ge&&(b=Ge,Ge=_e,_e=b);var K=Ff(k,_e),G=Ff(k,Ge);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var F=ie.createRange();F.setStart(K.node,K.offset),se.removeAllRanges(),_e>Ge?(se.addRange(F),se.extend(G.node,G.offset)):(F.setEnd(G.node,G.offset),se.addRange(F))}}}}for(ie=[],se=k;se=se.parentNode;)se.nodeType===1&&ie.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ie.length;k++){var re=ie[k];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ro=!!Dd,zd=Dd=null}finally{Be=h,$.p=l,T.T=r}}e.current=s,mt=2}}function g0(){if(mt===2){mt=0;var e=Cs,s=or,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=T.T,T.T=null;var l=$.p;$.p=2;var h=Be;Be|=4;try{Vg(e,s.alternate,s)}finally{Be=h,$.p=l,T.T=r}}mt=3}}function p0(){if(mt===4||mt===3){mt=0,Ps();var e=Cs,s=or,r=Wn,l=n0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?mt=5:(mt=0,or=Cs=null,x0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ts=null),Vr(r),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Xs,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=T.T,h=$.p,$.p=2,T.T=null;try{for(var g=e.onRecoverableError,b=0;b<l.length;b++){var k=l[b];g(k.value,{componentStack:k.stack})}}finally{T.T=s,$.p=h}}(Wn&3)!==0&&bo(),Tn(e),h=e.pendingLanes,(r&261930)!==0&&(h&42)!==0?e===wd?Si++:(Si=0,wd=e):Si=0,ji(0)}}function x0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,ai(s)))}function bo(){return m0(),g0(),p0(),y0()}function y0(){if(mt!==5)return!1;var e=Cs,s=vd;vd=0;var r=Vr(Wn),l=T.T,h=$.p;try{$.p=32>r?32:r,T.T=null,r=bd,bd=null;var g=Cs,b=Wn;if(mt=0,or=Cs=null,Wn=0,(Be&6)!==0)throw Error(i(331));var k=Be;if(Be|=4,Wg(g.current),Jg(g,g.current,b,r),Be=k,ji(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Xs,g)}catch{}return!0}finally{$.p=h,T.T=l,x0(e,s)}}function v0(e,s,r){s=nn(r,s),s=Wu(e.stateNode,s,2),e=_s(e,s,2),e!==null&&(Qs(e,2),Tn(e))}function qe(e,s,r){if(e.tag===3)v0(e,e,r);else for(;s!==null;){if(s.tag===3){v0(s,e,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ts===null||!Ts.has(l))){e=nn(r,e),r=bg(2),l=_s(s,r,2),l!==null&&(wg(r,l,s,e),Qs(l,2),Tn(l));break}}s=s.return}}function jd(e,s,r){var l=e.pingCache;if(l===null){l=e.pingCache=new jw;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(r)||(pd=!0,h.add(r),e=Cw.bind(null,e,s,r),s.then(e,e))}function Cw(e,s,r){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Pe===e&&(Re&r)===r&&(et===4||et===3&&(Re&62914560)===Re&&300>xt()-mo?(Be&2)===0&&cr(e,0):xd|=r,lr===Re&&(lr=0)),Tn(e)}function b0(e,s){s===0&&(s=gl()),e=na(e,s),e!==null&&(Qs(e,s),Tn(e))}function kw(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),b0(e,r)}function Ow(e,s){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),b0(e,r)}function Rw(e,s){return jt(e,s)}var wo=null,dr=null,Nd=!1,_o=!1,Ed=!1,Os=0;function Tn(e){e!==dr&&e.next===null&&(dr===null?wo=dr=e:dr=dr.next=e),_o=!0,Nd||(Nd=!0,Dw())}function ji(e,s){if(!Ed&&_o){Ed=!0;do for(var r=!1,l=wo;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var g=0;else{var b=l.suspendedLanes,k=l.pingedLanes;g=(1<<31-Tt(42|e)+1)-1,g&=h&~(b&~k),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,j0(l,g))}else g=Re,g=Da(l,l===Pe?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Ks(l,g)||(r=!0,j0(l,g));l=l.next}while(r);Ed=!1}}function Mw(){w0()}function w0(){_o=Nd=!1;var e=0;Os!==0&&Gw()&&(e=Os);for(var s=xt(),r=null,l=wo;l!==null;){var h=l.next,g=_0(l,s);g===0?(l.next=null,r===null?wo=h:r.next=h,h===null&&(dr=r)):(r=l,(e!==0||(g&3)!==0)&&(_o=!0)),l=h}mt!==0&&mt!==5||ji(e),Os!==0&&(Os=0)}function _0(e,s){for(var r=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-Tt(g),k=1<<b,B=h[b];B===-1?((k&r)===0||(k&l)!==0)&&(h[b]=Hc(k,s)):B<=s&&(e.expiredLanes|=k),g&=~k}if(s=Pe,r=Re,r=Da(e,e===s?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===s&&(He===2||He===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&kt(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Ks(e,r)){if(s=r&-r,s===e.callbackPriority)return s;switch(l!==null&&kt(l),Vr(r)){case 2:case 8:r=os;break;case 32:r=Ys;break;case 268435456:r=ka;break;default:r=Ys}return l=S0.bind(null,e),r=jt(r,l),e.callbackPriority=s,e.callbackNode=r,s}return l!==null&&l!==null&&kt(l),e.callbackPriority=2,e.callbackNode=null,2}function S0(e,s){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(bo()&&e.callbackNode!==r)return null;var l=Re;return l=Da(e,e===Pe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(a0(e,l,s),_0(e,xt()),e.callbackNode!=null&&e.callbackNode===r?S0.bind(null,e):null)}function j0(e,s){if(bo())return null;a0(e,s,!0)}function Dw(){Yw(function(){(Be&6)!==0?jt(Mn,Mw):w0()})}function Ad(){if(Os===0){var e=Ja;e===0&&(e=Oa,Oa<<=1,(Oa&261888)===0&&(Oa=256)),Os=e}return Os}function N0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cl(""+e)}function E0(e,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,e.id&&r.setAttribute("form",e.id),s.parentNode.insertBefore(r,s),e=new FormData(e),r.parentNode.removeChild(r),e}function zw(e,s,r,l,h){if(s==="submit"&&r&&r.stateNode===h){var g=N0((h[Nt]||null).action),b=l.submitter;b&&(s=(s=b[Nt]||null)?N0(s.formAction):b.getAttribute("formAction"),s!==null&&(g=s,b=null));var k=new Ml("action","action",null,l,h);e.push({event:k,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Os!==0){var B=b?E0(h,b):new FormData(h);Xu(r,{pending:!0,data:B,method:h.method,action:g},null,B)}}else typeof g=="function"&&(k.preventDefault(),B=b?E0(h,b):new FormData(h),Xu(r,{pending:!0,data:B,method:h.method,action:g},g,B))},currentTarget:h}]})}}for(var Td=0;Td<uu.length;Td++){var Cd=uu[Td],Uw=Cd.toLowerCase(),$w=Cd[0].toUpperCase()+Cd.slice(1);hn(Uw,"on"+$w)}hn(sm,"onAnimationEnd"),hn(am,"onAnimationIteration"),hn(rm,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(Wb,"onTransitionRun"),hn(ew,"onTransitionStart"),hn(tw,"onTransitionCancel"),hn(im,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ni));function A0(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],h=l.event;l=l.listeners;e:{var g=void 0;if(s)for(var b=l.length-1;0<=b;b--){var k=l[b],B=k.instance,W=k.currentTarget;if(k=k.listener,B!==g&&h.isPropagationStopped())break e;g=k,h.currentTarget=W;try{g(h)}catch(ae){Ul(ae)}h.currentTarget=null,g=B}else for(b=0;b<l.length;b++){if(k=l[b],B=k.instance,W=k.currentTarget,k=k.listener,B!==g&&h.isPropagationStopped())break e;g=k,h.currentTarget=W;try{g(h)}catch(ae){Ul(ae)}h.currentTarget=null,g=B}}}}function Oe(e,s){var r=s[za];r===void 0&&(r=s[za]=new Set);var l=e+"__bubble";r.has(l)||(T0(s,e,2,!1),r.add(l))}function kd(e,s,r){var l=0;s&&(l|=4),T0(r,e,l,s)}var So="_reactListening"+Math.random().toString(36).slice(2);function Od(e){if(!e[So]){e[So]=!0,Sl.forEach(function(r){r!=="selectionchange"&&(Lw.has(r)||kd(r,!1,e),kd(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[So]||(s[So]=!0,kd("selectionchange",!1,s))}}function T0(e,s,r,l){switch(sp(s)){case 2:var h=h_;break;case 8:h=f_;break;default:h=Yd}r=h.bind(null,s,r,e),h=void 0,!Zc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(s,r,{capture:!0,passive:h}):e.addEventListener(s,r,!0):h!==void 0?e.addEventListener(s,r,{passive:h}):e.addEventListener(s,r,!1)}function Rd(e,s,r,l,h){var g=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var k=l.stateNode.containerInfo;if(k===h)break;if(b===4)for(b=l.return;b!==null;){var B=b.tag;if((B===3||B===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;k!==null;){if(b=cs(k),b===null)return;if(B=b.tag,B===5||B===6||B===26||B===27){l=g=b;continue e}k=k.parentNode}}l=l.return}Mf(function(){var W=g,ae=Qc(r),ie=[];e:{var ee=lm.get(e);if(ee!==void 0){var se=Ml,ge=e;switch(e){case"keypress":if(Ol(r)===0)break e;case"keydown":case"keyup":se=Ob;break;case"focusin":ge="focus",se=tu;break;case"focusout":ge="blur",se=tu;break;case"beforeblur":case"afterblur":se=tu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Db;break;case sm:case am:case rm:se=_b;break;case im:se=Ub;break;case"scroll":case"scrollend":se=xb;break;case"wheel":se=Lb;break;case"copy":case"cut":case"paste":se=jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Lf;break;case"toggle":case"beforetoggle":se=Hb}var _e=(s&4)!==0,Ge=!_e&&(e==="scroll"||e==="scrollend"),K=_e?ee!==null?ee+"Capture":null:ee;_e=[];for(var G=W,F;G!==null;){var re=G;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||K===null||(re=Xr(G,K),re!=null&&_e.push(Ei(G,re,F))),Ge)break;G=G.return}0<_e.length&&(ee=new se(ee,ge,null,r,ae),ie.push({event:ee,listeners:_e}))}}if((s&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",ee&&r!==Kc&&(ge=r.relatedTarget||r.fromElement)&&(cs(ge)||ge[zn]))break e;if((se||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(ge=r.relatedTarget||r.toElement,se=W,ge=ge?cs(ge):null,ge!==null&&(Ge=u(ge),_e=ge.tag,ge!==Ge||_e!==5&&_e!==27&&_e!==6)&&(ge=null)):(se=null,ge=W),se!==ge)){if(_e=Uf,re="onMouseLeave",K="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Lf,re="onPointerLeave",K="onPointerEnter",G="pointer"),Ge=se==null?ee:ds(se),F=ge==null?ee:ds(ge),ee=new _e(re,G+"leave",se,r,ae),ee.target=Ge,ee.relatedTarget=F,re=null,cs(ae)===W&&(_e=new _e(K,G+"enter",ge,r,ae),_e.target=F,_e.relatedTarget=Ge,re=_e),Ge=re,se&&ge)t:{for(_e=Bw,K=se,G=ge,F=0,re=K;re;re=_e(re))F++;re=0;for(var we=G;we;we=_e(we))re++;for(;0<F-re;)K=_e(K),F--;for(;0<re-F;)G=_e(G),re--;for(;F--;){if(K===G||G!==null&&K===G.alternate){_e=K;break t}K=_e(K),G=_e(G)}_e=null}else _e=null;se!==null&&C0(ie,ee,se,_e,!1),ge!==null&&Ge!==null&&C0(ie,Ge,ge,_e,!0)}}e:{if(ee=W?ds(W):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var $e=Yf;else if(Gf(ee))if(Xf)$e=Jb;else{$e=Kb;var pe=Xb}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&Xc(W.elementType)&&($e=Yf):$e=Qb;if($e&&($e=$e(e,W))){Pf(ie,$e,r,ae);break e}pe&&pe(e,ee,W),e==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&Yr(ee,"number",ee.value)}switch(pe=W?ds(W):window,e){case"focusin":(Gf(pe)||pe.contentEditable==="true")&&(Ia=pe,lu=W,ti=null);break;case"focusout":ti=lu=Ia=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,tm(ie,r,ae);break;case"selectionchange":if(Fb)break;case"keydown":case"keyup":tm(ie,r,ae)}var Ce;if(su)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else qa?If(e,r)&&(Me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Me="onCompositionStart");Me&&(Bf&&r.locale!=="ko"&&(qa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&qa&&(Ce=Df()):(gs=ae,Fc="value"in gs?gs.value:gs.textContent,qa=!0)),pe=jo(W,Me),0<pe.length&&(Me=new $f(Me,e,null,r,ae),ie.push({event:Me,listeners:pe}),Ce?Me.data=Ce:(Ce=Vf(r),Ce!==null&&(Me.data=Ce)))),(Ce=Ib?Vb(e,r):Gb(e,r))&&(Me=jo(W,"onBeforeInput"),0<Me.length&&(pe=new $f("onBeforeInput","beforeinput",null,r,ae),ie.push({event:pe,listeners:Me}),pe.data=Ce)),zw(ie,e,W,r,ae)}A0(ie,s)})}function Ei(e,s,r){return{instance:e,listener:s,currentTarget:r}}function jo(e,s){for(var r=s+"Capture",l=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Xr(e,r),h!=null&&l.unshift(Ei(e,h,g)),h=Xr(e,s),h!=null&&l.push(Ei(e,h,g))),e.tag===3)return l;e=e.return}return[]}function Bw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function C0(e,s,r,l,h){for(var g=s._reactName,b=[];r!==null&&r!==l;){var k=r,B=k.alternate,W=k.stateNode;if(k=k.tag,B!==null&&B===l)break;k!==5&&k!==26&&k!==27||W===null||(B=W,h?(W=Xr(r,g),W!=null&&b.unshift(Ei(r,W,B))):h||(W=Xr(r,g),W!=null&&b.push(Ei(r,W,B)))),r=r.return}b.length!==0&&e.push({event:s,listeners:b})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function k0(e){return(typeof e=="string"?e:""+e).replace(Hw,`
`).replace(qw,"")}function O0(e,s){return s=k0(s),k0(e)===s}function Ve(e,s,r,l,h,g){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||La(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&La(e,""+l);break;case"className":$a(e,"class",l);break;case"tabIndex":$a(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$a(e,r,l);break;case"style":Of(e,l,g);break;case"data":if(s!=="object"){$a(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Cl(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(s!=="input"&&Ve(e,s,"name",h.name,h,null),Ve(e,s,"formEncType",h.formEncType,h,null),Ve(e,s,"formMethod",h.formMethod,h,null),Ve(e,s,"formTarget",h.formTarget,h,null)):(Ve(e,s,"encType",h.encType,h,null),Ve(e,s,"method",h.method,h,null),Ve(e,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Cl(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Ln);break;case"onScroll":l!=null&&Oe("scroll",e);break;case"onScrollEnd":l!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Cl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),Ua(e,"popover",l);break;case"xlinkActuate":dn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":dn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":dn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":dn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":dn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":dn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":dn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":dn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":dn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ua(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=gb.get(r)||r,Ua(e,r,l))}}function Md(e,s,r,l,h,g){switch(r){case"style":Of(e,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof l=="string"?La(e,l):(typeof l=="number"||typeof l=="bigint")&&La(e,""+l);break;case"onScroll":l!=null&&Oe("scroll",e);break;case"onScrollEnd":l!=null&&Oe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),s=r.slice(2,h?r.length-7:void 0),g=e[Nt]||null,g=g!=null?g[r]:null,typeof g=="function"&&e.removeEventListener(s,g,h),typeof l=="function")){typeof g!="function"&&g!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(s,l,h);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Ua(e,r,l)}}}function wt(e,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var l=!1,h=!1,g;for(g in r)if(r.hasOwnProperty(g)){var b=r[g];if(b!=null)switch(g){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ve(e,s,g,b,r,null)}}h&&Ve(e,s,"srcSet",r.srcSet,r,null),l&&Ve(e,s,"src",r.src,r,null);return;case"input":Oe("invalid",e);var k=g=b=h=null,B=null,W=null;for(l in r)if(r.hasOwnProperty(l)){var ae=r[l];if(ae!=null)switch(l){case"name":h=ae;break;case"type":b=ae;break;case"checked":B=ae;break;case"defaultChecked":W=ae;break;case"value":g=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,s));break;default:Ve(e,s,l,ae,r,null)}}Tl(e,g,k,B,W,b,h,!1);return;case"select":Oe("invalid",e),l=b=g=null;for(h in r)if(r.hasOwnProperty(h)&&(k=r[h],k!=null))switch(h){case"value":g=k;break;case"defaultValue":b=k;break;case"multiple":l=k;default:Ve(e,s,h,k,r,null)}s=g,r=b,e.multiple=!!l,s!=null?$n(e,!!l,s,!1):r!=null&&$n(e,!!l,r,!0);return;case"textarea":Oe("invalid",e),g=h=l=null;for(b in r)if(r.hasOwnProperty(b)&&(k=r[b],k!=null))switch(b){case"value":l=k;break;case"defaultValue":h=k;break;case"children":g=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Ve(e,s,b,k,r,null)}Cf(e,l,h,g);return;case"option":for(B in r)if(r.hasOwnProperty(B)&&(l=r[B],l!=null))switch(B){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(e,s,B,l,r,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(l=0;l<Ni.length;l++)Oe(Ni[l],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(l=r[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ve(e,s,W,l,r,null)}return;default:if(Xc(s)){for(ae in r)r.hasOwnProperty(ae)&&(l=r[ae],l!==void 0&&Md(e,s,ae,l,r,void 0));return}}for(k in r)r.hasOwnProperty(k)&&(l=r[k],l!=null&&Ve(e,s,k,l,r,null))}function Iw(e,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,b=null,k=null,B=null,W=null,ae=null;for(se in r){var ie=r[se];if(r.hasOwnProperty(se)&&ie!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=ie;default:l.hasOwnProperty(se)||Ve(e,s,se,null,l,ie)}}for(var ee in l){var se=l[ee];if(ie=r[ee],l.hasOwnProperty(ee)&&(se!=null||ie!=null))switch(ee){case"type":g=se;break;case"name":h=se;break;case"checked":W=se;break;case"defaultChecked":ae=se;break;case"value":b=se;break;case"defaultValue":k=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:se!==ie&&Ve(e,s,ee,se,l,ie)}}Fs(e,b,k,B,W,ae,g,h);return;case"select":se=b=k=ee=null;for(g in r)if(B=r[g],r.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":se=B;default:l.hasOwnProperty(g)||Ve(e,s,g,null,l,B)}for(h in l)if(g=l[h],B=r[h],l.hasOwnProperty(h)&&(g!=null||B!=null))switch(h){case"value":ee=g;break;case"defaultValue":k=g;break;case"multiple":b=g;default:g!==B&&Ve(e,s,h,g,l,B)}s=k,r=b,l=se,ee!=null?$n(e,!!r,ee,!1):!!l!=!!r&&(s!=null?$n(e,!!r,s,!0):$n(e,!!r,r?[]:"",!1));return;case"textarea":se=ee=null;for(k in r)if(h=r[k],r.hasOwnProperty(k)&&h!=null&&!l.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Ve(e,s,k,null,l,h)}for(b in l)if(h=l[b],g=r[b],l.hasOwnProperty(b)&&(h!=null||g!=null))switch(b){case"value":ee=h;break;case"defaultValue":se=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&Ve(e,s,b,h,l,g)}Tf(e,ee,se);return;case"option":for(var ge in r)if(ee=r[ge],r.hasOwnProperty(ge)&&ee!=null&&!l.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Ve(e,s,ge,null,l,ee)}for(B in l)if(ee=l[B],se=r[B],l.hasOwnProperty(B)&&ee!==se&&(ee!=null||se!=null))switch(B){case"selected":e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Ve(e,s,B,ee,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in r)ee=r[_e],r.hasOwnProperty(_e)&&ee!=null&&!l.hasOwnProperty(_e)&&Ve(e,s,_e,null,l,ee);for(W in l)if(ee=l[W],se=r[W],l.hasOwnProperty(W)&&ee!==se&&(ee!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:Ve(e,s,W,ee,l,se)}return;default:if(Xc(s)){for(var Ge in r)ee=r[Ge],r.hasOwnProperty(Ge)&&ee!==void 0&&!l.hasOwnProperty(Ge)&&Md(e,s,Ge,void 0,l,ee);for(ae in l)ee=l[ae],se=r[ae],!l.hasOwnProperty(ae)||ee===se||ee===void 0&&se===void 0||Md(e,s,ae,ee,l,se);return}}for(var K in r)ee=r[K],r.hasOwnProperty(K)&&ee!=null&&!l.hasOwnProperty(K)&&Ve(e,s,K,null,l,ee);for(ie in l)ee=l[ie],se=r[ie],!l.hasOwnProperty(ie)||ee===se||ee==null&&se==null||Ve(e,s,ie,ee,l,se)}function R0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],g=h.transferSize,b=h.initiatorType,k=h.duration;if(g&&k&&R0(b)){for(b=0,k=h.responseEnd,l+=1;l<r.length;l++){var B=r[l],W=B.startTime;if(W>k)break;var ae=B.transferSize,ie=B.initiatorType;ae&&R0(ie)&&(B=B.responseEnd,b+=ae*(B<k?1:(k-W)/(B-W)))}if(--l,s+=8*(g+b)/(h.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dd=null,zd=null;function No(e){return e.nodeType===9?e:e.ownerDocument}function M0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D0(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Ud(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $d=null;function Gw(){var e=window.event;return e&&e.type==="popstate"?e===$d?!1:($d=e,!0):($d=null,!1)}var z0=typeof setTimeout=="function"?setTimeout:void 0,Pw=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(e){return U0.resolve(null).then(e).catch(Xw)}:z0;function Xw(e){setTimeout(function(){throw e})}function Rs(e){return e==="head"}function $0(e,s){var r=s,l=0;do{var h=r.nextSibling;if(e.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(h),gr(s);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Ai(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Ai(r);for(var g=r.firstChild;g;){var b=g.nextSibling,k=g.nodeName;g[Js]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=b}}else r==="body"&&Ai(e.ownerDocument.body);r=h}while(r);gr(s)}function L0(e,s){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function Ld(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ld(r),Gr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Kw(e,s,r,l){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Js])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=on(e.nextSibling),e===null)break}return null}function Qw(e,s,r){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=on(e.nextSibling),e===null))return null;return e}function B0(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=on(e.nextSibling),e===null))return null;return e}function Bd(e){return e.data==="$?"||e.data==="$~"}function Hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jw(e,s){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||r.readyState!=="loading")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function on(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var qd=null;function H0(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(s===0)return on(e.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}e=e.nextSibling}return null}function q0(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return e;s--}else r!=="/$"&&r!=="/&"||s++}e=e.previousSibling}return null}function I0(e,s,r){switch(s=No(r),e){case"html":if(e=s.documentElement,!e)throw Error(i(452));return e;case"head":if(e=s.head,!e)throw Error(i(453));return e;case"body":if(e=s.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ai(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Gr(e)}var cn=new Map,V0=new Set;function Eo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var es=$.d;$.d={f:Zw,r:Fw,D:Ww,C:e_,L:t_,m:n_,X:a_,S:s_,M:r_};function Zw(){var e=es.f(),s=xo();return e||s}function Fw(e){var s=us(e);s!==null&&s.tag===5&&s.type==="form"?ig(s):es.r(e)}var hr=typeof document>"u"?null:document;function G0(e,s,r){var l=hr;if(l&&typeof s=="string"&&s){var h=Rt(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),V0.has(h)||(V0.add(h),e={rel:e,crossOrigin:r,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),wt(s,"link",e),rt(s),l.head.appendChild(s)))}}function Ww(e){es.D(e),G0("dns-prefetch",e,null)}function e_(e,s){es.C(e,s),G0("preconnect",e,s)}function t_(e,s,r){es.L(e,s,r);var l=hr;if(l&&e&&s){var h='link[rel="preload"][as="'+Rt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Rt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Rt(r.imageSizes)+'"]')):h+='[href="'+Rt(e)+'"]';var g=h;switch(s){case"style":g=fr(e);break;case"script":g=mr(e)}cn.has(g)||(e=x({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:e,as:s},r),cn.set(g,e),l.querySelector(h)!==null||s==="style"&&l.querySelector(Ti(g))||s==="script"&&l.querySelector(Ci(g))||(s=l.createElement("link"),wt(s,"link",e),rt(s),l.head.appendChild(s)))}}function n_(e,s){es.m(e,s);var r=hr;if(r&&e){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Rt(l)+'"][href="'+Rt(e)+'"]',g=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=mr(e)}if(!cn.has(g)&&(e=x({rel:"modulepreload",href:e},s),cn.set(g,e),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ci(g)))return}l=r.createElement("link"),wt(l,"link",e),rt(l),r.head.appendChild(l)}}}function s_(e,s,r){es.S(e,s,r);var l=hr;if(l&&e){var h=hs(l).hoistableStyles,g=fr(e);s=s||"default";var b=h.get(g);if(!b){var k={loading:0,preload:null};if(b=l.querySelector(Ti(g)))k.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":s},r),(r=cn.get(g))&&Id(e,r);var B=b=l.createElement("link");rt(B),wt(B,"link",e),B._p=new Promise(function(W,ae){B.onload=W,B.onerror=ae}),B.addEventListener("load",function(){k.loading|=1}),B.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Ao(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:k},h.set(g,b)}}}function a_(e,s){es.X(e,s);var r=hr;if(r&&e){var l=hs(r).hoistableScripts,h=mr(e),g=l.get(h);g||(g=r.querySelector(Ci(h)),g||(e=x({src:e,async:!0},s),(s=cn.get(h))&&Vd(e,s),g=r.createElement("script"),rt(g),wt(g,"link",e),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function r_(e,s){es.M(e,s);var r=hr;if(r&&e){var l=hs(r).hoistableScripts,h=mr(e),g=l.get(h);g||(g=r.querySelector(Ci(h)),g||(e=x({src:e,async:!0,type:"module"},s),(s=cn.get(h))&&Vd(e,s),g=r.createElement("script"),rt(g),wt(g,"link",e),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function P0(e,s,r,l){var h=(h=oe.current)?Eo(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=fr(r.href),r=hs(h).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=fr(r.href);var g=hs(h).hoistableStyles,b=g.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=h.querySelector(Ti(e)))&&!g._p&&(b.instance=g,b.state.loading=5),cn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},cn.set(e,r),g||i_(h,e,r,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=mr(r),r=hs(h).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function fr(e){return'href="'+Rt(e)+'"'}function Ti(e){return'link[rel="stylesheet"]['+e+"]"}function Y0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function i_(e,s,r,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),wt(s,"link",r),rt(s),e.head.appendChild(s))}function mr(e){return'[src="'+Rt(e)+'"]'}function Ci(e){return"script[async]"+e}function X0(e,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Rt(r.href)+'"]');if(l)return s.instance=l,rt(l),l;var h=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),wt(l,"style",h),Ao(l,r.precedence,e),s.instance=l;case"stylesheet":h=fr(r.href);var g=e.querySelector(Ti(h));if(g)return s.state.loading|=4,s.instance=g,rt(g),g;l=Y0(r),(h=cn.get(h))&&Id(l,h),g=(e.ownerDocument||e).createElement("link"),rt(g);var b=g;return b._p=new Promise(function(k,B){b.onload=k,b.onerror=B}),wt(g,"link",l),s.state.loading|=4,Ao(g,r.precedence,e),s.instance=g;case"script":return g=mr(r.src),(h=e.querySelector(Ci(g)))?(s.instance=h,rt(h),h):(l=r,(h=cn.get(g))&&(l=x({},r),Vd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),rt(h),wt(h,"link",l),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Ao(l,r.precedence,e));return s.instance}function Ao(e,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,g=h,b=0;b<l.length;b++){var k=l[b];if(k.dataset.precedence===s)g=k;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(e,s.firstChild))}function Id(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Vd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var To=null;function K0(e,s,r){if(To===null){var l=new Map,h=To=new Map;h.set(r,l)}else h=To,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var g=r[h];if(!(g[Js]||g[ft]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(s)||"";b=e+b;var k=l.get(b);k?k.push(g):l.set(b,[g])}}return l}function Q0(e,s,r){e=e.ownerDocument||e,e.head.insertBefore(r,s==="title"?e.querySelector("head > title"):null)}function l_(e,s,r){if(r===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function J0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function o_(e,s,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=fr(l.href),g=s.querySelector(Ti(h));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=Co.bind(e),s.then(e,e)),r.state.loading|=4,r.instance=g,rt(g);return}g=s.ownerDocument||s,l=Y0(l),(h=cn.get(h))&&Id(l,h),g=g.createElement("link"),rt(g);var b=g;b._p=new Promise(function(k,B){b.onload=k,b.onerror=B}),wt(g,"link",l),r.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Co.bind(e),s.addEventListener("load",r),s.addEventListener("error",r))}}var Gd=0;function c_(e,s){return e.stylesheets&&e.count===0&&Oo(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Oo(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+s);0<e.imgBytes&&Gd===0&&(Gd=62500*Vw());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Oo(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Gd?50:800)+s);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Co(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ko=null;function Oo(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ko=new Map,s.forEach(u_,e),ko=null,Co.call(e))}function u_(e,s){if(!(s.state.loading&4)){var r=ko.get(e);if(r)var l=r.get(null);else{r=new Map,ko.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var b=h[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),l=b)}l&&r.set(null,l)}h=s.instance,b=h.getAttribute("data-precedence"),g=r.get(b)||l,g===l&&r.set(null,h),r.set(b,h),this.count++,l=Co.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var ki={$$typeof:j,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function d_(e,s,r,l,h,g,b,k,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Z0(e,s,r,l,h,g,b,k,B,W,ae,ie){return e=new d_(e,s,r,b,B,W,ae,ie,k),s=1,g===!0&&(s|=24),g=It(3,null,null,s),e.current=g,g.stateNode=e,s=Su(),s.refCount++,e.pooledCache=s,s.refCount++,g.memoizedState={element:l,isDehydrated:r,cache:s},Au(g),e}function F0(e){return e?(e=Pa,e):Pa}function W0(e,s,r,l,h,g){h=F0(h),l.context===null?l.context=h:l.pendingContext=h,l=ws(s),l.payload={element:r},g=g===void 0?null:g,g!==null&&(l.callback=g),r=_s(e,l,s),r!==null&&(Lt(r,e,s),oi(r,e,s))}function ep(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Pd(e,s){ep(e,s),(e=e.alternate)&&ep(e,s)}function tp(e){if(e.tag===13||e.tag===31){var s=na(e,67108864);s!==null&&Lt(s,e,67108864),Pd(e,67108864)}}function np(e){if(e.tag===13||e.tag===31){var s=Xt();s=Ir(s);var r=na(e,s);r!==null&&Lt(r,e,s),Pd(e,s)}}var Ro=!0;function h_(e,s,r,l){var h=T.T;T.T=null;var g=$.p;try{$.p=2,Yd(e,s,r,l)}finally{$.p=g,T.T=h}}function f_(e,s,r,l){var h=T.T;T.T=null;var g=$.p;try{$.p=8,Yd(e,s,r,l)}finally{$.p=g,T.T=h}}function Yd(e,s,r,l){if(Ro){var h=Xd(l);if(h===null)Rd(e,s,l,Mo,r),ap(e,l);else if(g_(h,e,s,r,l))l.stopPropagation();else if(ap(e,l),s&4&&-1<m_.indexOf(e)){for(;h!==null;){var g=us(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Dn(g.pendingLanes);if(b!==0){var k=g;for(k.pendingLanes|=2,k.entangledLanes|=2;b;){var B=1<<31-Tt(b);k.entanglements[1]|=B,b&=~B}Tn(g),(Be&6)===0&&(go=xt()+500,ji(0))}}break;case 31:case 13:k=na(g,2),k!==null&&Lt(k,g,2),xo(),Pd(g,2)}if(g=Xd(l),g===null&&Rd(e,s,l,Mo,r),g===h)break;h=g}h!==null&&l.stopPropagation()}else Rd(e,s,l,null,r)}}function Xd(e){return e=Qc(e),Kd(e)}var Mo=null;function Kd(e){if(Mo=null,e=cs(e),e!==null){var s=u(e);if(s===null)e=null;else{var r=s.tag;if(r===13){if(e=d(s),e!==null)return e;e=null}else if(r===31){if(e=f(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Mo=e,null}function sp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Mn:return 2;case os:return 8;case Ys:case Dc:return 32;case ka:return 268435456;default:return 32}default:return 32}}var Qd=!1,Ms=null,Ds=null,zs=null,Oi=new Map,Ri=new Map,Us=[],m_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ap(e,s){switch(e){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Oi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(s.pointerId)}}function Mi(e,s,r,l,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:g,targetContainers:[h]},s!==null&&(s=us(s),s!==null&&tp(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function g_(e,s,r,l,h){switch(s){case"focusin":return Ms=Mi(Ms,e,s,r,l,h),!0;case"dragenter":return Ds=Mi(Ds,e,s,r,l,h),!0;case"mouseover":return zs=Mi(zs,e,s,r,l,h),!0;case"pointerover":var g=h.pointerId;return Oi.set(g,Mi(Oi.get(g)||null,e,s,r,l,h)),!0;case"gotpointercapture":return g=h.pointerId,Ri.set(g,Mi(Ri.get(g)||null,e,s,r,l,h)),!0}return!1}function rp(e){var s=cs(e.target);if(s!==null){var r=u(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){e.blockedOn=s,bl(e.priority,function(){np(r)});return}}else if(s===31){if(s=f(r),s!==null){e.blockedOn=s,bl(e.priority,function(){np(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Do(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Xd(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Kc=l,r.target.dispatchEvent(l),Kc=null}else return s=us(r),s!==null&&tp(s),e.blockedOn=r,!1;s.shift()}return!0}function ip(e,s,r){Do(e)&&r.delete(s)}function p_(){Qd=!1,Ms!==null&&Do(Ms)&&(Ms=null),Ds!==null&&Do(Ds)&&(Ds=null),zs!==null&&Do(zs)&&(zs=null),Oi.forEach(ip),Ri.forEach(ip)}function zo(e,s){e.blockedOn===s&&(e.blockedOn=null,Qd||(Qd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p_)))}var Uo=null;function lp(e){Uo!==e&&(Uo=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Uo===e&&(Uo=null);for(var s=0;s<e.length;s+=3){var r=e[s],l=e[s+1],h=e[s+2];if(typeof l!="function"){if(Kd(l||r)===null)continue;break}var g=us(r);g!==null&&(e.splice(s,3),s-=3,Xu(g,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function gr(e){function s(B){return zo(B,e)}Ms!==null&&zo(Ms,e),Ds!==null&&zo(Ds,e),zs!==null&&zo(zs,e),Oi.forEach(s),Ri.forEach(s);for(var r=0;r<Us.length;r++){var l=Us[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Us.length&&(r=Us[0],r.blockedOn===null);)rp(r),r.blockedOn===null&&Us.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],g=r[l+1],b=h[Nt]||null;if(typeof g=="function")b||lp(r);else if(b){var k=null;if(g&&g.hasAttribute("formAction")){if(h=g,b=g[Nt]||null)k=b.formAction;else if(Kd(h)!==null)continue}else k=b.action;typeof k=="function"?r[l+1]=k:(r.splice(l,3),l-=3),lp(r)}}}function op(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return h=b})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function Jd(e){this._internalRoot=e}$o.prototype.render=Jd.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,l=Xt();W0(r,l,e,s,null,null)},$o.prototype.unmount=Jd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;W0(e.current,2,null,e,null,null),xo(),s[zn]=null}};function $o(e){this._internalRoot=e}$o.prototype.unstable_scheduleHydration=function(e){if(e){var s=vl();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Us.length&&s!==0&&s<Us[r].priority;r++);Us.splice(r,0,e),r===0&&rp(e)}};var cp=n.version;if(cp!=="19.2.3")throw Error(i(527,cp,"19.2.3"));$.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(s),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var x_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Xs=Lo.inject(x_),At=Lo}catch{}}return zi.createRoot=function(e,s){if(!o(e))throw Error(i(299));var r=!1,l="",h=pg,g=xg,b=yg;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=Z0(e,1,!1,null,null,r,l,null,h,g,b,op),e[zn]=s.current,Od(e),new Jd(s)},zi.hydrateRoot=function(e,s,r){if(!o(e))throw Error(i(299));var l=!1,h="",g=pg,b=xg,k=yg,B=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(k=r.onRecoverableError),r.formState!==void 0&&(B=r.formState)),s=Z0(e,1,!0,s,r??null,l,h,B,g,b,k,op),s.context=F0(null),r=s.current,l=Xt(),l=Ir(l),h=ws(l),h.callback=null,_s(r,h,l),r=l,s.current.lanes=r,Qs(s,r),Tn(s),e[zn]=s.current,Od(e),new $o(s)},zi.version="19.2.3",zi}var vp;function E_(){if(vp)return Wd.exports;vp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Wd.exports=N_(),Wd.exports}var A_=E_();const T_=sf(A_),C_=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 7.5h-.75A2.25 2.25 0 004.5 9.75v7.5a2.25 2.25 0 002.25 2.25h7.5a2.25 2.25 0 002.25-2.25v-7.5a2.25 2.25 0 00-2.25-2.25h-.75m0-3l-3-3m0 0l-3 3m3-3v11.25m6-2.25h.75a2.25 2.25 0 012.25 2.25v7.5a2.25 2.25 0 01-2.25 2.25h-7.5a2.25 2.25 0 01-2.25-2.25v-.75"})}),iy=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),k_=t=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[c.jsx("path",{d:"M19.5 3h-15A1.5 1.5 0 003 4.5v15A1.5 1.5 0 004.5 21h15a1.5 1.5 0 001.5-1.5v-15A1.5 1.5 0 0019.5 3zm-1.5 12h-3.75l-.75 3h-1.5l-.75-3H7.5v-1.5h3.75l.75-3h1.5l.75 3H18v1.5zm-4.5-6h-3V7.5h3V9z"}),c.jsx("path",{d:"M7 14.5l1.5 1.5 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),bp=`
CUSTOMER SUCCESS AGREEMENT

Company: Acme Corporation
Contract Period: January 1, 2025 to December 31, 2025
Annual Value: $120,000

Pricing & Commercials:
1. Enterprise Platform License: 500 seats @ $15/seat/month = $90,000/yr
2. Premium Support Package: Flat fee $20,000/yr.
3. Onboarding & Training Services: $10,000 one-time fee.
Total Contract Value: $120,000. Payment Terms: Net 30.

Products and Services Entitlements:
- Enterprise Platform: 500 user licenses. Access to all modules. Start: 2025-01-01, End: 2025-12-31. Dependency: SSO Configuration.
- Premium Support: 24/7 phone/email, 1hr response time. Start: 2025-01-01, End: 2025-12-31.
- Training Sessions: 10 instructor-led sessions (virtual). Start: 2025-01-01, End: 2025-03-31. Dependency: User roster.

Stakeholders:
- John Smith, CTO, john.smith@acme.com. Role: Executive Sponsor. Dept: Engineering. Responsibilities: Final sign-off, budget approval. Approval Required: Yes.
- Sarah Johnson, VP of Customer Success, sarah.j@acme.com. Role: Primary Contact. Dept: Operations. Responsibilities: Implementation lead, weekly syncs. Approval Required: No.
- Mike Chen, IT Director, mike.c@acme.com. Role: Technical Lead. Dept: IT. Responsibilities: SSO setup, API integration. Approval Required: No.

Technical Requirements:
1. SSO Integration (SAML 2.0) with Okta. Priority: High. Owner: Mike Chen. Status: Pending. Due: 2025-01-15.
2. Data Migration from Salesforce. Priority: High. Owner: Sarah Johnson. Status: Not Started. Due: 2025-01-20.
3. Firewall allowlisting for API access. Priority: Medium. Owner: IT Security. Status: Pending. Due: 2025-01-10.

Terms:
- 99.9% uptime SLA guarantee
- Quarterly Business Reviews included
- 30-day termination notice required
- Auto-renewal with 60-day cancellation notice
`,wp=`
DOCUSIGN ENVELOPE ID: 8923-2342-2342-2342
STATUS: COMPLETED
DATE: February 10, 2025

MASTER SERVICES AGREEMENT (Globex)

This Master Services Agreement ("Agreement") is entered into as of February 10, 2025 ("Effective Date") by and between:
Provider: CSCX.AI Solutions Inc.
Customer: Globex Corporation

1. SERVICES & SUBSCRIPTION
- Cloud Enterprise License: 1,500 Seats.
- Term: 36 Months.
- Start Date: March 1, 2025.
- End Date: February 28, 2028.

2. FINANCIAL TERMS
- Annual Recurring Revenue (ARR): $450,000.
- Implementation Fee: $25,000 (One-time).
- Payment Terms: Net 45.
- Total Contract Value (3 Years): $1,375,000.

3. SERVICE LEVEL AGREEMENT (SLA)
- 99.99% Availability.
- Priority 1 Support Response: 30 minutes.
- Critical Bug Fix: 4 hours.

4. STAKEHOLDERS & SIGNERS
- Hank Scorpio, CEO (h.scorpio@globex.com). Role: Executive Sponsor. Dept: Executive. Responsibilities: Budget Sign-off. Approval Required: Yes.
- Waylon Smithers, CIO (w.smithers@globex.com). Role: Technical Lead. Dept: IT. Responsibilities: Security Review, SSO. Approval Required: No.
- Montgomery Burns, CFO (m.burns@globex.com). Role: Billing Contact. Dept: Finance. Responsibilities: Procurement. Approval Required: Yes.

5. TECHNICAL REQUIREMENTS
- SSO Integration via Okta. Priority: High. Owner: Waylon Smithers. Due: 2025-02-25.
- Data Residency: EU Region (Frankfurt). Priority: High. Owner: Cloud Ops. Due: 2025-03-01.
- Audit Logs API Access required. Priority: Medium. Owner: Security Team. Due: 2025-03-15.

6. MILESTONES
- Kickoff Meeting: 2025-02-15. Agent: Onboarding Agent.
- Provisioning Complete: 2025-02-28. Agent: Provisioning Agent.
- Go-Live: 2025-03-01. Agent: Success Agent.

Signed via DocuSign
x_Hank Scorpio_______ 2025-02-10
x_CSCX CEO___________ 2025-02-10
`,O_=({onUpload:t})=>{const[n,a]=M.useState(!1),[i,o]=M.useState("sample"),[u,d]=M.useState(!1),[f,m]=M.useState(!1),[p]=M.useState([{id:"ENV-001",subject:"MSA - Globex Corporation",status:"Completed",date:"Feb 10, 2025"},{id:"ENV-002",subject:"NDA - Hooli Inc",status:"Completed",date:"Feb 08, 2025"},{id:"ENV-003",subject:"Service Order - Stark Ind",status:"Voided",date:"Jan 20, 2025"}]),[y,x]=M.useState(""),[v,w]=M.useState(null),_=M.useRef(null),A=D=>{var L;const z=(L=D.target.files)==null?void 0:L[0];if(!z)return;const R=new FileReader;if(z.type==="text/plain"){R.onload=()=>{x(R.result),o("paste"),a(!0)},R.readAsText(z);return}R.onload=()=>{const I=R.result,Q=I.split(",")[1];w({file:z,base64:Q,previewUrl:I}),o("file"),a(!0)},R.readAsDataURL(z)},E=()=>{o("sample"),a(!0)},S=()=>{m(!0),setTimeout(()=>{m(!1),d(!0)},1500)},N=D=>{D.status==="Completed"&&(o("docusign"),a(!0))},j=()=>{let D;i==="file"&&v?D={type:"file",content:v.base64,mimeType:v.file.type,fileName:v.file.name}:i==="paste"?D={type:"text",content:y,fileName:"Manual Entry"}:i==="docusign"?D={type:"text",content:wp,fileName:"MSA - Globex Corp.pdf (DocuSign)"}:D={type:"text",content:bp,fileName:"Sample Contract"},t(D)},C=()=>{if(i==="sample")return c.jsx("div",{className:"whitespace-pre-wrap text-cscx-gray-300 font-mono text-sm",children:bp});if(i==="paste")return c.jsx("div",{className:"whitespace-pre-wrap text-cscx-gray-300 font-mono text-sm",children:y||"No text entered."});if(i==="docusign")return c.jsxs("div",{className:"bg-white p-8 text-black font-serif text-sm min-h-full rounded relative",children:[c.jsx("div",{className:"absolute top-2 right-2 border-2 border-blue-600 text-blue-600 font-bold text-xs px-2 py-1 transform -rotate-12 opacity-70",children:"SIGNED VIA DOCUSIGN"}),c.jsx("div",{className:"whitespace-pre-wrap",children:wp})]});if(i==="file"&&v){if(v.file.type.includes("image"))return c.jsx("div",{className:"bg-white p-4 rounded",children:c.jsx("img",{src:v.previewUrl,alt:"Contract Preview",className:"max-w-full h-auto rounded"})});if(v.file.type==="application/pdf"){const D=(v.file.size/1048576).toFixed(2);return c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-8 text-center",children:[c.jsx("div",{className:"w-20 h-20 mx-auto bg-cscx-accent/20 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{className:"w-10 h-10 text-cscx-accent",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10.92,12.31C10.68,11.54 10.15,9.08 11.55,9.04C12.95,9 12.03,12.16 12.03,12.16C12.42,13.65 14.05,14.72 14.05,14.72C14.55,14.57 17.4,14.24 17,15.72C16.57,17.2 13.5,15.81 13.5,15.81C11.55,15.95 10.09,16.47 10.09,16.47C8.96,18.58 7.64,19.5 7.1,18.61C6.43,17.5 9.23,16.07 9.23,16.07C10.68,13.72 10.92,12.31 10.92,12.31Z"})})}),c.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:v.file.name}),c.jsxs("p",{className:"text-cscx-gray-400 mb-4",children:["PDF Document  ",D," MB"]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-cscx-success",children:[c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c.jsx("span",{children:"Ready for AI extraction"})]}),c.jsx("p",{className:"text-xs text-cscx-gray-500 mt-4",children:'Click "Confirm & Analyze" to extract contract data using AI'})]})}return c.jsx("div",{className:"text-center py-10 text-cscx-gray-400",children:"File type preview not supported in browser."})}return null};return n?c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-700 rounded-xl p-6 animate-fadeIn shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx("span",{className:"text-cscx-accent",children:"Contract"}),i==="sample"?"Sample":i==="file"?v==null?void 0:v.file.name:i==="docusign"?"DocuSign Envelope":"Text"]}),c.jsx("button",{onClick:()=>a(!1),className:"text-cscx-gray-400 hover:text-white transition-colors text-xl",children:""})]}),c.jsx("div",{className:"bg-black/50 border border-cscx-gray-800 rounded-lg p-4 mb-6 h-[500px] overflow-y-auto",children:C()}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 border-t border-cscx-gray-800 pt-6",children:[c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"Review the document content before proceeding with AI extraction."}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsx("button",{onClick:()=>a(!1),className:"flex-1 sm:flex-none px-4 py-2 border border-cscx-gray-700 text-cscx-gray-300 rounded-lg hover:bg-cscx-gray-800 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:j,className:"flex-1 sm:flex-none bg-cscx-accent text-white font-bold py-2 px-6 rounded-lg hover:opacity-90 transition-all hover:-translate-y-0.5 shadow-accent-glow",children:"Confirm & Analyze"})]})]})]}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-cscx-gray-900 border-2 border-dashed border-cscx-gray-700 rounded-xl p-8 text-center transition-all hover:border-cscx-accent hover:shadow-accent-glow group cursor-pointer flex flex-col items-center justify-center min-h-[300px]",onClick:()=>{var D;return(D=_.current)==null?void 0:D.click()},children:[c.jsx("input",{type:"file",ref:_,onChange:A,className:"hidden",accept:".pdf,.txt,image/png,image/jpeg,image/webp"}),c.jsx("div",{className:"w-14 h-14 mx-auto bg-cscx-gray-800 rounded-full flex items-center justify-center mb-4 border border-cscx-gray-700 group-hover:border-cscx-accent transition-colors",children:c.jsx(C_,{className:"w-6 h-6 text-cscx-accent"})}),c.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Upload File"}),c.jsx("p",{className:"text-sm text-cscx-gray-500",children:"PDF, Images, Text"})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-700 rounded-xl p-6 flex flex-col min-h-[300px]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-6 text-white font-semibold border-b border-cscx-gray-800 pb-4",children:[c.jsx(k_,{className:"w-6 h-6 text-[#FFCC00]"}),c.jsx("span",{children:"DocuSign Import"})]}),u?c.jsxs("div",{className:"flex-grow flex flex-col",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 mb-3 uppercase tracking-wide",children:"Recent Envelopes"}),c.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto max-h-[200px] pr-1",children:p.map(D=>c.jsxs("div",{onClick:()=>N(D),className:`p-3 rounded-lg border text-left transition-all cursor-pointer ${D.status==="Completed"?"bg-cscx-gray-800 border-cscx-gray-700 hover:border-cscx-accent hover:bg-cscx-gray-800/80":"bg-cscx-gray-800/50 border-cscx-gray-800 opacity-60 cursor-not-allowed"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("p",{className:"text-white text-sm font-medium truncate pr-2",children:D.subject}),c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${D.status==="Completed"?"bg-cscx-success/20 text-cscx-success":"bg-cscx-error/20 text-cscx-error"}`,children:D.status})]}),c.jsx("p",{className:"text-xs text-cscx-gray-500",children:D.date})]},D.id))}),c.jsx("button",{onClick:()=>d(!1),className:"mt-4 text-xs text-cscx-gray-500 hover:text-white",children:"Disconnect"})]}):c.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center",children:[c.jsx("p",{className:"text-sm text-cscx-gray-400 mb-6",children:"Connect your account to import signed envelopes directly."}),c.jsx("button",{onClick:S,disabled:f,className:"w-full py-3 bg-[#0056b3] text-white font-bold rounded-lg hover:bg-[#004494] transition-colors flex justify-center items-center gap-2",children:f?c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Connect DocuSign"})]})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-700 rounded-xl p-6 flex flex-col min-h-[300px]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white font-semibold",children:[c.jsx(iy,{className:"w-5 h-5 text-cscx-accent"}),c.jsx("span",{children:"Paste Text"})]}),c.jsx("textarea",{className:"flex-grow bg-black/30 border border-cscx-gray-800 rounded-lg p-3 text-sm text-cscx-gray-300 focus:ring-1 focus:ring-cscx-accent focus:border-cscx-accent resize-none mb-4",placeholder:"Paste contract text here...",value:y,onChange:D=>{x(D.target.value),o("paste")}}),c.jsxs("div",{className:"flex gap-3 flex-col xl:flex-row",children:[c.jsx("button",{onClick:()=>{y.trim()&&(o("paste"),a(!0))},disabled:!y.trim(),className:"flex-1 bg-cscx-gray-800 text-white py-2 px-4 rounded-lg hover:bg-cscx-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Review Text"}),c.jsx("button",{onClick:E,className:"flex-1 bg-cscx-accent/10 text-cscx-accent border border-cscx-accent/30 py-2 px-4 rounded-lg hover:bg-cscx-accent/20 text-sm font-medium",children:"Use Sample"})]})]})]})},R_=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),M_=()=>c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-cscx-gray-700 border-t-cscx-accent"}),sh=({title:t,state:n,successState:a,children:i})=>{const o=n>0&&n<a,u=n>=a;return c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-cscx-gray-900 border-b border-cscx-gray-800",children:[c.jsx("h2",{className:"text-lg font-bold text-white",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[o&&c.jsxs(c.Fragment,{children:[c.jsx(M_,{}),c.jsx("span",{className:"text-sm text-cscx-accent",children:"Processing..."})]}),u&&c.jsxs("div",{className:"flex items-center gap-2 text-cscx-success",children:[c.jsx(R_,{}),c.jsx("span",{className:"text-sm",children:"Complete"})]})]})]}),u&&c.jsx("div",{className:"p-4 sm:p-6 bg-cscx-black/20",children:i})]})},D_=({entitlements:t})=>c.jsx("div",{className:"h-full",children:c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"table-header",children:[c.jsx("th",{className:"table-cell font-medium",children:"Entitlement Type"}),c.jsx("th",{className:"table-cell font-medium",children:"Description/Deps"}),c.jsx("th",{className:"table-cell font-medium",children:"Qty"}),c.jsx("th",{className:"table-cell font-medium",children:"Start"}),c.jsx("th",{className:"table-cell font-medium",children:"End"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:t.map((n,a)=>c.jsxs("tr",{className:"table-row",children:[c.jsx("td",{className:"table-cell text-white font-medium",children:n.type}),c.jsxs("td",{className:"table-cell text-cscx-gray-300",children:[n.description&&c.jsx("div",{className:"mb-1",children:n.description}),n.dependencies&&c.jsxs("div",{className:"text-xs text-cscx-accent bg-cscx-accent/10 px-2 py-1 rounded inline-block",children:["Dep: ",n.dependencies]})]}),c.jsx("td",{className:"table-cell text-white font-mono",children:n.quantity}),c.jsx("td",{className:"table-cell text-cscx-gray-400 text-xs",children:n.start_date}),c.jsx("td",{className:"table-cell text-cscx-gray-400 text-xs",children:n.end_date})]},a))})]})})}),z_=({stakeholders:t})=>c.jsx("div",{className:"h-full",children:c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"table-header",children:[c.jsx("th",{className:"table-cell font-medium",children:"Name & Role"}),c.jsx("th",{className:"table-cell font-medium",children:"Department"}),c.jsx("th",{className:"table-cell font-medium",children:"Contact"}),c.jsx("th",{className:"table-cell font-medium",children:"Responsibilities"}),c.jsx("th",{className:"table-cell font-medium text-center",children:"Approval"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:t.map((n,a)=>c.jsxs("tr",{className:"table-row",children:[c.jsxs("td",{className:"table-cell",children:[c.jsx("div",{className:"text-white font-bold",children:n.name}),c.jsx("div",{className:"text-cscx-gray-400 text-xs",children:n.role})]}),c.jsx("td",{className:"table-cell text-cscx-gray-300",children:n.department}),c.jsx("td",{className:"table-cell text-cscx-accent font-mono text-xs",children:n.contact}),c.jsx("td",{className:"table-cell text-cscx-gray-300 text-xs max-w-xs",children:n.responsibilities}),c.jsx("td",{className:"table-cell text-center",children:n.approval_required&&c.jsx("span",{className:"badge badge-accent",children:"Required"})})]},a))})]})})}),U_=({requirements:t})=>{const n=a=>{switch(a.toLowerCase()){case"high":return"text-cscx-error";case"medium":return"text-cscx-warning";default:return"text-blue-400"}};return c.jsx("div",{className:"h-full",children:c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"table-header",children:[c.jsx("th",{className:"table-cell font-medium",children:"Requirement"}),c.jsx("th",{className:"table-cell font-medium",children:"Type"}),c.jsx("th",{className:"table-cell font-medium",children:"Priority"}),c.jsx("th",{className:"table-cell font-medium",children:"Owner"}),c.jsx("th",{className:"table-cell font-medium",children:"Status"}),c.jsx("th",{className:"table-cell font-medium",children:"Due Date"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:t.map((a,i)=>c.jsxs("tr",{className:"table-row",children:[c.jsx("td",{className:"table-cell text-white font-medium",children:a.requirement}),c.jsx("td",{className:"table-cell text-cscx-gray-400",children:a.type}),c.jsx("td",{className:`table-cell font-bold ${n(a.priority)}`,children:a.priority}),c.jsx("td",{className:"table-cell text-cscx-gray-300",children:a.owner}),c.jsx("td",{className:"table-cell text-cscx-gray-300",children:c.jsx("span",{className:"bg-cscx-gray-800 px-2 py-1 rounded text-xs border border-cscx-gray-700",children:a.status})}),c.jsx("td",{className:"table-cell text-cscx-accent font-mono text-xs",children:a.due_date})]},i))})]})})})},$_=({agent:t})=>{const n={"Provisioning Agent":"bg-blue-900/50 text-blue-300 border-blue-700","Finance Agent":"bg-cscx-success/20 text-cscx-success border-cscx-success/50","Compliance Agent":"bg-cscx-error/20 text-cscx-error border-cscx-error/50","Onboarding Agent":"bg-purple-900/50 text-purple-300 border-purple-700","Success Agent":"bg-cscx-warning/20 text-cscx-warning border-cscx-warning/50"};return c.jsx("span",{className:`text-xs px-2 py-1 rounded border ${n[t]||"bg-cscx-gray-800 text-cscx-gray-300 border-cscx-gray-600"}`,children:t.replace(" Agent","")})},L_=({tasks:t})=>c.jsx("div",{className:"h-full",children:c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"table-header",children:[c.jsx("th",{className:"table-cell font-medium",children:"Task"}),c.jsx("th",{className:"table-cell font-medium",children:"Description"}),c.jsx("th",{className:"table-cell font-medium",children:"Assigned Agent"}),c.jsx("th",{className:"table-cell font-medium",children:"Priority"}),c.jsx("th",{className:"table-cell font-medium",children:"Dependencies"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:t.map((n,a)=>c.jsxs("tr",{className:"table-row",children:[c.jsx("td",{className:"table-cell text-white font-medium",children:n.task}),c.jsx("td",{className:"table-cell text-cscx-gray-400 text-xs",children:n.description}),c.jsx("td",{className:"table-cell",children:c.jsx($_,{agent:n.assigned_agent})}),c.jsx("td",{className:"table-cell text-cscx-gray-300",children:n.priority}),c.jsx("td",{className:"table-cell text-cscx-accent text-xs",children:n.dependencies})]},a))})]})})}),B_=({pricing:t})=>c.jsx("div",{className:"h-full",children:c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"table-header",children:[c.jsx("th",{className:"table-cell font-medium",children:"Item"}),c.jsx("th",{className:"table-cell font-medium",children:"Description"}),c.jsx("th",{className:"table-cell font-medium",children:"Qty"}),c.jsx("th",{className:"table-cell font-medium",children:"Unit Price"}),c.jsx("th",{className:"table-cell font-medium",children:"Total"}),c.jsx("th",{className:"table-cell font-medium",children:"Payment Terms"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:t.map((n,a)=>c.jsxs("tr",{className:"table-row",children:[c.jsx("td",{className:"table-cell text-white font-bold",children:n.item}),c.jsx("td",{className:"table-cell text-cscx-gray-400",children:n.description}),c.jsx("td",{className:"table-cell text-white font-mono",children:n.quantity}),c.jsx("td",{className:"table-cell text-cscx-gray-300 font-mono",children:n.unit_price}),c.jsx("td",{className:"table-cell text-cscx-accent font-mono font-bold",children:n.total}),c.jsx("td",{className:"table-cell text-cscx-gray-300 text-xs",children:n.payment_terms})]},a))})]})})}),H_=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),q_=({missingInfo:t,nextSteps:n})=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsxs("div",{className:"bg-cscx-error/10 border border-cscx-error/30 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-cscx-error font-bold mb-2 text-sm uppercase tracking-wide",children:"Missing Info / Flags"}),t&&t.length>0?c.jsx("ul",{className:"list-disc list-inside text-sm text-cscx-error/80 space-y-1",children:t.map((a,i)=>c.jsx("li",{children:a},i))}):c.jsx("p",{className:"text-sm text-cscx-gray-500",children:"No critical missing information detected."})]}),c.jsxs("div",{className:"bg-cscx-success/10 border border-cscx-success/30 p-4 rounded-lg",children:[c.jsxs("h4",{className:"text-cscx-success font-bold mb-2 text-sm uppercase tracking-wide flex items-center gap-2",children:[c.jsx(H_,{className:"w-4 h-4"})," Recommended Next Steps"]}),c.jsx("p",{className:"text-sm text-cscx-success/80 whitespace-pre-line",children:n})]})]}),I_=t=>t.split(`
`).map((n,a)=>n.startsWith("- ")?c.jsx("li",{className:"ml-5 list-disc",children:n.substring(2)},a):n.trim().length===0?c.jsx("br",{},a):!n.includes(":")&&n.length<30&&!n.startsWith(" ")?c.jsx("h4",{className:"font-bold text-cscx-accent mt-4 mb-1",children:n},a):c.jsx("p",{children:n},a)),V_=({summary:t})=>c.jsxs("div",{className:"bg-cscx-gray-900/50 border border-cscx-gray-800 rounded-lg p-4 h-full",children:[c.jsxs("h3",{className:"text-md font-semibold text-cscx-accent mb-3 flex items-center gap-2",children:[c.jsx(iy,{})," Executive Summary"]}),c.jsx("div",{className:"text-sm text-cscx-gray-300 space-y-2 prose",children:I_(t)})]}),G_=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9M3 12a9 9 0 019-9m0 18a9 9 0 00-9-9m9-9H3"})}),_p=({label:t,value:n})=>c.jsxs("div",{className:"bg-cscx-gray-800 border border-cscx-gray-700 rounded-lg px-3 py-2",children:[c.jsx("p",{className:"text-xs text-cscx-accent uppercase tracking-wider",children:t}),c.jsx("p",{className:"text-sm font-semibold text-white",children:n})]}),P_=({research:t})=>c.jsxs("div",{className:"bg-cscx-gray-900/50 border border-cscx-gray-800 rounded-lg p-4 h-full",children:[c.jsxs("h3",{className:"text-md font-semibold text-cscx-accent mb-3 flex items-center gap-2",children:[c.jsx(G_,{})," Company Research"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx(_p,{label:"Industry",value:t.industry}),c.jsx(_p,{label:"Employees",value:t.employee_count})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white text-sm mb-1",children:"Overview"}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:t.overview})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white text-sm mb-2",children:"Tech Stack"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.tech_stack.map((n,a)=>c.jsx("span",{className:"text-xs font-mono bg-cscx-gray-800 text-cscx-accent px-2 py-1 rounded",children:n},a))})]})]})]});/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,i)=>i?i.toUpperCase():a.toLowerCase()),Sp=t=>{const n=X_(t);return n.charAt(0).toUpperCase()+n.slice(1)},ly=(...t)=>t.filter((n,a,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===a).join(" ").trim(),K_=t=>{for(const n in t)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=M.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:d,...f},m)=>M.createElement("svg",{ref:m,...Q_,width:n,height:n,stroke:t,strokeWidth:i?Number(a)*24/Number(n):a,className:ly("lucide",o),...!u&&!K_(f)&&{"aria-hidden":"true"},...f},[...d.map(([p,y])=>M.createElement(p,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=(t,n)=>{const a=M.forwardRef(({className:i,...o},u)=>M.createElement(J_,{ref:u,iconNode:n,className:ly(`lucide-${Y_(Sp(t))}`,`lucide-${t}`,i),...o}));return a.displayName=Sp(t),a};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],F_=en("chevron-down",Z_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jp=en("circle-alert",W_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ui=en("circle-check-big",e1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],n1=en("cloud",t1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],a1=en("database",s1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],i1=en("folder-open",r1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],o1=en("layout-grid",l1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],u1=en("linkedin",c1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],h1=en("log-out",d1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],m1=en("mail",f1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],p1=en("message-square",g1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],y1=en("network",x1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],b1=en("target",v1),Bo=[{id:"gmail",name:"Gmail",dataType:"Email Communications",connected:!0,icon:c.jsx(m1,{className:"w-5 h-5"})},{id:"salesforce",name:"Salesforce",dataType:"CRM & Pipeline",connected:!0,icon:c.jsx(n1,{className:"w-5 h-5"})},{id:"hubspot",name:"HubSpot",dataType:"Marketing Data",connected:!1,icon:c.jsx(b1,{className:"w-5 h-5"})},{id:"jira",name:"Jira",dataType:"Project Tickets",connected:!0,icon:c.jsx(o1,{className:"w-5 h-5"})},{id:"internal-db",name:"Internal Database",dataType:"Company Records",connected:!0,icon:c.jsx(a1,{className:"w-5 h-5"})},{id:"linkedin",name:"LinkedIn",dataType:"Professional Network",connected:!1,icon:c.jsx(u1,{className:"w-5 h-5"})},{id:"slack",name:"Slack",dataType:"Team Communications",connected:!1,icon:c.jsx(p1,{className:"w-5 h-5"})},{id:"google-drive",name:"Google Drive",dataType:"Documents",connected:!0,icon:c.jsx(i1,{className:"w-5 h-5"})}],w1=({source:t})=>c.jsxs("div",{className:`
                relative p-4 rounded-lg border transition-all duration-300
                ${t.connected?"bg-cscx-gray-900 border-cscx-gray-800 hover:border-cscx-accent/50 hover:shadow-accent-glow":"bg-cscx-gray-900/50 border-cscx-gray-800/50 hover:border-cscx-gray-700"}
                group cursor-pointer
            `,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:`
                    p-2 rounded-lg transition-colors
                    ${t.connected?"bg-cscx-accent/10 text-cscx-accent":"bg-cscx-gray-800 text-cscx-gray-400"}
                `,children:t.icon}),t.connected?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("span",{className:"relative flex h-2 w-2",children:[c.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-cscx-success opacity-75"}),c.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-cscx-success"})]}),c.jsx("span",{className:"text-xs text-cscx-success font-medium",children:"Live"})]}):c.jsx("button",{className:"text-xs px-2 py-1 rounded bg-cscx-gray-800 text-cscx-gray-400 hover:bg-cscx-gray-700 hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:"Connect"})]}),c.jsx("h4",{className:`font-semibold text-sm mb-1 ${t.connected?"text-white":"text-cscx-gray-400"}`,children:t.name}),c.jsx("p",{className:"text-xs text-cscx-gray-500",children:t.dataType}),t.connected&&c.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-cscx-accent/5 to-transparent pointer-events-none"})]}),_1=()=>{const t=Bo.filter(a=>a.connected).length,n=Bo.length;return c.jsxs("div",{className:"mt-6 p-5 bg-cscx-black border border-cscx-gray-800 rounded-xl",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-lg bg-cscx-accent/10",children:c.jsx(y1,{className:"w-5 h-5 text-cscx-accent"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-white",children:"Intelligence Sources"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Connected platforms feeding real-time data"})]})]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:Bo.map(a=>c.jsx(w1,{source:a},a.id))}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-cscx-gray-800",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex -space-x-1",children:Bo.filter(a=>a.connected).slice(0,4).map((a,i)=>c.jsx("div",{className:"w-6 h-6 rounded-full bg-cscx-gray-800 border-2 border-cscx-black flex items-center justify-center",style:{zIndex:4-i},children:c.jsx("span",{className:"text-cscx-accent scale-75",children:a.icon})},a.id))}),c.jsxs("span",{className:"text-sm text-cscx-gray-400",children:[c.jsx("span",{className:"text-cscx-accent font-semibold",children:t})," of ",n," sources connected"]})]}),c.jsx("button",{className:"text-xs px-3 py-1.5 rounded-lg bg-cscx-gray-800 text-cscx-gray-300 hover:bg-cscx-gray-700 hover:text-white transition-colors",children:"Manage Sources"})]})]})},S1=t=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),j1=({owner:t})=>{const n={CSM:"bg-blue-500/20 text-blue-400",AE:"bg-purple-500/20 text-purple-400",SA:"bg-orange-500/20 text-orange-400",Customer:"bg-cscx-success/20 text-cscx-success"}[t]||"bg-cscx-gray-500/20 text-cscx-gray-400";return c.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${n}`,children:t})},N1=({task:t})=>c.jsxs("div",{className:"bg-cscx-gray-900/80 p-3 rounded-lg border border-cscx-gray-700",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:"font-semibold text-white text-sm pr-4",children:t.title}),c.jsx(j1,{owner:t.owner})]}),c.jsx("p",{className:"text-xs text-cscx-gray-400 mt-1",children:t.description}),c.jsxs("p",{className:"text-xs font-mono text-cscx-accent mt-2",children:["Due: Day ",t.due_days]})]}),E1=({phase:t,index:n})=>{const[a,i]=M.useState(n===0);return c.jsxs("div",{className:"border border-cscx-gray-800 rounded-lg",children:[c.jsxs("button",{onClick:()=>i(!a),className:"w-full flex justify-between items-center p-4 bg-cscx-gray-900 hover:bg-cscx-gray-800/50 transition-colors",children:[c.jsx("span",{className:"font-bold text-white text-lg",children:t.name}),c.jsx(S1,{className:`w-6 h-6 text-cscx-accent transition-transform ${a?"rotate-180":""}`})]}),a&&c.jsxs("div",{className:"p-4 bg-cscx-black/30",children:[c.jsx("p",{className:"text-cscx-gray-400 text-sm mb-4",children:t.description}),c.jsx("div",{className:"space-y-3",children:t.tasks.map((o,u)=>c.jsx(N1,{task:o},u))})]})]})},A1=({plan:t})=>c.jsx("div",{className:"space-y-4",children:t.phases.map((n,a)=>c.jsx(E1,{phase:n,index:a},a))}),Np={onboarding:{id:"onboarding",name:"Onboarding Agent",icon:"",color:"#e63946",description:"Main orchestrator - coordinates all subagents",capabilities:["Coordinate workflows","Deploy subagents","Track progress","Request approvals"]},meeting:{id:"meeting",name:"Meeting Agent",icon:"",color:"#22c55e",description:"Runs discovery calls, captures use cases and information",capabilities:["Schedule Zoom/Meet/Teams","Join calls","Live transcription","Extract insights"]},training:{id:"training",name:"Training Agent",icon:"",color:"#3b82f6",description:"AI-powered training modules, KB-powered voice agent",capabilities:["Voice-enabled training","Knowledge base Q&A","Onboarding guides","Self-service support"]},intelligence:{id:"intelligence",name:"Intelligence Agent",icon:"",color:"#a855f7",description:"Consolidates data, health metrics, customer story",capabilities:["CRM data sync","Health scoring","Integration monitoring","Customer timeline"]}},un={onboarding:{id:"onboarding",name:"Onboarding Specialist",icon:"",color:"#e63946",description:"Expert in new customer setup, kickoff, and 30-60-90 day plans",capabilities:["Kickoff planning","Stakeholder mapping","Training coordination","Early warning detection"]},adoption:{id:"adoption",name:"Adoption Specialist",icon:"",color:"#22c55e",description:"Drives product usage, feature adoption, and user engagement",capabilities:["Usage analysis","Training programs","Feature campaigns","Champion development"]},renewal:{id:"renewal",name:"Renewal Specialist",icon:"",color:"#3b82f6",description:"Manages renewals, expansion, and commercial negotiations",capabilities:["Renewal forecasting","Value summaries","Expansion strategy","Pricing negotiation"]},risk:{id:"risk",name:"Risk Specialist",icon:"",color:"#f59e0b",description:"Identifies at-risk customers and creates save plays",capabilities:["Risk scoring","Save plays","Escalation management","Issue resolution"]},strategic:{id:"strategic",name:"Strategic CSM",icon:"",color:"#a855f7",description:"Handles executive relationships, QBRs, and strategic planning",capabilities:["Executive engagement","QBR preparation","Account planning","Business transformation"]}},T1=({agent:t,status:n,isActive:a,isDeploying:i})=>c.jsxs("div",{className:`agent-card ${a?"active":""}`,style:{borderColor:a?t.color:void 0},children:[c.jsxs("div",{className:"agent-card-header",children:[c.jsx("span",{className:`agent-icon ${i?"deploying":""}`,children:t.icon}),c.jsx("span",{className:"agent-name",children:t.name})]}),c.jsx("p",{className:"agent-description",children:t.description}),c.jsxs("div",{className:"agent-status",children:[c.jsx("span",{className:`status-indicator ${a?"active":n}`}),c.jsx("span",{children:a?"Active":n==="ready"?"Ready":"Idle"})]})]}),C1=t=>t?t in un?un[t]:t in Np?Np[t]:un.onboarding:un.onboarding,k1=({message:t,agent:n,isUser:a,isThinking:i,isApproval:o,onApprove:u})=>{if(a)return c.jsxs("div",{className:"message user-message",children:[c.jsx("div",{className:"message-content user",children:c.jsx("p",{children:t})}),c.jsx("p",{className:"message-sender",children:"CSM"})]});const d=C1(n);return c.jsxs("div",{className:"message agent-message",children:[c.jsx("div",{className:"agent-avatar",style:{backgroundColor:`${d.color}20`},children:d.icon}),c.jsxs("div",{className:"message-body",children:[c.jsx("div",{className:"message-content agent",children:i?c.jsxs("div",{className:"thinking",children:[c.jsxs("div",{className:"thinking-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]}),c.jsx("span",{className:"thinking-text",children:t})]}):c.jsx("p",{children:t})}),c.jsx("p",{className:"message-sender",style:{color:d.color},children:d.name}),o&&u&&c.jsxs("div",{className:"approval-buttons",children:[c.jsx("button",{className:"approve",onClick:()=>u(!0),children:" Approve"}),c.jsx("button",{className:"reject",onClick:()=>u(!1),children:" Reject"})]})]})]})},O1=[{id:"onboard",label:"Start Onboarding",icon:""},{id:"schedule",label:"Schedule Call",icon:""},{id:"call",label:"Run Discovery",icon:""},{id:"plan",label:"Generate Plan",icon:""},{id:"training",label:"Deploy Training",icon:""}],Ep=({onAction:t,disabled:n})=>c.jsx("div",{className:"quick-actions",children:O1.map(a=>c.jsxs("button",{onClick:()=>t(a.id),disabled:n,children:[a.icon," ",a.label]},a.id))});function R1({userId:t,compact:n=!1,onStatusChange:a}){const[i,o]=M.useState(null),[u,d]=M.useState(!0),[f,m]=M.useState(!1),[p,y]=M.useState(null),x="",v=M.useCallback(async()=>{if(!t){o({connected:!1}),d(!1);return}try{const A=await fetch(`${x}/api/google/auth/status`,{headers:{"x-user-id":t}});if(A.ok){const E=await A.json();o(E),a==null||a(E.connected)}else o({connected:!1}),a==null||a(!1)}catch(A){console.error("Failed to check Google status:",A),o({connected:!1})}finally{d(!1)}},[t,x,a]);M.useEffect(()=>{v();const A=new URLSearchParams(window.location.search);A.get("google_connected")==="true"?(o({connected:!0,email:A.get("email")||void 0}),a==null||a(!0),window.history.replaceState({},"",window.location.pathname)):A.get("error")&&(y(A.get("message")||"Failed to connect Google account"),window.history.replaceState({},"",window.location.pathname))},[v,a]);const w=async()=>{m(!0),y(null);try{const A=await fetch(`${x}/api/google/auth/connect?userId=${t}`,{headers:{"x-user-id":t||""}});if(!A.ok){const S=await A.json();throw new Error(S.message||"Failed to initiate Google connection")}const{url:E}=await A.json();window.location.href=E}catch(A){y(A.message),m(!1)}},_=async()=>{if(confirm("Are you sure you want to disconnect your Google account? Agents will no longer be able to send emails or schedule meetings."))try{const A=await fetch(`${x}/api/google/auth/disconnect`,{method:"DELETE",headers:{"x-user-id":t||""}});if(A.ok)o({connected:!1}),a==null||a(!1);else{const E=await A.json();throw new Error(E.message||"Failed to disconnect")}}catch(A){y(A.message)}};return n?c.jsx("div",{className:"flex items-center gap-2",children:u?c.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400 animate-pulse"}):i!=null&&i.connected?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Google connected"})]}):c.jsx("button",{onClick:w,disabled:f,className:"text-xs text-blue-400 hover:text-blue-300 underline",children:f?"Connecting...":"Connect Google"})}):c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4 border border-cscx-gray-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",children:c.jsx("path",{fill:"currentColor",d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})}),c.jsx("span",{className:"font-medium text-white",children:"Google Workspace"})]}),u?c.jsx("span",{className:"text-sm text-gray-400",children:"Checking..."}):i!=null&&i.connected?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-green-900/50 text-green-400",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Connected"]}):c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-yellow-900/50 text-yellow-400",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Not Connected"]})]}),p&&c.jsx("div",{className:"mb-3 p-2 rounded bg-red-900/30 border border-red-800 text-red-400 text-sm",children:p}),i!=null&&i.connected?c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[c.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("span",{children:i.email})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Agents can send emails and schedule meetings on your behalf."}),c.jsxs("div",{className:"flex gap-2 mt-3",children:[c.jsx("button",{onClick:v,className:"px-3 py-1.5 text-xs text-gray-400 hover:text-white border border-gray-600 rounded transition-colors",children:"Refresh Status"}),c.jsx("button",{onClick:_,className:"px-3 py-1.5 text-xs text-red-400 hover:text-red-300 border border-red-800 rounded transition-colors",children:"Disconnect"})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Connect your Google account to enable agents to:"}),c.jsxs("ul",{className:"text-sm text-gray-500 space-y-1 ml-4",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-600"}),"Send emails on your behalf"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-600"}),"Schedule meetings and sync calendar"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-600"}),"Access Google Drive documents"]})]}),c.jsx("button",{onClick:w,disabled:f,className:"w-full mt-2 flex items-center justify-center gap-2 px-4 py-2 bg-white text-gray-900 rounded-lg font-medium hover:bg-gray-100 transition-colors disabled:opacity-50",children:f?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Connect Google Account"]})})]})]})}const M1="demo-user-001",ah="",D1=({customer:t,contractData:n,plan:a,initialMessage:i})=>{var H,Z,te,le,oe,de,ce,fe,Ne;const[o,u]=M.useState([]),[d,f]=M.useState(""),[m,p]=M.useState(!1),[y,x]=M.useState("onboarding"),[v,w]=M.useState("auto"),[_,A]=M.useState(null),[E,S]=M.useState(null),[N]=M.useState(()=>`session_${Date.now()}`),[j,C]=M.useState({onboarding:"active",adoption:"idle",renewal:"idle",risk:"idle",strategic:"idle"}),[D,z]=M.useState(null),[R,L]=M.useState(!1),[I,Q]=M.useState(!1),Y=M.useRef(null),X=()=>{var ue;(ue=Y.current)==null||ue.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{X()},[o]),M.useEffect(()=>{if(!R&&t&&n){L(!0),x("onboarding"),C(he=>({...he,onboarding:"active"}));const ue={agent:"onboarding",message:i||P()};u([ue]),U()}},[t,n,R]);const P=()=>{var ve,Ae,be,De;const ue=((ve=n==null?void 0:n.stakeholders)==null?void 0:ve.slice(0,3).map(ht=>ht.name).join(", "))||"the team",he=((Ae=n==null?void 0:n.entitlements)==null?void 0:Ae.length)||0,me=((be=a==null?void 0:a.phases)==null?void 0:be.length)||3;return`I've reviewed the contract for **${n==null?void 0:n.company_name}**. Here's what I found:

- **ARR:** $${(De=n==null?void 0:n.arr)==null?void 0:De.toLocaleString()}
- **Contract Period:** ${(n==null?void 0:n.contract_period)||"Standard term"}
- **Entitlements:** ${he} products/services
- **Key Stakeholders:** ${ue}
- **Onboarding Plan:** ${(a==null?void 0:a.timeline_days)||90} days across ${me} phases

What would you like me to do first? I can:
1. **Schedule a kickoff meeting** with ${ue}
2. **Send welcome emails** to introduce ourselves
3. **Review the onboarding plan** in detail
4. **Start technical setup** based on their requirements`},U=async()=>{try{await fetch(`${ah}/api/ai/session/clear`,{method:"POST"})}catch(ue){console.error("Failed to initialize session:",ue)}},J=()=>{var ue,he;return{id:((ue=t==null?void 0:t.name)==null?void 0:ue.toLowerCase().replace(/\s+/g,"-"))||"unknown",name:(t==null?void 0:t.name)||"Unknown Customer",arr:typeof(t==null?void 0:t.arr)=="number"?t.arr:parseInt(String((t==null?void 0:t.arr)||"0").replace(/[^0-9]/g,""))||0,healthScore:70,status:"active",renewalDate:n==null?void 0:n.contract_period,daysSinceLastContact:void 0,stakeholders:((he=n==null?void 0:n.stakeholders)==null?void 0:he.map(me=>me.name))||[],openIssues:0,contractDetails:JSON.stringify({entitlements:n==null?void 0:n.entitlements,technicalRequirements:n==null?void 0:n.technical_requirements})}},T=async ue=>{var he,me,ve,Ae;p(!0),u(be=>[...be,{agent:y,message:"Processing your request...",isThinking:!0}]);try{const be=await fetch(`${ah}/api/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ue,customerId:(he=t==null?void 0:t.name)==null?void 0:he.toLowerCase().replace(/\s+/g,"-"),customerContext:J(),forceAgent:v!=="auto"?v:void 0,sessionId:N})});if(!be.ok){const nt=await be.json().catch(()=>({}));throw new Error(((me=nt.error)==null?void 0:me.message)||"Failed to get response")}const De=await be.json(),ht=((ve=De.routing)==null?void 0:ve.agentType)||"onboarding";x(ht),A(De.routing),C(nt=>{const jt={...nt};return Object.keys(jt).forEach(kt=>{jt[kt]=kt===ht?"active":"idle"}),jt}),u(nt=>[...nt.filter(kt=>!kt.isThinking),{agent:ht,message:De.response,isApproval:De.requiresApproval,routing:De.routing}]),De.requiresApproval&&z(((Ae=De.sessionState)==null?void 0:Ae.currentAgent)||ht)}catch(be){console.error("Agent error:",be),u(De=>[...De.filter(nt=>!nt.isThinking),{agent:y,message:`Sorry, I encountered an error: ${be instanceof Error?be.message:"Please try again."}`}])}finally{p(!1)}},$=async ue=>{if(u(he=>[...he,{isUser:!0,message:ue?" Approved - proceed":" Rejected - stop"}]),D)try{await fetch(`${ah}/api/agents/approve/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:ue})})}catch(he){console.error("Approval error:",he)}z(null),ue&&await T("Approval granted. Please continue.")},q=ue=>{var be;const he=(t==null?void 0:t.name)||"the customer",me=((be=n==null?void 0:n.stakeholders)==null?void 0:be.slice(0,2).map(De=>De.name).join(" and "))||"the team",Ae={onboard:`Let's start the onboarding process for ${he}`,schedule:`Schedule a kickoff meeting with ${me}`,call:`Run the discovery call and capture insights from ${he}`,plan:`Walk me through the ${(a==null?void 0:a.timeline_days)||90}-day onboarding plan for ${he}`,training:`Deploy the Training Agent for ${he} self-service portal`}[ue];u(De=>[...De,{isUser:!0,message:Ae}]),T(Ae)},V=()=>{if(!d.trim()||m)return;const ue=d.trim();f(""),u(he=>[...he,{isUser:!0,message:ue}]),T(ue)},O=a!=null&&a.phases?{total:a.phases.reduce((he,me)=>{var ve;return he+(((ve=me.tasks)==null?void 0:ve.length)||0)},0),completed:0}:{total:0,completed:0};return c.jsxs("div",{className:"agent-control-center",children:[c.jsxs("div",{className:"agent-sidebar",children:[c.jsx("div",{className:"sidebar-header",children:c.jsxs("div",{className:"logo",children:[c.jsx("div",{className:"logo-icon",children:"C"}),c.jsx("span",{children:"CSCX.AI"})]})}),c.jsxs("div",{className:"agent-selector",style:{padding:"12px",borderBottom:"1px solid #1a1a1a"},children:[c.jsx("p",{className:"section-label",children:"Agent Routing"}),c.jsxs("select",{value:v,onChange:ue=>w(ue.target.value),style:{width:"100%",padding:"8px",background:"#1a1a1a",border:"1px solid #333",borderRadius:"6px",color:"#fff",fontSize:"13px",marginTop:"8px"},children:[c.jsx("option",{value:"auto",children:"Auto-route (Recommended)"}),c.jsx("option",{value:"onboarding",children:"Onboarding Specialist"}),c.jsx("option",{value:"adoption",children:"Adoption Specialist"}),c.jsx("option",{value:"renewal",children:"Renewal Specialist"}),c.jsx("option",{value:"risk",children:"Risk Specialist"}),c.jsx("option",{value:"strategic",children:"Strategic CSM"})]}),_&&c.jsxs("p",{style:{fontSize:"10px",color:"#888",marginTop:"6px"},children:["Last: ",_.agentType," (",Math.round(_.confidence*100),"% conf)"]})]}),c.jsxs("div",{className:"agent-list",children:[c.jsx("p",{className:"section-label",children:"CS Specialist Agents"}),Object.keys(un).map(ue=>c.jsx(T1,{agent:un[ue],status:j[ue],isActive:y===ue,isDeploying:!1},ue))]}),c.jsxs("div",{className:"customer-context",children:[c.jsx("p",{className:"section-label",children:"Current Customer"}),c.jsx("p",{className:"customer-name",children:(t==null?void 0:t.name)||"No customer selected"}),c.jsx("p",{className:"customer-details",children:t?`$${typeof t.arr=="number"?(t.arr/1e3).toFixed(0)+"K":t.arr} ARR`:"Select a customer to begin"}),n&&c.jsxs("p",{className:"customer-details",style:{marginTop:"4px",fontSize:"11px"},children:[((H=n.entitlements)==null?void 0:H.length)||0," entitlements  ",((Z=n.stakeholders)==null?void 0:Z.length)||0," stakeholders"]})]}),a&&c.jsxs("div",{className:"customer-context",style:{marginTop:"8px",borderTop:"1px solid #1a1a1a",paddingTop:"12px"},children:[c.jsx("p",{className:"section-label",children:"Onboarding Plan"}),c.jsxs("p",{className:"customer-details",children:[a.timeline_days," days  ",((te=a.phases)==null?void 0:te.length)||3," phases"]}),c.jsx("div",{style:{marginTop:"8px",background:"#1a1a1a",borderRadius:"4px",height:"4px",overflow:"hidden"},children:c.jsx("div",{style:{width:O.total>0?`${O.completed/O.total*100}%`:"0%",height:"100%",background:"#e63946",transition:"width 0.3s"}})}),c.jsxs("p",{className:"customer-details",style:{marginTop:"4px",fontSize:"10px"},children:[O.completed,"/",O.total," milestones"]})]}),c.jsxs("div",{className:"customer-context",style:{marginTop:"8px",borderTop:"1px solid #1a1a1a",paddingTop:"12px"},children:[c.jsx("p",{className:"section-label",children:"System Status"}),c.jsx("p",{className:"customer-details",style:{color:"#22c55e"},children:" Connected to AI Backend"}),n&&c.jsx("p",{className:"customer-details",style:{color:"#3b82f6",marginTop:"2px"},children:" Contract data loaded"}),c.jsx("p",{className:"customer-details",style:{color:I?"#22c55e":"#f59e0b",marginTop:"2px"},children:I?" Google Workspace connected":" Google not connected"})]}),c.jsx("div",{style:{padding:"12px",borderTop:"1px solid #1a1a1a"},children:c.jsx(R1,{userId:M1,compact:!1,onStatusChange:Q})})]}),c.jsxs("div",{className:"agent-main",children:[c.jsxs("header",{className:"agent-header",children:[c.jsxs("div",{children:[c.jsx("h1",{children:((le=un[y])==null?void 0:le.name)||"AI Agent"}),c.jsxs("p",{children:["LangChain RAG-powered  ",(t==null?void 0:t.name)||"Ready"]})]}),c.jsxs("div",{className:"agent-status",children:[c.jsx("span",{className:`status-dot ${y?"active":""}`}),c.jsx("span",{children:y?`${(oe=un[y])==null?void 0:oe.name} active`:"Idle"})]})]}),c.jsx("div",{className:"messages-container",children:o.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:((de=un[y])==null?void 0:de.icon)||""}),c.jsxs("h2",{children:[((ce=un[y])==null?void 0:ce.name)||"AI Agent"," Ready"]}),c.jsx("p",{children:"LangChain-powered with RAG knowledge base. Auto-routing intelligently selects the best specialist for each conversation."}),c.jsx(Ep,{onAction:q,disabled:m})]}):c.jsxs(c.Fragment,{children:[o.map((ue,he)=>c.jsx(k1,{message:ue.message,agent:ue.agent,isUser:ue.isUser,isThinking:ue.isThinking,isApproval:ue.isApproval&&D!==null,onApprove:$},he)),c.jsx("div",{ref:Y})]})}),c.jsxs("div",{className:"input-area",children:[o.length>0&&c.jsx("div",{className:"quick-actions-row",children:c.jsx(Ep,{onAction:q,disabled:m||D!==null})}),c.jsxs("div",{className:"input-row",children:[c.jsx("input",{type:"text",value:d,onChange:ue=>f(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&V(),placeholder:`Message the ${((fe=un[y])==null?void 0:fe.name)||"AI Agent"}...`,disabled:m||D!==null}),c.jsx("button",{onClick:V,disabled:m||!d.trim()||D!==null,children:m?"...":"Send"})]}),c.jsxs("p",{className:"input-hint",children:["LangChain RAG  ",v==="auto"?"Auto-routing":`${(Ne=un[v])==null?void 0:Ne.name}`,"  HITL approval"]})]})]})]})},z1="/api",U1=({onSelectCustomer:t,onNewOnboarding:n})=>{const[a,i]=M.useState([]),[o,u]=M.useState(!0),[d,f]=M.useState(null),[m,p]=M.useState(""),[y,x]=M.useState(""),[v,w]=M.useState("name"),[_,A]=M.useState("asc"),[E,S]=M.useState({totalCustomers:0,totalArr:0,avgHealth:0,atRiskCount:0}),N=M.useCallback(async()=>{u(!0);try{const Q=new URLSearchParams;m&&Q.append("search",m),y&&Q.append("status",y),Q.append("sortBy",v),Q.append("sortOrder",_);const Y=await fetch(`${z1}/customers?${Q}`);if(!Y.ok)throw new Error("Failed to fetch customers");const X=await Y.json();i(X.customers),S(X.summary),f(null)}catch(Q){f(Q instanceof Error?Q.message:"Failed to load customers")}finally{u(!1)}},[m,y,v,_]);M.useEffect(()=>{N()},[N]);const j=Q=>Q>=80?"text-green-400":Q>=60?"text-yellow-400":"text-red-400",C=Q=>Q>=80?"bg-green-500/20":Q>=60?"bg-yellow-500/20":"bg-red-500/20",D=Q=>{const Y={active:"bg-green-500/20 text-green-400 border-green-500/30",onboarding:"bg-blue-500/20 text-blue-400 border-blue-500/30",at_risk:"bg-red-500/20 text-red-400 border-red-500/30",churned:"bg-gray-500/20 text-gray-400 border-gray-500/30"};return Y[Q]||Y.active},z=Q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Q),R=Q=>Q?new Date(Q).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",L=Q=>{v===Q?A(Y=>Y==="asc"?"desc":"asc"):(w(Q),A("asc"))},I=({field:Q})=>v!==Q?c.jsx("span",{className:"text-gray-600 ml-1",children:""}):c.jsx("span",{className:"text-cscx-accent ml-1",children:_==="asc"?"":""});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Total Customers"}),c.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:E.totalCustomers})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Total ARR"}),c.jsx("p",{className:"text-2xl font-bold text-cscx-accent mt-1",children:z(E.totalArr)})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Avg Health"}),c.jsxs("p",{className:`text-2xl font-bold mt-1 ${j(E.avgHealth)}`,children:[E.avgHealth,"%"]})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"At Risk"}),c.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:E.atRiskCount})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{type:"text",placeholder:"Search customers, contacts, industries...",value:m,onChange:Q=>p(Q.target.value),className:"w-full px-4 py-2.5 pl-10 bg-cscx-gray-900 border border-cscx-gray-800 rounded-lg text-white placeholder-cscx-gray-500 focus:outline-none focus:border-cscx-accent"}),c.jsx("svg",{className:"absolute left-3 top-3 w-4 h-4 text-cscx-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsxs("select",{value:y,onChange:Q=>x(Q.target.value),className:"px-4 py-2.5 bg-cscx-gray-900 border border-cscx-gray-800 rounded-lg text-white focus:outline-none focus:border-cscx-accent",children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"onboarding",children:"Onboarding"}),c.jsx("option",{value:"at_risk",children:"At Risk"}),c.jsx("option",{value:"churned",children:"Churned"})]}),n&&c.jsxs("button",{onClick:n,className:"px-4 py-2.5 bg-cscx-accent hover:bg-red-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:"+"}),"New Onboarding"]})]}),c.jsx("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl overflow-hidden",children:o?c.jsxs("div",{className:"p-8 text-center text-cscx-gray-400",children:[c.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-cscx-accent border-t-transparent rounded-full mx-auto mb-2"}),"Loading customers..."]}):d?c.jsxs("div",{className:"p-8 text-center text-red-400",children:[d,c.jsx("button",{onClick:N,className:"block mx-auto mt-2 text-sm text-cscx-accent hover:underline",children:"Try again"})]}):a.length===0?c.jsx("div",{className:"p-8 text-center text-cscx-gray-400",children:"No customers found. Start by uploading a contract!"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-cscx-gray-800/50 border-b border-cscx-gray-800",children:[c.jsxs("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium cursor-pointer hover:text-white",onClick:()=>L("name"),children:["Customer ",c.jsx(I,{field:"name"})]}),c.jsx("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium",children:"Primary Contact"}),c.jsxs("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium cursor-pointer hover:text-white",onClick:()=>L("arr"),children:["ARR ",c.jsx(I,{field:"arr"})]}),c.jsxs("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium cursor-pointer hover:text-white",onClick:()=>L("health_score"),children:["Health ",c.jsx(I,{field:"health_score"})]}),c.jsx("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium",children:"Status"}),c.jsxs("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium cursor-pointer hover:text-white",onClick:()=>L("renewal_date"),children:["Renewal ",c.jsx(I,{field:"renewal_date"})]}),c.jsx("th",{className:"text-left px-4 py-3 text-cscx-gray-400 font-medium",children:"CSM"})]})}),c.jsx("tbody",{className:"divide-y divide-cscx-gray-800",children:a.map(Q=>c.jsxs("tr",{className:"hover:bg-cscx-gray-800/30 transition-colors cursor-pointer",onClick:()=>t==null?void 0:t(Q),children:[c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:Q.name}),c.jsx("p",{className:"text-cscx-gray-500 text-xs",children:Q.industry})]})}),c.jsx("td",{className:"px-4 py-3",children:Q.primary_contact?c.jsxs("div",{children:[c.jsx("p",{className:"text-white text-sm",children:Q.primary_contact.name}),c.jsx("p",{className:"text-cscx-gray-500 text-xs",children:Q.primary_contact.email})]}):c.jsx("span",{className:"text-cscx-gray-500",children:"-"})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"text-white font-medium",children:z(Q.arr)})}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-10 h-2 rounded-full ${C(Q.health_score)}`,children:c.jsx("div",{className:`h-full rounded-full ${Q.health_score>=80?"bg-green-500":Q.health_score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Q.health_score}%`}})}),c.jsx("span",{className:`text-sm font-medium ${j(Q.health_score)}`,children:Q.health_score})]})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${D(Q.status)}`,children:Q.status.replace("_"," ")})}),c.jsx("td",{className:"px-4 py-3 text-cscx-gray-300",children:R(Q.renewal_date)}),c.jsx("td",{className:"px-4 py-3 text-cscx-gray-300",children:Q.csm_name||"-"})]},Q.id))})]})})})]})},$1="/api",Ap=[{id:"1",type:"milestone",title:"Onboarding Complete",description:"Successfully completed 30-day onboarding program",date:new Date(Date.now()-2880*60*1e3).toISOString(),user:"AI Agent"},{id:"2",type:"meeting",title:"Quarterly Business Review",description:"Discussed Q1 goals and product roadmap alignment",date:new Date(Date.now()-7200*60*1e3).toISOString(),user:"Sarah Johnson"},{id:"3",type:"email",title:"Feature Request Follow-up",description:"Sent documentation for API integration",date:new Date(Date.now()-10080*60*1e3).toISOString(),user:"Sarah Johnson"},{id:"4",type:"call",title:"Support Call",description:"Resolved authentication issue",date:new Date(Date.now()-14400*60*1e3).toISOString(),user:"Mike Chen"},{id:"5",type:"note",title:"Internal Note",description:"Customer expressed interest in enterprise plan upgrade",date:new Date(Date.now()-336*60*60*1e3).toISOString(),user:"Sarah Johnson"}],L1=({customerId:t,onBack:n,onStartChat:a})=>{var j;const[i,o]=M.useState(null),[u,d]=M.useState(!0),[f,m]=M.useState(null),[p,y]=M.useState("overview");M.useEffect(()=>{(async()=>{d(!0);try{const D=await fetch(`${$1}/customers/${t}`);if(!D.ok)throw new Error("Failed to fetch customer");const z=await D.json();o(z),m(null)}catch(D){m(D instanceof Error?D.message:"Failed to load customer")}finally{d(!1)}})()},[t]);const x=C=>C>=80?"text-green-400":C>=60?"text-yellow-400":"text-red-400",v=C=>{const D={active:"bg-green-500/20 text-green-400 border-green-500/30",onboarding:"bg-blue-500/20 text-blue-400 border-blue-500/30",at_risk:"bg-red-500/20 text-red-400 border-red-500/30",churned:"bg-gray-500/20 text-gray-400 border-gray-500/30"};return D[C]||D.active},w=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(C),_=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",A=C=>{const D=new Date(C),R=Math.floor((new Date().getTime()-D.getTime())/(1e3*60*60*24));return R===0?"Today":R===1?"Yesterday":R<7?`${R} days ago`:R<30?`${Math.floor(R/7)} weeks ago`:_(C)},E=C=>{if(!C)return null;const D=new Date(C),z=new Date;return Math.ceil((D.getTime()-z.getTime())/(1e3*60*60*24))},S=C=>({email:"",meeting:"",call:"",note:"",task:"",milestone:""})[C]||"";if(u)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-cscx-accent border-t-transparent rounded-full"})});if(f||!i)return c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-red-400 mb-4",children:f||"Customer not found"}),c.jsx("button",{onClick:n,className:"text-cscx-accent hover:underline",children:"Back to Customers"})]});const N=E(i.renewal_date);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-cscx-gray-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"\\u2190"}),"Back to Customers"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{className:"px-4 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:"\\u270f\\ufe0f"}),"Edit"]}),a&&c.jsxs("button",{onClick:()=>a(i),className:"px-4 py-2 bg-cscx-accent hover:bg-red-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:"\\ud83e\\udd16"}),"Start AI Chat"]})]})]}),c.jsx("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-6",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cscx-accent to-red-700 rounded-xl flex items-center justify-center text-2xl font-bold text-white",children:i.name.charAt(0)}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:i.name}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${v(i.status)}`,children:i.status.replace("_"," ")})]}),c.jsx("p",{className:"text-cscx-gray-400 mt-1",children:i.industry}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:(j=i.tags)==null?void 0:j.map((C,D)=>c.jsx("span",{className:"px-2 py-1 text-xs bg-cscx-gray-800 text-cscx-gray-300 rounded",children:C},D))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center lg:text-right",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"ARR"}),c.jsx("p",{className:"text-xl font-bold text-cscx-accent",children:w(i.arr)})]}),c.jsxs("div",{className:"text-center lg:text-right",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Health"}),c.jsxs("p",{className:`text-xl font-bold ${x(i.health_score)}`,children:[i.health_score,"%"]})]}),c.jsxs("div",{className:"text-center lg:text-right",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Renewal"}),c.jsx("p",{className:"text-xl font-bold text-white",children:_(i.renewal_date)}),N!==null&&c.jsx("p",{className:`text-xs ${N<30?"text-red-400":N<90?"text-yellow-400":"text-cscx-gray-400"}`,children:N>0?`${N} days left`:"Overdue"})]}),c.jsxs("div",{className:"text-center lg:text-right",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"CSM"}),c.jsx("p",{className:"text-lg font-medium text-white",children:i.csm_name||"-"})]})]})]})}),c.jsx("div",{className:"flex gap-1 p-1 bg-cscx-gray-900 rounded-lg w-fit",children:["overview","activity","contracts","contacts"].map(C=>c.jsx("button",{onClick:()=>y(C),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors capitalize ${p===C?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:C},C))}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p==="overview"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Health Score"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"relative w-32 h-32",children:[c.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[c.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#222",strokeWidth:"12"}),c.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:i.health_score>=80?"#22c55e":i.health_score>=60?"#eab308":"#ef4444",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:`${i.health_score/100*352} 352`})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:`text-3xl font-bold ${x(i.health_score)}`,children:i.health_score})})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Engagement"}),c.jsx("span",{className:"text-white",children:"85%"})]}),c.jsx("div",{className:"h-2 bg-cscx-gray-800 rounded-full",children:c.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"85%"}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Product Adoption"}),c.jsx("span",{className:"text-white",children:"72%"})]}),c.jsx("div",{className:"h-2 bg-cscx-gray-800 rounded-full",children:c.jsx("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:"72%"}})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Support Sentiment"}),c.jsx("span",{className:"text-white",children:"90%"})]}),c.jsx("div",{className:"h-2 bg-cscx-gray-800 rounded-full",children:c.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"90%"}})})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:"12"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Total Meetings"})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:"48"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Emails Sent"})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:"3"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Open Tasks"})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-green-400",children:"98%"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"CSAT Score"})]})]})]}),p==="activity"&&c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Activity Timeline"}),c.jsx("button",{className:"text-sm text-cscx-accent hover:underline",children:"+ Add Activity"})]}),c.jsx("div",{className:"space-y-4",children:Ap.map((C,D)=>c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-cscx-gray-800 rounded-full flex items-center justify-center text-lg",children:S(C.type)}),D<Ap.length-1&&c.jsx("div",{className:"w-px h-full bg-cscx-gray-800 my-2"})]}),c.jsxs("div",{className:"flex-1 pb-4",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:C.title}),C.description&&c.jsx("p",{className:"text-sm text-cscx-gray-400 mt-1",children:C.description})]}),c.jsx("span",{className:"text-xs text-cscx-gray-500",children:A(C.date)})]}),C.user&&c.jsxs("p",{className:"text-xs text-cscx-gray-500 mt-2",children:["by ",C.user]})]})]},C.id))})]}),p==="contracts"&&c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contract Details"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-cscx-gray-800 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-white font-medium",children:"Enterprise Plan"}),c.jsx("span",{className:"px-2 py-1 text-xs bg-green-500/20 text-green-400 rounded",children:"Active"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-cscx-gray-400",children:"Start Date"}),c.jsx("p",{className:"text-white",children:"Jan 1, 2026"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-cscx-gray-400",children:"End Date"}),c.jsx("p",{className:"text-white",children:_(i.renewal_date)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-cscx-gray-400",children:"Contract Value"}),c.jsx("p",{className:"text-cscx-accent font-medium",children:w(i.arr)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-cscx-gray-400",children:"Billing"}),c.jsx("p",{className:"text-white",children:"Annual"})]})]})]}),c.jsxs("div",{className:"p-4 border border-dashed border-cscx-gray-700 rounded-lg text-center",children:[c.jsx("p",{className:"text-cscx-gray-400 text-sm",children:"Upload a new contract to see detailed entitlements"}),c.jsx("button",{className:"mt-2 text-sm text-cscx-accent hover:underline",children:"Upload Contract"})]})]})]}),p==="contacts"&&c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Contacts"}),c.jsx("button",{className:"text-sm text-cscx-accent hover:underline",children:"+ Add Contact"})]}),c.jsxs("div",{className:"space-y-3",children:[i.primary_contact&&c.jsxs("div",{className:"p-4 bg-cscx-gray-800 rounded-lg flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-cscx-accent rounded-full flex items-center justify-center text-white font-medium",children:i.primary_contact.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:i.primary_contact.name}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:i.primary_contact.title})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"px-2 py-1 text-xs bg-cscx-accent/20 text-cscx-accent rounded",children:"Primary"}),c.jsx("a",{href:`mailto:${i.primary_contact.email}`,className:"text-cscx-gray-400 hover:text-white",children:i.primary_contact.email})]})]}),c.jsx("div",{className:"p-4 border border-dashed border-cscx-gray-700 rounded-lg text-center",children:c.jsx("p",{className:"text-cscx-gray-400 text-sm",children:"Add more contacts to track all stakeholders"})})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[i.primary_contact&&c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-cscx-gray-400 uppercase tracking-wider mb-4",children:"Primary Contact"}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-cscx-accent rounded-full flex items-center justify-center text-white font-bold text-lg",children:i.primary_contact.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:i.primary_contact.name}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:i.primary_contact.title})]})]}),c.jsx("div",{className:"space-y-2",children:c.jsxs("a",{href:`mailto:${i.primary_contact.email}`,className:"flex items-center gap-2 text-sm text-cscx-gray-300 hover:text-cscx-accent",children:[c.jsx("span",{children:"\\u2709\\ufe0f"}),i.primary_contact.email]})}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"flex-1 px-3 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors",children:"Send Email"}),c.jsx("button",{className:"flex-1 px-3 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors",children:"Schedule"})]})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-cscx-gray-400 uppercase tracking-wider mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{className:"w-full px-4 py-3 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{children:"\\ud83d\\udcc5"}),"Schedule Meeting"]}),c.jsxs("button",{className:"w-full px-4 py-3 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{children:"\\u2709\\ufe0f"}),"Send Email"]}),c.jsxs("button",{className:"w-full px-4 py-3 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{children:"\\ud83d\\udcdd"}),"Add Note"]}),c.jsxs("button",{className:"w-full px-4 py-3 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{children:"\\u2705"}),"Create Task"]})]})]}),N!==null&&N<90&&c.jsx("div",{className:`rounded-xl p-4 ${N<30?"bg-red-500/10 border border-red-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-xl",children:N<30?"":""}),c.jsxs("div",{children:[c.jsxs("p",{className:`font-medium ${N<30?"text-red-400":"text-yellow-400"}`,children:["Renewal ",N<30?"Urgent":"Coming Up"]}),c.jsxs("p",{className:"text-sm text-cscx-gray-400 mt-1",children:[N," days until renewal on ",_(i.renewal_date)]}),c.jsx("button",{className:"mt-2 text-sm text-cscx-accent hover:underline",children:"Start Renewal Process"})]})]})}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-sm font-medium text-cscx-gray-400 uppercase tracking-wider mb-2",children:"Customer Since"}),c.jsx("p",{className:"text-white",children:_(i.created_at)})]})]})]})]})};function vc(t,n){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(a[i[o]]=t[i[o]]);return a}function B1(t,n,a,i){function o(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function f(y){try{p(i.next(y))}catch(x){d(x)}}function m(y){try{p(i.throw(y))}catch(x){d(x)}}function p(y){y.done?u(y.value):o(y.value).then(f,m)}p((i=i.apply(t,n||[])).next())})}const H1=t=>t?(...n)=>t(...n):(...n)=>fetch(...n);class af extends Error{constructor(n,a="FunctionsError",i){super(n),this.name=a,this.context=i}}class q1 extends af{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Tp extends af{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Cp extends af{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Oh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Oh||(Oh={}));class I1{constructor(n,{headers:a={},customFetch:i,region:o=Oh.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=H1(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return B1(this,arguments,void 0,function*(a,i={}){var o;let u,d;try{const{headers:f,method:m,body:p,signal:y,timeout:x}=i;let v={},{region:w}=i;w||(w=this.region);const _=new URL(`${this.url}/${a}`);w&&w!=="any"&&(v["x-region"]=w,_.searchParams.set("forceFunctionRegion",w));let A;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(v["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(v["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let E=y;x&&(d=new AbortController,u=setTimeout(()=>d.abort(),x),y?(E=d.signal,y.addEventListener("abort",()=>d.abort())):E=d.signal);const S=yield this.fetch(_.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),f),body:A,signal:E}).catch(D=>{throw new q1(D)}),N=S.headers.get("x-relay-error");if(N&&N==="true")throw new Tp(S);if(!S.ok)throw new Cp(S);let j=((o=S.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield S.json():j==="application/octet-stream"||j==="application/pdf"?C=yield S.blob():j==="text/event-stream"?C=S:j==="multipart/form-data"?C=yield S.formData():C=yield S.text(),{data:C,error:null,response:S}}catch(f){return{data:null,error:f,response:f instanceof Cp||f instanceof Tp?f.context:void 0}}finally{u&&clearTimeout(u)}})}}var V1=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},G1=class{constructor(t){var n,a;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(a=t.isMaybeSingle)!==null&&a!==void 0?a:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,f=null,m=null,p=u.status,y=u.statusText;if(u.ok){var x,v;if(a.method!=="HEAD"){var w;const S=await u.text();S===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((w=a.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?f=S:f=JSON.parse(S))}const A=(x=a.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),E=(v=u.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");A&&E&&E.length>1&&(m=parseInt(E[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var _;const A=await u.text();try{d=JSON.parse(A),Array.isArray(d)&&u.status===404&&(f=[],d=null,p=200,y="OK")}catch{u.status===404&&A===""?(p=204,y="No Content"):d={message:A}}if(d&&a.isMaybeSingle&&(!(d==null||(_=d.details)===null||_===void 0)&&_.includes("0 rows"))&&(d=null,p=200,y="OK"),d&&a.shouldThrowOnError)throw new V1(d)}return{error:d,data:f,count:m,status:p,statusText:y}});return this.shouldThrowOnError||(o=o.catch(u=>{var d;let f="";const m=u==null?void 0:u.cause;if(m){var p,y,x,v;const _=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",A=(y=m==null?void 0:m.code)!==null&&y!==void 0?y:"";f=`${(x=u==null?void 0:u.name)!==null&&x!==void 0?x:"FetchError"}: ${u==null?void 0:u.message}`,f+=`

Caused by: ${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"Error"}: ${_}`,A&&(f+=` (${A})`),m!=null&&m.stack&&(f+=`
${m.stack}`)}else{var w;f=(w=u==null?void 0:u.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(t,n)}returns(){return this}overrideTypes(){return this}},P1=class extends G1{select(t){let n=!1;const a=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:a,foreignTable:i,referencedTable:o=i}={}){const u=o?`${o}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${t}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"offset":`${i}.offset`,u=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(u,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:a=!1,buffers:i=!1,wal:o=!1,format:u="text"}={}){var d;const f=[t?"analyze":null,n?"verbose":null,a?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const kp=new RegExp("[,()]");var Sr=class extends P1{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}regexMatch(t,n){return this.url.searchParams.append(t,`match.${n}`),this}regexIMatch(t,n){return this.url.searchParams.append(t,`imatch.${n}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}isDistinct(t,n){return this.url.searchParams.append(t,`isdistinct.${n}`),this}in(t,n){const a=Array.from(new Set(n)).map(i=>typeof i=="string"&&kp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}notIn(t,n){const a=Array.from(new Set(n)).map(i=>typeof i=="string"&&kp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${a})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:a,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${o}fts${u}.${n}`),this}match(t){return Object.entries(t).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(t,n,a){return this.url.searchParams.append(t,`not.${n}.${a}`),this}or(t,{foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,a){return this.url.searchParams.append(t,`${n}.${a}`),this}},Y1=class{constructor(t,{headers:n={},schema:a,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=a,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,n){const{head:a=!1,count:i}=n??{},o=a?"HEAD":"GET";let u=!1;const d=(t??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",d),i&&m.append("Prefer",`count=${i}`),new Sr({method:o,url:f,headers:m,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:u,headers:d}=this.cloneRequestState();if(n&&d.append("Prefer",`count=${n}`),a||d.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);u.searchParams.set("columns",m.join(","))}}return new Sr({method:o,url:u,headers:d,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:a=!1,count:i,defaultToNull:o=!0}={}){var u;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&f.searchParams.set("on_conflict",n),i&&m.append("Prefer",`count=${i}`),o||m.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);f.searchParams.set("columns",y.join(","))}}return new Sr({method:d,url:f,headers:m,schema:this.schema,body:t,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(t,{count:n}={}){var a;const i="PATCH",{url:o,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new Sr({method:i,url:o,headers:u,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:t}={}){var n;const a="DELETE",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Sr({method:a,url:i,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},X1=class oy{constructor(n,{headers:a={},schema:i,fetch:o}={}){this.url=n,this.headers=new Headers(a),this.schemaName=i,this.fetch=o}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Y1(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new oy(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,a={},{head:i=!1,get:o=!1,count:u}={}){var d;let f;const m=new URL(`${this.url}/rpc/${n}`);let p;const y=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(y)),x=i&&Object.values(a).some(y);x?(f="POST",p=a):i||o?(f=i?"HEAD":"GET",Object.entries(a).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{m.searchParams.append(w,_)})):(f="POST",p=a);const v=new Headers(this.headers);return x?v.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&v.set("Prefer",`count=${u}`),new Sr({method:f,url:m,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class K1{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const a=globalThis.process;if(a){const i=a.versions;if(i&&i.node){const o=i.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const i=this.getWebSocketConstructor();return new i(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Q1="2.90.1",J1=`realtime-js/${Q1}`,cy="1.0.0",Z1="2.0.0",Op=cy,Rh=1e4,F1=1e3,W1=100;var Hs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Hs||(Hs={}));var gt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(gt||(gt={}));var xn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xn||(xn={}));var Mh;(function(t){t.websocket="websocket"})(Mh||(Mh={}));var va;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(va||(va={}));class e2{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,i;const o=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var a,i;const o=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(n,a,i){var o,u;const d=n.topic,f=(o=n.ref)!==null&&o!==void 0?o:"",m=(u=n.join_ref)!==null&&u!==void 0?u:"",p=n.payload.event,y=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+d.length+p.length+x.length,w=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(w),A=0;_.setUint8(A++,this.KINDS.userBroadcastPush),_.setUint8(A++,m.length),_.setUint8(A++,f.length),_.setUint8(A++,d.length),_.setUint8(A++,p.length),_.setUint8(A++,x.length),_.setUint8(A++,a),Array.from(m,S=>_.setUint8(A++,S.charCodeAt(0))),Array.from(f,S=>_.setUint8(A++,S.charCodeAt(0))),Array.from(d,S=>_.setUint8(A++,S.charCodeAt(0))),Array.from(p,S=>_.setUint8(A++,S.charCodeAt(0))),Array.from(x,S=>_.setUint8(A++,S.charCodeAt(0)));var E=new Uint8Array(w.byteLength+i.byteLength);return E.set(new Uint8Array(w),0),E.set(new Uint8Array(i),w.byteLength),E.buffer}decode(n,a){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return a(i)}if(typeof n=="string"){const i=JSON.parse(n),[o,u,d,f,m]=i;return a({join_ref:o,ref:u,topic:d,event:f,payload:m})}return a({})}_binaryDecode(n){const a=new DataView(n),i=a.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,o)}}_decodeUserBroadcast(n,a,i){const o=a.getUint8(1),u=a.getUint8(2),d=a.getUint8(3),f=a.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(n.slice(m,m+o));m=m+o;const y=i.decode(n.slice(m,m+u));m=m+u;const x=i.decode(n.slice(m,m+d));m=m+d;const v=n.slice(m,n.byteLength),w=f===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,_={type:this.BROADCAST_EVENT,event:y,payload:w};return d>0&&(_.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>a.includes(i)))}}let uy=class{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const Rp=(t,n,a={})=>{var i;const o=(i=a.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((u,d)=>(u[d]=t2(d,t,n,o),u),{}):{}},t2=(t,n,a,i)=>{const o=n.find(f=>f.name===t),u=o==null?void 0:o.type,d=a[t];return u&&!i.includes(u)?dy(u,d):Dh(d)},dy=(t,n)=>{if(t.charAt(0)==="_"){const a=t.slice(1,t.length);return r2(n,a)}switch(t){case Ye.bool:return n2(n);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return s2(n);case Ye.json:case Ye.jsonb:return a2(n);case Ye.timestamp:return i2(n);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Dh(n);default:return Dh(n)}},Dh=t=>t,n2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},s2=t=>{if(typeof t=="string"){const n=parseFloat(t);if(!Number.isNaN(n))return n}return t},a2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},r2=(t,n)=>{if(typeof t!="string")return t;const a=t.length-1,i=t[a];if(t[0]==="{"&&i==="}"){let u;const d=t.slice(1,a);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(f=>dy(n,f))}return t},i2=t=>typeof t=="string"?t.replace(" ","T"):t,hy=t=>{const n=new URL(t);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class rh{constructor(n,a,i={},o=Rh){this.channel=n,this.event=a,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var i;return this._hasReceived(n)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Mp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Mp||(Mp={}));class Ii{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ii.syncState(this.state,o,u,d),this.pendingDiffs.forEach(m=>{this.state=Ii.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ii.syncDiff(this.state,o,u,d),f())}),this.onJoin((o,u,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:d})}),this.onLeave((o,u,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,i,o){const u=this.cloneDeep(n),d=this.transformState(a),f={},m={};return this.map(u,(p,y)=>{d[p]||(m[p]=y)}),this.map(d,(p,y)=>{const x=u[p];if(x){const v=y.map(E=>E.presence_ref),w=x.map(E=>E.presence_ref),_=y.filter(E=>w.indexOf(E.presence_ref)<0),A=x.filter(E=>v.indexOf(E.presence_ref)<0);_.length>0&&(f[p]=_),A.length>0&&(m[p]=A)}else f[p]=y}),this.syncDiff(u,{joins:f,leaves:m},i,o)}static syncDiff(n,a,i,o){const{joins:u,leaves:d}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(f,m)=>{var p;const y=(p=n[f])!==null&&p!==void 0?p:[];if(n[f]=this.cloneDeep(m),y.length>0){const x=n[f].map(w=>w.presence_ref),v=y.filter(w=>x.indexOf(w.presence_ref)<0);n[f].unshift(...v)}i(f,y,m)}),this.map(d,(f,m)=>{let p=n[f];if(!p)return;const y=m.map(x=>x.presence_ref);p=p.filter(x=>y.indexOf(x.presence_ref)<0),n[f]=p,o(f,p,m),p.length===0&&delete n[f]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(i=>a(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,i)=>{const o=n[i];return"metas"in o?a[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[i]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Dp||(Dp={}));var Vi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vi||(Vi={}));var ns;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ns||(ns={}));class Ar{constructor(n,a={config:{}},i){var o,u;if(this.topic=n,this.params=a,this.socket=i,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new rh(this,xn.join,this.params,this.timeout),this.rejoinTimer=new uy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xn.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new Ii(this),this.broadcastEndpointURL=hy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var i,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[Vi.PRESENCE]&&this.bindings[Vi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},v={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(w=>n==null?void 0:n(ns.CHANNEL_ERROR,w)),this._onClose(()=>n==null?void 0:n(ns.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:w})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){n==null||n(ns.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,E=(_=A==null?void 0:A.length)!==null&&_!==void 0?_:0,S=[];for(let N=0;N<E;N++){const j=A[N],{filter:{event:C,schema:D,table:z,filter:R}}=j,L=w&&w[N];if(L&&L.event===C&&Ar.isFilterValueEqual(L.schema,D)&&Ar.isFilterValueEqual(L.table,z)&&Ar.isFilterValueEqual(L.filter,R))S.push(Object.assign(Object.assign({},j),{id:L.id}));else{this.unsubscribe(),this.state=gt.errored,n==null||n(ns.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,n&&n(ns.SUBSCRIBED);return}}).receive("error",w=>{this.state=gt.errored,n==null||n(ns.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(ns.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,i){return this.state===gt.joined&&n===Vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,i)}async httpSend(n,a,i={}){var o;if(a==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(n,a={}){var i,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=n,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,f,m;const p=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),p.receive("ok",()=>u("ok")),p.receive("error",()=>u("error")),p.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=gt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new rh(this,xn.leave,{},n),i.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(n,a,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),d}_push(n,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new rh(this,n,a,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>W1){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,i){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,i){var o,u;const d=n.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=xn;if(i&&[f,m,p,y].indexOf(d)>=0&&i!==this._joinRef())return;let v=this._onMessage(d,a,i);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var _,A,E;return((_=w.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(A=w.filter)===null||A===void 0?void 0:A.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===d}).map(w=>w.callback(v,i)):(u=this.bindings[d])===null||u===void 0||u.filter(w=>{var _,A,E,S,N,j,C,D;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in w){const z=w.id,R=(_=w.filter)===null||_===void 0?void 0:_.event;return z&&((A=a.ids)===null||A===void 0?void 0:A.includes(z))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((E=a.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))&&(!(!((S=w.filter)===null||S===void 0)&&S.table)||w.filter.table===((N=a.data)===null||N===void 0?void 0:N.table))}else{const z=(C=(j=w==null?void 0:w.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return z==="*"||z===((D=a==null?void 0:a.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===d}).map(w=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:A,table:E,commit_timestamp:S,type:N,errors:j}=_;v=Object.assign(Object.assign({},{schema:A,table:E,commit_timestamp:S,eventType:N,new:{},old:{},errors:j}),this._getPayloadRecords(_))}w.callback(v,i)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,i){const o=n.toLocaleLowerCase(),u={type:o,filter:a,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,a){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Ar.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const i in n)if(n[i]!==a[i])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(xn.close,{},n)}_onError(n){this._on(xn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=Rp(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=Rp(n.columns,n.old_record)),a}}const ih=()=>{},Ho={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l2=[1e3,2e3,5e3,1e4],o2=1e4,c2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u2{constructor(n,a){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rh,this.transport=null,this.heartbeatIntervalMs=Ho.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ih,this.ref=0,this.reconnectTimer=null,this.vsn=Op,this.logger=ih,this.conn=null,this.sendBuffer=[],this.serializer=new e2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((i=a==null?void 0:a.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${Mh.websocket}`,this.httpEndpoint=hy(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=K1.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,i){this.logger(n,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Hs.connecting:return va.Connecting;case Hs.open:return va.Open;case Hs.closing:return va.Closing;default:return va.Closed}}isConnected(){return this.connectionState()===va.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const i=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new Ar(`realtime:${n}`,a,this);return this.channels.push(u),u}}push(n){const{topic:a,event:i,payload:o,ref:u}=n,d=()=>{this.encode(n,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${a} ${i} (${u})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(F1,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Ho.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply"&&a.ref&&a.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:u,ref:d}=a,f=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${i} ${o} ${f}`.trim(),u),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,u,d)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Hs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Hs.open||this.conn.readyState===Hs.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(xn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const i=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${i}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const i=new Blob([c2],{type:"application/javascript"});a=URL.createObjectURL(i)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,i=!1;if(n)a=n,i=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:J1};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(xn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new uy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ho.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,i,o,u,d,f,m,p,y,x,v,w;switch(this.transport=(a=n==null?void 0:n.transport)!==null&&a!==void 0?a:null,this.timeout=(i=n==null?void 0:n.timeout)!==null&&i!==void 0?i:Rh,this.heartbeatIntervalMs=(o=n==null?void 0:n.heartbeatIntervalMs)!==null&&o!==void 0?o:Ho.HEARTBEAT_INTERVAL,this.worker=(u=n==null?void 0:n.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=n==null?void 0:n.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=n==null?void 0:n.heartbeatCallback)!==null&&f!==void 0?f:ih,this.vsn=(m=n==null?void 0:n.vsn)!==null&&m!==void 0?m:Op,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:(_=>l2[_-1]||o2),this.vsn){case cy:this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((_,A)=>A(JSON.stringify(_))),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:((_,A)=>A(JSON.parse(_)));break;case Z1:this.encode=(v=n==null?void 0:n.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(w=n==null?void 0:n.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var Yi=class extends Error{constructor(t,n){var a;super(t),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((a=n.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function d2(t,n,a){const i=new URL(n,t);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&i.searchParams.set(o,u);return i.toString()}async function h2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function f2(t){const n=t.fetchImpl??globalThis.fetch;return{async request({method:a,path:i,query:o,body:u,headers:d}){const f=d2(t.baseUrl,i,o),m=await h2(t.auth),p=await n(f,{method:a,headers:{...u?{"Content-Type":"application/json"}:{},...m,...d},body:u?JSON.stringify(u):void 0}),y=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),v=x&&y?JSON.parse(y):y;if(!p.ok){const w=x?v:void 0,_=w==null?void 0:w.error;throw new Yi((_==null?void 0:_.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:w})}return{status:p.status,headers:p.headers,data:v}}}}function qo(t){return t.join("")}var m2=class{constructor(t,n=""){this.client=t,this.prefix=n}async listNamespaces(t){const n=t?{parent:qo(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,n){const a={namespace:t.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qo(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qo(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qo(t.namespace)}`}),!0}catch(n){if(n instanceof Yi&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(t,n){try{return await this.createNamespace(t,n)}catch(a){if(a instanceof Yi&&a.status===409)return;throw a}}};function pr(t){return t.join("")}var g2=class{constructor(t,n="",a){this.client=t,this.prefix=n,this.accessDelegation=a}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables`})).data.identifiers}async createTable(t,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(t,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables/${t.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(t,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables/${t.name}`,headers:n})).data.metadata}async tableExists(t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pr(t.namespace)}/tables/${t.name}`,headers:n}),!0}catch(a){if(a instanceof Yi&&a.status===404)return!1;throw a}}async createTableIfNotExists(t,n){try{return await this.createTable(t,n)}catch(a){if(a instanceof Yi&&a.status===409)return await this.loadTable({namespace:t.namespace,name:n.name});throw a}}},p2=class{constructor(t){var i;let n="v1";t.catalogName&&(n+=`/${t.catalogName}`);const a=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=f2({baseUrl:a,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new m2(this.client,n),this.tableOps=new g2(this.client,n,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,n){return this.namespaceOps.createNamespace(t,n)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,n){return this.tableOps.createTable(t,n)}async updateTable(t,n){return this.tableOps.updateTable(t,n)}async dropTable(t,n){await this.tableOps.dropTable(t,n)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,n){return this.namespaceOps.createNamespaceIfNotExists(t,n)}async createTableIfNotExists(t,n){return this.tableOps.createTableIfNotExists(t,n)}},bc=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Fe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var x2=class extends bc{constructor(t,n,a){super(t),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zh=class extends bc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}};const rf=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),y2=()=>Response,Uh=t=>{if(Array.isArray(t))return t.map(a=>Uh(a));if(typeof t=="function"||t!==Object(t))return t;const n={};return Object.entries(t).forEach(([a,i])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=Uh(i)}),n},v2=t=>{if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},b2=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Xi(t){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xi(t)}function w2(t,n){if(Xi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,n);if(Xi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function _2(t){var n=w2(t,"string");return Xi(n)=="symbol"?n:n+""}function S2(t,n,a){return(n=_2(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function zp(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,i)}return a}function je(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?zp(Object(a),!0).forEach(function(i){S2(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zp(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}const lh=t=>{var n;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(n=t.error)===null||n===void 0?void 0:n.message)||JSON.stringify(t)},j2=async(t,n,a)=>{t instanceof await y2()&&!(a!=null&&a.noResolveJson)?t.json().then(i=>{const o=t.status||500,u=(i==null?void 0:i.statusCode)||o+"";n(new x2(lh(i),o,u))}).catch(i=>{n(new zh(lh(i),i))}):n(new zh(lh(t),t))},N2=(t,n,a,i)=>{const o={method:t,headers:(n==null?void 0:n.headers)||{}};return t==="GET"||!i?o:(v2(i)?(o.headers=je({"Content-Type":"application/json"},n==null?void 0:n.headers),o.body=JSON.stringify(i)):o.body=i,n!=null&&n.duplex&&(o.duplex=n.duplex),je(je({},o),a))};async function ol(t,n,a,i,o,u){return new Promise((d,f)=>{t(a,N2(n,i,o,u)).then(m=>{if(!m.ok)throw m;return i!=null&&i.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>j2(m,f,i))})}async function Ki(t,n,a,i){return ol(t,"GET",n,a,i)}async function pn(t,n,a,i,o){return ol(t,"POST",n,i,o,a)}async function $h(t,n,a,i,o){return ol(t,"PUT",n,i,o,a)}async function E2(t,n,a,i){return ol(t,"HEAD",n,je(je({},a),{},{noResolveJson:!0}),i)}async function lf(t,n,a,i,o){return ol(t,"DELETE",n,i,o,a)}var A2=class{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}};let fy;fy=Symbol.toStringTag;var T2=class{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[fy]="BlobDownloadBuilder",this.promise=null}asStream(){return new A2(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}};const C2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Up={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var k2=class{constructor(t,n={},a,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=a,this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,n,a,i){var o=this;try{let u;const d=je(je({},Up),i);let f=je(je({},o.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),i!=null&&i.headers&&(f=je(je({},f),i.headers));const p=o._removeEmptyFolders(n),y=o._getFinalPath(p),x=await(t=="PUT"?$h:pn)(o.fetch,`${o.url}/object/${y}`,u,je({headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}}async upload(t,n,a){return this.uploadOrUpdate("POST",t,n,a)}async uploadToSignedUrl(t,n,a,i){var o=this;const u=o._removeEmptyFolders(t),d=o._getFinalPath(u),f=new URL(o.url+`/object/upload/sign/${d}`);f.searchParams.set("token",n);try{let m;const p=je({upsert:Up.upsert},i),y=je(je({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",p.cacheControl)):(m=a,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:u,fullPath:(await $h(o.fetch,f.toString(),m,{headers:y})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(Fe(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(t,n){var a=this;try{let i=a._getFinalPath(t);const o=je({},a.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const u=await pn(a.fetch,`${a.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(a.url+u.url),f=d.searchParams.get("token");if(!f)throw new bc("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async update(t,n,a){return this.uploadOrUpdate("PUT",t,n,a)}async move(t,n,a){var i=this;try{return{data:await pn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}async copy(t,n,a){var i=this;try{return{data:{path:(await pn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}async createSignedUrl(t,n,a){var i=this;try{let o=i._getFinalPath(t),u=await pn(i.fetch,`${i.url}/object/sign/${o}`,je({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:i.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${i.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}async createSignedUrls(t,n,a){var i=this;try{const o=await pn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:n,paths:t},{headers:i.headers}),u=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>je(je({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${u}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>Ki(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new T2(d,this.shouldThrowOnError)}async info(t){var n=this;const a=n._getFinalPath(t);try{return{data:Uh(await Ki(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async exists(t){var n=this;const a=n._getFinalPath(t);try{return await E2(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i)&&i instanceof zh){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,n){const a=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${f}`)}}}async remove(t){var n=this;try{return{data:await lf(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:t},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async list(t,n,a){var i=this;try{const o=je(je(je({},C2),n),{},{prefix:t||""});return{data:await pn(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},a),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}async listV2(t,n){var a=this;try{const i=je({},t);return{data:await pn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,i,{headers:a.headers},n),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}};const my="2.90.1",gy={"X-Client-Info":`storage-js/${my}`};var O2=class{constructor(t,n={},a,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=je(je({},gy),n),this.fetch=rf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var n=this;try{const a=n.listBucketOptionsToQueryString(t);return{data:await Ki(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async getBucket(t){var n=this;try{return{data:await Ki(n.fetch,`${n.url}/bucket/${t}`,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async createBucket(t,n={public:!1}){var a=this;try{return{data:await pn(a.fetch,`${a.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async updateBucket(t,n){var a=this;try{return{data:await $h(a.fetch,`${a.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async emptyBucket(t){var n=this;try{return{data:await pn(n.fetch,`${n.url}/bucket/${t}/empty`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async deleteBucket(t){var n=this;try{return{data:await lf(n.fetch,`${n.url}/bucket/${t}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},R2=class{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=je(je({},gy),n),this.fetch=rf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var n=this;try{return{data:await pn(n.fetch,`${n.url}/bucket`,{name:t},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async listBuckets(t){var n=this;try{const a=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&a.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&a.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&a.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&a.set("sortOrder",t.sortOrder),t!=null&&t.search&&a.set("search",t.search);const i=a.toString(),o=i?`${n.url}/bucket?${i}`:`${n.url}/bucket`;return{data:await Ki(n.fetch,o,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async deleteBucket(t){var n=this;try{return{data:await lf(n.fetch,`${n.url}/bucket/${t}`,{},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}from(t){var n=this;if(!b2(t))throw new bc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new p2({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const d=o[u];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(o,f),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}};const of={"X-Client-Info":`storage-js/${my}`,"Content-Type":"application/json"};var py=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Jt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var oh=class extends py{constructor(t,n,a){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},M2=class extends py{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}};const cf=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),D2=t=>{if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$p=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),z2=async(t,n,a)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(a!=null&&a.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||i+"";n(new oh($p(u),i,d))}).catch(()=>{const u=i+"";n(new oh(o.statusText||`HTTP ${i} error`,i,u))});else{const u=i+"";n(new oh(o.statusText||`HTTP ${i} error`,i,u))}}else n(new M2($p(t),t))},U2=(t,n,a,i)=>{const o={method:t,headers:(n==null?void 0:n.headers)||{}};return i?(D2(i)?(o.headers=je({"Content-Type":"application/json"},n==null?void 0:n.headers),o.body=JSON.stringify(i)):o.body=i,je(je({},o),a)):o};async function $2(t,n,a,i,o,u){return new Promise((d,f)=>{t(a,U2(n,i,o,u)).then(m=>{if(!m.ok)throw m;if(i!=null&&i.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>z2(m,f,i))})}async function Zt(t,n,a,i,o){return $2(t,"POST",n,i,o,a)}var L2=class{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=je(je({},of),n),this.fetch=cf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/CreateIndex`,t,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async getIndex(t,n){var a=this;try{return{data:await Zt(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}}async listIndexes(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/ListIndexes`,t,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async deleteIndex(t,n){var a=this;try{return{data:await Zt(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}}},B2=class{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=je(je({},of),n),this.fetch=cf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var n=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Zt(n.fetch,`${n.url}/PutVectors`,t,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async getVectors(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/GetVectors`,t,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async listVectors(t){var n=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Zt(n.fetch,`${n.url}/ListVectors`,t,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async queryVectors(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/QueryVectors`,t,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async deleteVectors(t){var n=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Zt(n.fetch,`${n.url}/DeleteVectors`,t,{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}},H2=class{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=je(je({},of),n),this.fetch=cf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async getBucket(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:t},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async listBuckets(t={}){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/ListVectorBuckets`,t,{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}async deleteBucket(t){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:n.headers})||{},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}}},q2=class extends H2{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new I2(this.url,this.headers,t,this.fetch)}async createBucket(t){var n=()=>super.createBucket,a=this;return n().call(a,t)}async getBucket(t){var n=()=>super.getBucket,a=this;return n().call(a,t)}async listBuckets(t={}){var n=()=>super.listBuckets,a=this;return n().call(a,t)}async deleteBucket(t){var n=()=>super.deleteBucket,a=this;return n().call(a,t)}},I2=class extends L2{constructor(t,n,a,i){super(t,n,i),this.vectorBucketName=a}async createIndex(t){var n=()=>super.createIndex,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(t={}){var n=()=>super.listIndexes,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(t){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,t)}async deleteIndex(t){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,t)}index(t){return new V2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},V2=class extends B2{constructor(t,n,a,i,o){super(t,n,o),this.vectorBucketName=a,this.indexName=i}async putVectors(t){var n=()=>super.putVectors,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(t){var n=()=>super.getVectors,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(t={}){var n=()=>super.listVectors,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(t){var n=()=>super.queryVectors,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(t){var n=()=>super.deleteVectors,a=this;return n().call(a,je(je({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},G2=class extends O2{constructor(t,n={},a,i){super(t,n,a,i)}from(t){return new k2(this.url,this.headers,t,this.fetch)}get vectors(){return new q2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new R2(this.url+"/iceberg",this.headers,this.fetch)}};const xy="2.90.1",jr=30*1e3,Lh=3,ch=Lh*jr,P2="http://localhost:9999",Y2="supabase.auth.token",X2={"X-Client-Info":`gotrue-js/${xy}`},Bh="X-Supabase-Api-Version",yy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q2=600*1e3;class Qi extends Error{constructor(n,a,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=i}}function xe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class J2 extends Qi{constructor(n,a,i){super(n,a,i),this.name="AuthApiError",this.status=a,this.code=i}}function Z2(t){return xe(t)&&t.name==="AuthApiError"}class ba extends Qi{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class is extends Qi{constructor(n,a,i,o){super(n,i,o),this.name=a,this.status=i}}class Kt extends is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F2(t){return xe(t)&&t.name==="AuthSessionMissingError"}class xr extends is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Io extends is{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Vo extends is{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W2(t){return xe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Lp extends is{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eS extends is{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Hh extends is{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function uh(t){return xe(t)&&t.name==="AuthRetryableFetchError"}class Bp extends is{constructor(n,a,i){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=i}}class qh extends is{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hp=` 	
\r=`.split(""),tS=(()=>{const t=new Array(128);for(let n=0;n<t.length;n+=1)t[n]=-1;for(let n=0;n<Hp.length;n+=1)t[Hp[n].charCodeAt(0)]=-2;for(let n=0;n<rc.length;n+=1)t[rc[n].charCodeAt(0)]=n;return t})();function qp(t,n,a){if(t!==null)for(n.queue=n.queue<<8|t,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a(rc[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a(rc[i]),n.queuedBits-=6}}function vy(t,n,a){const i=tS[t];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ip(t){const n=[],a=d=>{n.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=d=>{aS(d,i,a)};for(let d=0;d<t.length;d+=1)vy(t.charCodeAt(d),o,u);return n.join("")}function nS(t,n){if(t<=127){n(t);return}else if(t<=2047){n(192|t>>6),n(128|t&63);return}else if(t<=65535){n(224|t>>12),n(128|t>>6&63),n(128|t&63);return}else if(t<=1114111){n(240|t>>18),n(128|t>>12&63),n(128|t>>6&63),n(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sS(t,n){for(let a=0;a<t.length;a+=1){let i=t.charCodeAt(a);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}nS(i,n)}}function aS(t,n,a){if(n.utf8seq===0){if(t<=127){a(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=t&31;else if(n.utf8seq===3)n.codepoint=t&15;else if(n.utf8seq===4)n.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|t&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function kr(t){const n=[],a={queue:0,queuedBits:0},i=o=>{n.push(o)};for(let o=0;o<t.length;o+=1)vy(t.charCodeAt(o),a,i);return new Uint8Array(n)}function rS(t){const n=[];return sS(t,a=>n.push(a)),new Uint8Array(n)}function wa(t){const n=[],a={queue:0,queuedBits:0},i=o=>{n.push(o)};return t.forEach(o=>qp(o,a,i)),qp(null,a,i),n.join("")}function iS(t){return Math.round(Date.now()/1e3)+t}function lS(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",ga={tested:!1,writable:!1},by=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ga.tested)return ga.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ga.tested=!0,ga.writable=!0}catch{ga.tested=!0,ga.writable=!1}return ga.writable};function oS(t){const n={},a=new URL(t);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return a.searchParams.forEach((i,o)=>{n[o]=i}),n}const wy=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),cS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Nr=async(t,n,a)=>{await t.setItem(n,JSON.stringify(a))},pa=async(t,n)=>{const a=await t.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},_t=async(t,n)=>{await t.removeItem(n)};class wc{constructor(){this.promise=new wc.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}wc.promiseConstructor=Promise;function dh(t){const n=t.split(".");if(n.length!==3)throw new qh("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!K2.test(n[i]))throw new qh("JWT not in base64url format");return{header:JSON.parse(Ip(n[0])),payload:JSON.parse(Ip(n[1])),signature:kr(n[2]),raw:{header:n[0],payload:n[1]}}}async function uS(t){return await new Promise(n=>{setTimeout(()=>n(null),t)})}function dS(t,n){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await t(u);if(!n(u,null,d)){i(d);return}}catch(d){if(!n(u,d)){o(d);return}}})()})}function hS(t){return("0"+t.toString(16)).substr(-2)}function fS(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(n),Array.from(n,hS).join("")}async function mS(t){const a=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function gS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const a=await mS(t);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yr(t,n,a=!1){const i=fS();let o=i;a&&(o+="/PASSWORD_RECOVERY"),await Nr(t,`${n}-code-verifier`,o);const u=await gS(i);return[u,i===u?"plain":"s256"]}const pS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xS(t){const n=t.headers.get(Bh);if(!n||!n.match(pS))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function yS(t){if(!t)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(t<=n)throw new Error("JWT has expired")}function vS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vr(t){if(!bS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hh(){const t={};return new Proxy(t,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wS(t,n){return new Proxy(t,{get:(a,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,i,o)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,i,o)}})}function Vp(t){return JSON.parse(JSON.stringify(t))}const xa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_S=[502,503,504];async function Gp(t){var n;if(!cS(t))throw new Hh(xa(t),0);if(_S.includes(t.status))throw new Hh(xa(t),t.status);let a;try{a=await t.json()}catch(u){throw new ba(xa(u),u)}let i;const o=xS(t);if(o&&o.getTime()>=yy["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?i=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(i=a.error_code),i){if(i==="weak_password")throw new Bp(xa(a),t.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Kt}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Bp(xa(a),t.status,a.weak_password.reasons);throw new J2(xa(a),t.status||500,i)}const SS=(t,n,a,i)=>{const o={method:t,headers:(n==null?void 0:n.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),a))};async function Se(t,n,a,i){var o;const u=Object.assign({},i==null?void 0:i.headers);u[Bh]||(u[Bh]=yy["2024-01-01"].name),i!=null&&i.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const d=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await jS(t,n,a+f,{headers:u,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function jS(t,n,a,i,o,u){const d=SS(n,i,o,u);let f;try{f=await t(a,Object.assign({},d))}catch(m){throw console.error(m),new Hh(xa(m),0)}if(f.ok||await Gp(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(m){await Gp(m)}}function gn(t){var n;let a=null;AS(t)&&(a=Object.assign({},t),t.expires_at||(a.expires_at=iS(t.expires_in)));const i=(n=t.user)!==null&&n!==void 0?n:t;return{data:{session:a,user:i},error:null}}function Pp(t){const n=gn(t);return!n.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(n.data.weak_password=t.weak_password),n}function qs(t){var n;return{data:{user:(n=t.user)!==null&&n!==void 0?n:t},error:null}}function NS(t){return{data:t,error:null}}function ES(t){const{action_link:n,email_otp:a,hashed_token:i,redirect_to:o,verification_type:u}=t,d=vc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:n,email_otp:a,hashed_token:i,redirect_to:o,verification_type:u},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function Yp(t){return t}function AS(t){return t.access_token&&t.refresh_token&&t.expires_in}const fh=["global","local","others"];class TS{constructor({url:n="",headers:a={},fetch:i}){this.url=n,this.headers=a,this.fetch=wy(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=fh[0]){if(fh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fh.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,a={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:qs})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:a}=n,i=vc(n,["options"]),o=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:ES,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(xe(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:qs})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,i,o,u,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=n==null?void 0:n.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Yp});if(y.error)throw y.error;const x=await y.json(),v=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(_=>{const A=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);p[`${E}Page`]=A}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(xe(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){vr(n);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:qs})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){vr(n);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:qs})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,a=!1){vr(n);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:qs})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){vr(n.userId);try{const{data:a,error:i}=await Se(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:i}}catch(a){if(xe(a))return{data:null,error:a};throw a}}async _deleteFactor(n){vr(n.userId),vr(n.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,i,o,u,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=n==null?void 0:n.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Yp});if(y.error)throw y.error;const x=await y.json(),v=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(_=>{const A=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);p[`${E}Page`]=A}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(xe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(xe(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(xe(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(xe(a))return{data:null,error:a};throw a}}}function Xp(t={}){return{getItem:n=>t[n]||null,setItem:(n,a)=>{t[n]=a},removeItem:n=>{delete t[n]}}}const br={debug:!!(globalThis&&by()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _y extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class CS extends _y{}async function kS(t,n,a){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await a()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(n===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new CS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(br.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function OS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sy(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function RS(t){return parseInt(t,16)}function MS(t){const n=new TextEncoder().encode(t);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function DS(t){var n;const{chainId:a,domain:i,expirationTime:o,issuedAt:u=new Date,nonce:d,notBefore:f,requestId:m,resources:p,scheme:y,uri:x,version:v}=t;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((n=t.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Sy(t.address),_=y?`${y}://${i}`:i,A=t.statement?`${t.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${w}

${A}`;let S=`URI: ${x}
Version: ${v}
Chain ID: ${a}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(o&&(S+=`
Expiration Time: ${o.toISOString()}`),f&&(S+=`
Not Before: ${f.toISOString()}`),m&&(S+=`
Request ID: ${m}`),p){let N=`
Resources:`;for(const j of p){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);N+=`
- ${j}`}S+=N}return`${E}
${S}`}class ut extends Error{constructor({message:n,code:a,cause:i,name:o}){var u;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=o??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class ic extends ut{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function zS({error:t,options:n}){var a,i,o;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(n.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ut({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return u.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(jy(d)){if(u.rp.id!==d)return new ut({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function US({error:t,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ut({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(jy(i)){if(a.rpId!==i)return new ut({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $S{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const LS=new $S;function BS(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:n,user:a,excludeCredentials:i}=t,o=vc(t,["challenge","user","excludeCredentials"]),u=kr(n).buffer,d=Object.assign(Object.assign({},a),{id:kr(a.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:u,user:d});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:kr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function HS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:n,allowCredentials:a}=t,i=vc(t,["challenge","allowCredentials"]),o=kr(n).buffer,u=Object.assign(Object.assign({},i),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const f=a[d];u.allowCredentials[d]=Object.assign(Object.assign({},f),{id:kr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function qS(t){var n;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const a=t;return{id:t.id,rawId:t.id,response:{attestationObject:wa(new Uint8Array(t.response.attestationObject)),clientDataJSON:wa(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function IS(t){var n;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const a=t,i=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:wa(new Uint8Array(o.authenticatorData)),clientDataJSON:wa(new Uint8Array(o.clientDataJSON)),signature:wa(new Uint8Array(o.signature)),userHandle:o.userHandle?wa(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function jy(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Kp(){var t,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function VS(t){try{const n=await navigator.credentials.create(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ic("Browser returned unexpected credential type",n)}:{data:null,error:new ic("Empty credential response",n)}}catch(n){return{data:null,error:zS({error:n,options:t})}}}async function GS(t){try{const n=await navigator.credentials.get(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ic("Browser returned unexpected credential type",n)}:{data:null,error:new ic("Empty credential response",n)}}catch(n){return{data:null,error:US({error:n,options:t})}}}const PS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lc(...t){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of t)if(o)for(const u in o){const d=o[u];if(d!==void 0)if(Array.isArray(d))i[u]=d;else if(a(d))i[u]=d;else if(n(d)){const f=i[u];n(f)?i[u]=lc(f,d):i[u]=lc(d)}else i[u]=d}return i}function XS(t,n){return lc(PS,t,n||{})}function KS(t,n){return lc(YS,t,n||{})}class QS{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:i,signal:o},u){try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!d)return{data:null,error:f};const m=o??LS.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=XS(d.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:y,error:x}=await VS({publicKey:p,signal:m});return y?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}case"request":{const p=KS(d.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:y,error:x}=await GS(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}}}catch(d){return xe(d)?{data:null,error:d}:{data:null,error:new ba("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:a,webauthn:i}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Qi("rpId is required for WebAuthn authentication")};try{if(!Kp())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:i},signal:o},{request:u});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:n,challengeId:d.challengeId,webauthn:{type:m.type,rpId:a,rpOrigins:i,credential_response:m.credential_response}})}catch(d){return xe(d)?{data:null,error:d}:{data:null,error:new ba("Unexpected error in authenticate",d)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Qi("rpId is required for WebAuthn registration")};try{if(!Kp())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:n});if(!d)return await this.client.mfa.listFactors().then(y=>{var x;return(x=y.data)===null||x===void 0?void 0:x.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===n&&v.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:a,rpOrigins:i},signal:o},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:a,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(d){return xe(d)?{data:null,error:d}:{data:null,error:new ba("Unexpected error in register",d)}}}}OS();const JS={url:P2,storageKey:Y2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:X2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Qp(t,n,a){return await a()}const wr={};class Ji{get jwks(){var n,a;return(a=(n=wr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=wr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{cachedAt:n})}constructor(n){var a,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},JS),n);if(this.storageKey=u.storageKey,this.instanceID=(a=Ji.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Ji.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&St()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new TS({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=wy(u.fetch),this.lock=u.lock||Qp,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&St()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=kS:this.lock=Qp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new QS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:by()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xp(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Xp(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xy}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},i="none";if(St()&&(a=oS(window.location.href),this._isImplicitGrantCallback(a)?i="implicit":await this._isPKCECallback(a)&&(i="pkce")),St()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(a,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),W2(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return xe(a)?this._returnResult({error:a}):this._returnResult({error:new ba("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,i,o;try{const u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.captchaToken}},xform:gn}),{data:d,error:f}=u;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var a,i,o;try{let u;if("email"in n){const{email:y,password:x,options:v}=n;let w=null,_=null;this.flowType==="pkce"&&([w,_]=await yr(this.storage,this.storageKey)),u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:y,password:x,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:_},xform:gn})}else if("phone"in n){const{phone:y,password:x,options:v}=n;u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(o=v==null?void 0:v.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:gn})}else throw new Io("You must provide either an email or phone number and a password");const{data:d,error:f}=u;if(f||!d)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let a;if("email"in n){const{email:u,password:d,options:f}=n;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Pp})}else if("phone"in n){const{phone:u,password:d,options:f}=n;a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Pp})}else throw new Io("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const u=new xr;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,i,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,i,o,u,d,f,m,p,y,x,v;let w,_;if("message"in n)w=n.message,_=n.signature;else{const{chain:A,wallet:E,statement:S,options:N}=n;let j;if(St())if(typeof E=="object")j=E;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")j=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=E}const C=new URL((a=N==null?void 0:N.url)!==null&&a!==void 0?a:window.location.href),D=await j.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Sy(D[0]);let R=(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!R){const I=await j.request({method:"eth_chainId"});R=RS(I)}const L={domain:C.host,address:z,statement:S,uri:C.href,version:"1",chainId:R,nonce:(o=N==null?void 0:N.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(u=N==null?void 0:N.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=N==null?void 0:N.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=N==null?void 0:N.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=DS(L),_=await j.request({method:"personal_sign",params:[MS(w),z]})}try{const{data:A,error:E}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:_},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=n.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:gn});if(E)throw E;if(!A||!A.session||!A.user){const S=new xr;return this._returnResult({data:{user:null,session:null},error:S})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:E})}catch(A){if(xe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(n){var a,i,o,u,d,f,m,p,y,x,v,w;let _,A;if("message"in n)_=n.message,A=n.signature;else{const{chain:E,wallet:S,statement:N,options:j}=n;let C;if(St())if(typeof S=="object")C=S;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))C=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const D=new URL((a=j==null?void 0:j.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in C&&C.signIn){const z=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),N?{statement:N}:null));let R;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")R=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)R=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)_=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),A=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${D.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(i=j==null?void 0:j.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((m=j==null?void 0:j.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((p=j==null?void 0:j.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((x=(y=j==null?void 0:j.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...j.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const z=await C.signMessage(new TextEncoder().encode(_),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=z}}try{const{data:E,error:S}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:wa(A)},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:gn});if(S)throw S;if(!E||!E.session||!E.user){const N=new xr;return this._returnResult({data:{user:null,session:null},error:N})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:S})}catch(E){if(xe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(n){const a=await pa(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(a??"").split("/");try{if(!i&&this.flowType==="pkce")throw new eS;const{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:gn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const f=new xr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:d})}catch(u){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:a,provider:i,token:o,access_token:u,nonce:d}=n,f=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gn}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new xr;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,i,o,u,d;try{if("email"in n){const{email:f,options:m}=n;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await yr(this.storage,this.storageKey));const{error:x}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:f,options:m}=n,{data:p,error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new Io("You must provide either an email or phone number.")}catch(f){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(n){var a,i;try{let o,u;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:f}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:gn});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,p=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var a,i,o,u,d;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await yr(this.storage,this.storageKey));const p=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n==null?void 0:n.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:NS});return!((u=p.data)===null||u===void 0)&&u.url&&St()&&!(!((d=n.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)throw i;if(!a)throw new Kt;const{error:o}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:i,type:o,options:u}=n,{error:d}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in n){const{phone:i,type:o,options:u}=n,{data:d,error:f}=await Se(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new Io("You must provide either an email or phone number and a type")}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<ch:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const d=await pa(this.userStorage,this.storageKey+"-user");d!=null&&d.user?n.user=d.user:n.user=hh()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};n.user=wS(n.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:qs}):await this._useSession(async a=>{var i,o,u;const{data:d,error:f}=a;if(f)throw f;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:qs})})}catch(a){if(xe(a))return F2(a)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new Kt;const d=o.session;let f=null,m=null;this.flowType==="pkce"&&n.email!=null&&([f,m]=await yr(this.storage,this.storageKey));const{data:p,error:y}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:qs});if(y)throw y;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const a=Date.now()/1e3;let i=a,o=!0,u=null;const{payload:d}=dh(n.access_token);if(d.exp&&(i=d.exp,o=i<=a),o){const{data:f,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:m}=await this._getUser(n.access_token);if(m)throw m;u={access_token:n.access_token,refresh_token:n.refresh_token,user:f.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(xe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var i;if(!n){const{data:d,error:f}=a;if(f)throw f;n=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(n!=null&&n.refresh_token))throw new Kt;const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!St())throw new Vo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Vo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Lp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vo("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Lp("No code detected.");const{data:N,error:j}=await this._exchangeCodeForSession(n.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:d,expires_in:f,expires_at:m,token_type:p}=n;if(!u||!f||!d||!p)throw new Vo("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(f);let v=y+x;m&&(v=parseInt(m));const w=v-y;w*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const _=v-x;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,y);const{data:A,error:E}=await this._getUser(u);if(E)throw E;const S={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:x,expires_at:v,refresh_token:d,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:n.type},error:null})}catch(i){if(xe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:f}=await this.admin.signOut(d,n);if(f&&!(Z2(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=lS(),i={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async a=>{var i,o;try{const{data:{session:u},error:d}=a;if(d)throw d;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,a={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await yr(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(u){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:i,error:o}=await this._useSession(async u=>{var d,f,m,p,y;const{data:x,error:v}=u;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=n.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return St()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:n.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(xe(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var i;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:d,provider:f,token:m,access_token:p,nonce:y}=n,x=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u==null?void 0:u.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:gn}),{data:v,error:w}=x;return w?this._returnResult({data:{user:null,session:null},error:w}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new xr}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:w}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var i,o;const{data:u,error:d}=a;if(d)throw d;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await dS(async o=>(o>0&&await uS(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:gn})),(o,u)=>{const d=200*Math.pow(2,o);return u&&uh(u)&&Date.now()+d-i<jr})}catch(i){if(this._debug(a,"error",i),xe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",i),St()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,a;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await pa(this.storage,this.storageKey);if(o&&this.userStorage){let d=await pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Nr(this.userStorage,this.storageKey+"-user",d)),o.user=(n=d==null?void 0:d.user)!==null&&n!==void 0?n:hh()}else if(o&&!o.user&&!o.user){const d=await pa(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await _t(this.storage,this.storageKey+"-user"),await Nr(this.storage,this.storageKey,o)):o.user=hh()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<ch;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${ch}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),uh(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var a,i;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new wc;const{data:u,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!u.session)throw new Kt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={data:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(o,"error",u),xe(u)){const d={data:null,error:u};return uh(u)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,i=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:a});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(n,a)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),i=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&a.user&&await Nr(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const u=Vp(o);await Nr(this.storage,this.storageKey,u)}else{const o=Vp(a);await Nr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const a=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const a=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,a&&clearTimeout(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-n)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${jr}ms, refresh threshold is ${Lh} ticks`),o<=Lh&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof _y)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,i){const o=[`provider=${encodeURIComponent(a)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,d]=await yr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(i!=null&&i.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var i;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):await Se(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var i,o;const{data:u,error:d}=a;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:p}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(n.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?qS(n.webauthn.credential_response):IS(n.webauthn.credential_response)})}:{code:n.code}),{data:f,error:m}=await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=await Se(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:BS(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:HS(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=a==null?void 0:a.factors)!==null&&n!==void 0?n:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var n,a;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=dh(i.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((a=(n=i.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(f="aal2");const p=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Kt});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&St()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(xe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Kt});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&St()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(xe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?this._returnResult({data:null,error:i}):a?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let i=a.keys.find(f=>f.kid===n);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===n),i&&this.jwks_cached_at+Q2>o)return i;const{data:u,error:d}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(f=>f.kid===n),!i)?null:i}async getClaims(n,a={}){try{let i=n;if(!i){const{data:w,error:_}=await this.getSession();if(_||!w.session)return this._returnResult({data:null,error:_});i=w.session.access_token}const{header:o,payload:u,signature:d,raw:{header:f,payload:m}}=dh(i);a!=null&&a.allowExpired||yS(u.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!p){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:u,header:o,signature:d},error:null}}const y=vS(o.alg),x=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,d,rS(`${f}.${m}`)))throw new qh("Invalid JWT signature");return{data:{claims:u,header:o,signature:d},error:null}}catch(i){if(xe(i))return this._returnResult({data:null,error:i});throw i}}}Ji.nextInstanceID={};const ZS=Ji,FS="2.90.1";let Bi="";typeof Deno<"u"?Bi="deno":typeof document<"u"?Bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bi="react-native":Bi="node";const WS={"X-Client-Info":`supabase-js-${Bi}/${FS}`},ej={headers:WS},tj={schema:"public"},nj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sj={};function Zi(t){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zi(t)}function aj(t,n){if(Zi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,n);if(Zi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function rj(t){var n=aj(t,"string");return Zi(n)=="symbol"?n:n+""}function ij(t,n,a){return(n=rj(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function Jp(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,i)}return a}function tt(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Jp(Object(a),!0).forEach(function(i){ij(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jp(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}const lj=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),oj=()=>Headers,cj=(t,n,a)=>{const i=lj(a),o=oj();return async(u,d)=>{var f;const m=(f=await n())!==null&&f!==void 0?f:t;let p=new o(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),i(u,tt(tt({},d),{},{headers:p}))}};function uj(t){return t.endsWith("/")?t:t+"/"}function dj(t,n){var a,i;const{db:o,auth:u,realtime:d,global:f}=t,{db:m,auth:p,realtime:y,global:x}=n,v={db:tt(tt({},m),o),auth:tt(tt({},p),u),realtime:tt(tt({},y),d),storage:{},global:tt(tt(tt({},x),f),{},{headers:tt(tt({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function hj(t){const n=t==null?void 0:t.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uj(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var fj=class extends ZS{constructor(t){super(t)}},mj=class{constructor(t,n,a){var i,o;this.supabaseUrl=t,this.supabaseKey=n;const u=hj(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:tj,realtime:sj,auth:tt(tt({},nj),{},{storageKey:d}),global:ej},m=dj(a??{},f);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=cj(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new X1(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new G2(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new I1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,n,a;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:u,flowType:d,lock:f,debug:m,throwOnError:p},y,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fj({url:this.authUrl.href,headers:tt(tt({},v),y),storageKey:u,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:d,lock:f,debug:m,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new u2(this.realtimeUrl.href,tt(tt({},t),{},{params:tt(tt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gj=(t,n,a)=>new mj(t,n,a);function pj(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const n=t.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}pj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xj="https://jzrdwhvmahdiiwhvcwgb.supabase.co",yj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6cmR3aHZtYWhkaWl3aHZjd2diIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyNjk1NDksImV4cCI6MjA4Mzg0NTU0OX0.F90TnsbKTuRG_rOW-0OcaZ-x9xJVrBrmoEaO71Fl0og",Qt=gj(xj,yj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Ny=()=>!!Qt,mh=["https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/gmail.compose","https://www.googleapis.com/auth/gmail.modify","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/calendar.events","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"].join(" "),Ey=M.createContext(void 0);function vj({children:t}){const[n,a]=M.useState(null),[i,o]=M.useState(null),[u,d]=M.useState(!0),[f,m]=M.useState(null),p=M.useCallback(E=>E!=null&&E.provider_token?{accessToken:E.provider_token,refreshToken:E.provider_refresh_token,expiresAt:E.expires_at?E.expires_at*1e3:void 0}:null,[]);M.useEffect(()=>{if(!Qt){d(!1);return}Qt.auth.getSession().then(({data:{session:S}})=>{o(S),a((S==null?void 0:S.user)??null),m(p(S)),d(!1)});const{data:{subscription:E}}=Qt.auth.onAuthStateChange(async(S,N)=>{console.log("Auth event:",S),o(N),a((N==null?void 0:N.user)??null),m(p(N)),S==="SIGNED_IN"&&(N!=null&&N.provider_token)&&await y(N)});return()=>E.unsubscribe()},[p]);const y=async E=>{if(!E.provider_token)return;const S="";try{await fetch(`${S}/api/google/auth/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E.access_token}`,"x-user-id":E.user.id},body:JSON.stringify({accessToken:E.provider_token,refreshToken:E.provider_refresh_token,expiresAt:E.expires_at?new Date(E.expires_at*1e3).toISOString():null,grantedScopes:mh.split(" ")})})}catch(N){console.error("Failed to sync Google tokens:",N)}},x=M.useCallback(async()=>{if(!Qt){console.error("Supabase not configured");return}const{error:E}=await Qt.auth.signInWithOAuth({provider:"google",options:{scopes:mh,redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(E)throw console.error("Google sign-in error:",E),E},[]),v=M.useCallback(async()=>{if(!Qt||!n){console.error("Not authenticated");return}const{error:E}=await Qt.auth.linkIdentity({provider:"google",options:{scopes:mh,redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(E)throw console.error("Google connect error:",E),E},[n]),w=M.useCallback(async()=>{if(!Qt)return;const{error:E}=await Qt.auth.signOut();if(E)throw console.error("Sign out error:",E),E;a(null),o(null),m(null)},[]),_=M.useCallback(()=>{const E={};return i!=null&&i.access_token&&(E.Authorization=`Bearer ${i.access_token}`),n!=null&&n.id&&(E["x-user-id"]=n.id),E},[i,n]),A={user:n,session:i,loading:u,isAuthenticated:!!n,googleTokens:f,hasGoogleAccess:!!(f!=null&&f.accessToken),signInWithGoogle:x,signOut:w,connectGoogleWorkspace:v,getAuthHeaders:_};return c.jsx(Ey.Provider,{value:A,children:t})}function Vs(){const t=M.useContext(Ey);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function bj({onDemoMode:t}){const{signInWithGoogle:n,loading:a}=Vs(),[i,o]=M.useState(null),[u,d]=M.useState(!1),f=async()=>{if(!Ny()){o("Authentication is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");return}o(null),d(!0);try{await n()}catch(m){o(m instanceof Error?m.message:"Failed to sign in"),d(!1)}};return a?c.jsx("div",{className:"min-h-screen bg-cscx-black flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-cscx-accent border-t-transparent"})}):c.jsxs("div",{className:"min-h-screen bg-cscx-black flex flex-col items-center justify-center p-4",children:[c.jsxs("div",{className:"mb-8 text-center",children:[c.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:["CSCX",c.jsx("span",{className:"text-cscx-accent",children:".AI"})]}),c.jsx("p",{className:"text-gray-400 text-lg",children:"AI-Powered Customer Success Platform"})]}),c.jsxs("div",{className:"w-full max-w-md bg-cscx-gray-900 rounded-xl border border-gray-800 p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white text-center mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-400 text-center mb-8",children:"Sign in to access your Customer Success workspace"}),i&&c.jsx("div",{className:"mb-6 p-4 bg-red-900/30 border border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-400 text-sm",children:i})}),c.jsxs("button",{onClick:f,disabled:u,className:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-100 text-gray-900 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u?c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-400 border-t-gray-900"}):c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:u?"Signing in...":"Continue with Google"})]}),c.jsxs("div",{className:"mt-6 p-4 bg-cscx-gray-800 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Sign in with Google to enable:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Gmail - Draft and send customer emails"]}),c.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Calendar - Schedule meetings with Meet links"]}),c.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Drive - Access customer documents"]})]})]}),t&&c.jsx("div",{className:"mt-6 pt-6 border-t border-gray-800",children:c.jsx("button",{onClick:t,className:"w-full text-gray-400 hover:text-white text-sm py-2 transition-colors",children:"Continue without sign in (Demo Mode)"})})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx("p",{className:"text-gray-500 text-sm",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})}function wj({onSuccess:t,onError:n}){const[a,i]=M.useState("processing"),[o,u]=M.useState("Processing authentication...");return M.useEffect(()=>{(async()=>{if(!Qt){i("error"),u("Authentication not configured"),n==null||n("Authentication not configured");return}try{const{data:f,error:m}=await Qt.auth.getSession();if(m)throw m;if(f.session)i("success"),u("Successfully signed in! Redirecting..."),setTimeout(()=>{t==null||t(),window.location.href="/"},1e3);else{const p=setTimeout(()=>{i("error"),u("Authentication timed out. Please try again."),n==null||n("Authentication timed out")},1e4),{data:{subscription:y}}=Qt.auth.onAuthStateChange((x,v)=>{x==="SIGNED_IN"&&v&&(clearTimeout(p),i("success"),u("Successfully signed in! Redirecting..."),setTimeout(()=>{t==null||t(),window.location.href="/"},1e3))});return()=>{clearTimeout(p),y.unsubscribe()}}}catch(f){console.error("Auth callback error:",f),i("error"),u(f instanceof Error?f.message:"Authentication failed"),n==null||n(f instanceof Error?f.message:"Authentication failed")}})()},[t,n]),c.jsx("div",{className:"min-h-screen bg-cscx-black flex flex-col items-center justify-center p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("h1",{className:"text-3xl font-bold text-white mb-8",children:["CSCX",c.jsx("span",{className:"text-cscx-accent",children:".AI"})]}),c.jsxs("div",{className:"mb-6",children:[a==="processing"&&c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-cscx-accent border-t-transparent mx-auto"}),a==="success"&&c.jsx("div",{className:"h-12 w-12 rounded-full bg-green-500 flex items-center justify-center mx-auto",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a==="error"&&c.jsx("div",{className:"h-12 w-12 rounded-full bg-red-500 flex items-center justify-center mx-auto",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("p",{className:`text-lg ${a==="error"?"text-red-400":"text-gray-300"}`,children:o}),a==="error"&&c.jsx("button",{onClick:()=>window.location.href="/login",className:"mt-6 px-6 py-2 bg-cscx-accent hover:bg-red-600 text-white rounded-lg transition-colors",children:"Try Again"})]})})}function _j(){var _,A,E;const{user:t,hasGoogleAccess:n,signOut:a,connectGoogleWorkspace:i}=Vs(),[o,u]=M.useState(!1),[d,f]=M.useState(!1),m=M.useRef(null);if(M.useEffect(()=>{const S=N=>{m.current&&!m.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),!t)return null;const p=async()=>{f(!0);try{await i()}catch(S){console.error("Failed to connect Google:",S)}finally{f(!1)}},y=async()=>{try{await a()}catch(S){console.error("Failed to sign out:",S)}},x=()=>{var j;const S=((j=t.user_metadata)==null?void 0:j.full_name)||t.email||"",N=S.split(" ");return N.length>=2?`${N[0][0]}${N[1][0]}`.toUpperCase():S.substring(0,2).toUpperCase()},v=(_=t.user_metadata)==null?void 0:_.avatar_url,w=((A=t.user_metadata)==null?void 0:A.full_name)||((E=t.email)==null?void 0:E.split("@")[0])||"User";return c.jsxs("div",{className:"relative",ref:m,children:[c.jsxs("button",{onClick:()=>u(!o),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition-colors",children:[v?c.jsx("img",{src:v,alt:w,className:"w-8 h-8 rounded-full"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-cscx-accent flex items-center justify-center text-white text-sm font-medium",children:x()}),c.jsxs("div",{className:"hidden md:block text-left",children:[c.jsx("div",{className:"text-sm text-white font-medium",children:w}),c.jsx("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:n?c.jsxs(c.Fragment,{children:[c.jsx(Ui,{className:"w-3 h-3 text-green-500"}),c.jsx("span",{children:"Connected"})]}):c.jsxs(c.Fragment,{children:[c.jsx(jp,{className:"w-3 h-3 text-yellow-500"}),c.jsx("span",{children:"Limited"})]})})]}),c.jsx(F_,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&c.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-cscx-gray-900 rounded-xl border border-gray-800 shadow-xl z-50",children:[c.jsx("div",{className:"p-4 border-b border-gray-800",children:c.jsxs("div",{className:"flex items-center gap-3",children:[v?c.jsx("img",{src:v,alt:w,className:"w-12 h-12 rounded-full"}):c.jsx("div",{className:"w-12 h-12 rounded-full bg-cscx-accent flex items-center justify-center text-white text-lg font-medium",children:x()}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white font-medium",children:w}),c.jsx("div",{className:"text-sm text-gray-400",children:t.email})]})]})}),c.jsxs("div",{className:"p-4 border-b border-gray-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Google Workspace"}),n?c.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-500",children:[c.jsx(Ui,{className:"w-3 h-3"}),"Connected"]}):c.jsxs("span",{className:"flex items-center gap-1 text-xs text-yellow-500",children:[c.jsx(jp,{className:"w-3 h-3"}),"Not Connected"]})]}),n?c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx(Ui,{className:"w-4 h-4 text-green-500"}),"Gmail access enabled"]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx(Ui,{className:"w-4 h-4 text-green-500"}),"Calendar access enabled"]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[c.jsx(Ui,{className:"w-4 h-4 text-green-500"}),"Drive access enabled"]})]}):c.jsxs("button",{onClick:p,disabled:d,className:"w-full flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-900 text-sm font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:[d?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-400 border-t-gray-900"}):c.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Connect Google Workspace"]})]}),c.jsx("div",{className:"p-2",children:c.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-300 hover:bg-gray-800 rounded-lg transition-colors",children:[c.jsx(h1,{className:"w-4 h-4"}),c.jsx("span",{children:"Sign Out"})]})})]})]})}const gh="";function Sj({onApprovalChange:t,refreshTrigger:n}){const{user:a,getAuthHeaders:i}=Vs(),[o,u]=M.useState([]),[d,f]=M.useState(!0),[m,p]=M.useState(null),[y,x]=M.useState(null),[v,w]=M.useState(null),[_,A]=M.useState(new Set),E=async()=>{if(!(a!=null&&a.id)){u([]),f(!1);return}try{const R=await fetch(`${gh}/api/approvals`,{headers:i()});if(R.ok){const L=await R.json();u(L.items||[])}else console.error("Approvals fetch failed:",R.status)}catch(R){console.error("Error fetching approvals:",R)}finally{f(!1)}};M.useEffect(()=>{if(a!=null&&a.id){E();const R=setInterval(E,3e4);return()=>clearInterval(R)}else f(!1)},[a==null?void 0:a.id]),M.useEffect(()=>{n&&n>0&&E()},[n]);const S=async R=>{if(!(a!=null&&a.id))return;p(R),x(null),w(null);const L=o.find(I=>I.id===R);try{const I=await fetch(`${gh}/api/approvals/${R}/approve`,{method:"POST",headers:{"Content-Type":"application/json",...i()}}),Q=await I.json();I.ok?(u(Y=>Y.filter(X=>X.id!==R)),t==null||t(),(L==null?void 0:L.actionType)==="schedule_meeting"?w("Meeting scheduled successfully!"):(L==null?void 0:L.actionType)==="send_email"?w("Email sent successfully!"):(L==null?void 0:L.actionType)==="create_task"?w("Task created successfully!"):w("Action completed!"),setTimeout(()=>w(null),5e3)):x(Q.error||"Failed to approve")}catch{x("Network error")}finally{p(null)}},N=async R=>{if(a!=null&&a.id){p(R),x(null);try{const L=await fetch(`${gh}/api/approvals/${R}/reject`,{method:"POST",headers:{"Content-Type":"application/json",...i()}});if(L.ok)u(I=>I.filter(Q=>Q.id!==R)),t==null||t();else{const I=await L.json();x(I.error||"Failed to reject")}}catch{x("Network error")}finally{p(null)}}},j=R=>{switch(R){case"schedule_meeting":return"";case"send_email":return"";case"create_task":return"";case"share_document":return"";default:return""}},C=R=>{switch(R){case"schedule_meeting":return"Schedule Meeting";case"send_email":return"Send Email";case"create_task":return"Create Task";case"share_document":return"Share Document";default:return"Action"}},D=R=>{A(L=>{const I=new Set(L);return I.has(R)?I.delete(R):I.add(R),I})},z=R=>{var Q,Y;const{actionType:L,actionData:I}=R;switch(L){case"schedule_meeting":return c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsx("p",{className:"font-medium",children:I.title}),c.jsx("p",{className:"text-gray-400",children:new Date(I.startTime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}),((Q=I.attendees)==null?void 0:Q.length)>0&&c.jsxs("p",{className:"text-gray-500",children:["Attendees: ",I.attendees.join(", ")]})]});case"send_email":{const X=I.body||I.bodyText||I.bodyHtml||"",P=_.has(R.id);return c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsx("p",{className:"font-medium",children:I.subject}),((Y=I.to)==null?void 0:Y.length)>0&&c.jsxs("p",{className:"text-gray-400",children:["To: ",Array.isArray(I.to)?I.to.join(", "):I.to]}),c.jsx("div",{className:`text-gray-500 ${P?"":"line-clamp-2"}`,children:P?X:X.substring(0,100)+(X.length>100?"...":"")}),X.length>100&&c.jsx("button",{onClick:()=>D(R.id),className:"text-xs text-cscx-accent hover:text-red-400 transition-colors",children:P?"Show less":"Show full email"})]})}case"create_task":return c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsx("p",{className:"font-medium",children:I.title}),c.jsxs("p",{className:"text-gray-400",children:["Due: ",I.dueDate]}),c.jsxs("p",{className:"text-gray-500",children:["Priority: ",I.priority]})]});default:return c.jsx("p",{className:"text-sm text-gray-400",children:R.originalContent||JSON.stringify(I).substring(0,100)})}};return d?c.jsx("div",{className:"p-4 text-center text-gray-400",children:"Loading approvals..."}):c.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 bg-gray-800 border-b border-gray-700 flex items-center justify-between",children:[c.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[o.length>0&&c.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),"Pending Approvals ",o.length>0&&`(${o.length})`]}),c.jsx("button",{onClick:E,className:"text-xs text-gray-400 hover:text-white transition-colors",title:"Refresh",children:""})]}),o.length===0?c.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No pending actions. Ask me to schedule a meeting or draft an email!"}):null,v&&c.jsxs("div",{className:"px-4 py-2 bg-green-900/30 text-green-400 text-sm flex items-center gap-2",children:[c.jsx("span",{children:""}),v]}),y&&c.jsxs("div",{className:"px-4 py-2 bg-red-900/30 text-red-400 text-sm flex items-center gap-2",children:[c.jsx("span",{children:""}),y]}),c.jsx("div",{className:"divide-y divide-gray-700",children:o.map(R=>c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:j(R.actionType)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-gray-700 rounded text-gray-300",children:C(R.actionType)}),c.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.createdAt).toLocaleTimeString()})]}),z(R)]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 ml-9",children:[c.jsx("button",{onClick:()=>S(R.id),disabled:m===R.id,className:"flex-1 px-3 py-1.5 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white text-sm font-medium rounded transition-colors",children:m===R.id?"Processing...":"Approve"}),c.jsx("button",{onClick:()=>N(R.id),disabled:m===R.id,className:"flex-1 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-white text-sm font-medium rounded transition-colors",children:"Reject"})]})]},R.id))})]})}const ph="";function jj({refreshTrigger:t,onTaskChange:n}){const{user:a,getAuthHeaders:i}=Vs(),[o,u]=M.useState([]),[d,f]=M.useState(!0),[m,p]=M.useState(null),y=async()=>{if(!(a!=null&&a.id)){u([]),f(!1);return}try{const S=await fetch(`${ph}/api/google/tasks`,{headers:i()});if(S.ok){const N=await S.json();u(N.tasks||[])}else console.error("Tasks fetch failed:",S.status)}catch(S){console.error("Error fetching tasks:",S)}finally{f(!1)}};M.useEffect(()=>{if(a!=null&&a.id){y();const S=setInterval(y,6e4);return()=>clearInterval(S)}else f(!1)},[a==null?void 0:a.id]),M.useEffect(()=>{t&&t>0&&y()},[t]);const x=async S=>{if(a!=null&&a.id){p(null);try{const N=await fetch(`${ph}/api/google/tasks/${S}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json",...i()}});if(N.ok)u(j=>j.map(C=>C.id===S?{...C,status:"completed"}:C)),n==null||n();else{const j=await N.json();p(j.error||"Failed to complete task")}}catch{p("Network error")}}},v=async S=>{if(a!=null&&a.id){p(null);try{const N=await fetch(`${ph}/api/google/tasks/${S}`,{method:"DELETE",headers:i()});if(N.ok)u(j=>j.filter(C=>C.id!==S)),n==null||n();else{const j=await N.json();p(j.error||"Failed to delete task")}}catch{p("Network error")}}},w=S=>{switch(S){case"high":return"text-red-400 bg-red-900/30";case"medium":return"text-yellow-400 bg-yellow-900/30";case"low":return"text-green-400 bg-green-900/30";default:return"text-gray-400 bg-gray-700"}},_=S=>{if(!S)return null;const N=new Date(S),C=N<new Date;return{text:N.toLocaleDateString("en-US",{month:"short",day:"numeric"}),isOverdue:C}},A=o.filter(S=>S.status==="needsAction"),E=o.filter(S=>S.status==="completed");return d?c.jsx("div",{className:"p-4 text-center text-gray-400",children:"Loading tasks..."}):c.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 bg-gray-800 border-b border-gray-700 flex items-center justify-between",children:[c.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[A.length>0&&c.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Tasks ",A.length>0&&`(${A.length})`]}),c.jsx("button",{onClick:y,className:"text-xs text-gray-400 hover:text-white transition-colors",title:"Refresh",children:""})]}),m&&c.jsx("div",{className:"px-4 py-2 bg-red-900/30 text-red-400 text-sm",children:m}),o.length===0?c.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No tasks yet. Ask me to create a task!"}):c.jsxs("div",{className:"divide-y divide-gray-700",children:[A.map(S=>{const N=_(S.due_date);return c.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("button",{onClick:()=>x(S.id),className:"mt-0.5 w-5 h-5 rounded border-2 border-gray-500 hover:border-green-400 hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as complete"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("span",{className:"text-sm text-white",children:S.title}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${w(S.priority)}`,children:S.priority}),N&&c.jsxs("span",{className:`text-xs ${N.isOverdue?"text-red-400":"text-gray-400"}`,children:["Due: ",N.text]})]}),S.notes&&c.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:S.notes})]}),c.jsx("button",{onClick:()=>v(S.id),className:"text-gray-500 hover:text-red-400 transition-colors",title:"Delete task",children:""})]})},S.id)}),E.length>0&&c.jsxs("details",{className:"group",children:[c.jsxs("summary",{className:"px-4 py-2 text-xs text-gray-500 cursor-pointer hover:bg-gray-800/30 list-none flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-600",children:""}),c.jsxs("span",{className:"group-open:hidden",children:["Show ",E.length," completed"]}),c.jsx("span",{className:"hidden group-open:inline",children:"Hide completed"})]}),E.map(S=>c.jsx("div",{className:"p-3 bg-gray-800/30",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"mt-0.5 w-5 h-5 rounded bg-green-900/50 flex items-center justify-center text-green-400 text-xs",children:""}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("span",{className:"text-sm text-gray-500 line-through",children:S.title})}),c.jsx("button",{onClick:()=>v(S.id),className:"text-gray-600 hover:text-red-400 transition-colors",title:"Delete task",children:""})]})},S.id))]})]})]})}const xh="",Zp=[{id:"meetings",label:"Today's Meetings",icon:"",prompt:"What meetings do I have today? Give me a brief for each one.",requiresGoogle:!0},{id:"schedule",label:"Schedule Meeting",icon:"",prompt:"Schedule a customer check-in meeting for tomorrow at 2pm.",requiresGoogle:!0},{id:"email",label:"Draft Email",icon:"",prompt:"Draft a follow-up email to a customer thanking them for the kickoff meeting.",requiresGoogle:!0},{id:"task",label:"Create Task",icon:"",prompt:"Create a task to follow up with the customer about their onboarding progress.",requiresGoogle:!0},{id:"onboard",label:"Onboarding Plan",icon:"",prompt:"Create a 30-60-90 day onboarding plan for a new enterprise customer with $100K ARR."},{id:"qbr",label:"QBR Prep",icon:"",prompt:"Help me prepare for a Quarterly Business Review. What should I include?"}];function Nj(){const{user:t,hasGoogleAccess:n,getAuthHeaders:a}=Vs(),[i,o]=M.useState([]),[u,d]=M.useState(""),[f,m]=M.useState(!1),[p,y]=M.useState([]),[x,v]=M.useState(!1),[w]=M.useState(()=>`session_${Date.now()}`),[_,A]=M.useState(0),[E,S]=M.useState([]),[N,j]=M.useState(null),[C,D]=M.useState(!1),z=M.useRef(null),R=()=>{var P;(P=z.current)==null||P.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{R()},[i]),M.useEffect(()=>{L()},[]),M.useEffect(()=>{n&&I()},[n]);const L=async()=>{D(!0);try{const P=await fetch(`${xh}/api/customers`,{headers:a()});if(P.ok){const U=await P.json();S(U.customers||[])}}catch(P){console.error("Failed to fetch customers:",P)}finally{D(!1)}},I=async()=>{v(!0);try{const P=await fetch(`${xh}/api/google/calendar/events/today`,{headers:a()});if(P.ok){const U=await P.json();y(U.events||[])}}catch(P){console.error("Failed to fetch meetings:",P)}finally{v(!1)}},Q=async P=>{if(!P.trim()||f)return;const U={id:`msg_${Date.now()}`,role:"user",content:P.trim(),timestamp:new Date};o(T=>[...T,U]),d(""),m(!0);const J=`thinking_${Date.now()}`;o(T=>[...T,{id:J,role:"assistant",content:"Thinking...",timestamp:new Date,isThinking:!0}]);try{const $=await(await fetch(`${xh}/api/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json",...a()},body:JSON.stringify({message:P.trim(),sessionId:w,customerContext:N?{id:N.id,name:N.name,industry:N.industry,arr:N.arr,healthScore:N.health_score,status:N.status,primaryContact:N.primary_contact}:{name:"General Inquiry",arr:0,healthScore:100,status:"active"}})})).json();o(q=>{var ne;return[...q.filter(O=>O.id!==J),{id:`msg_${Date.now()}`,role:"assistant",content:$.response||$.message||"I apologize, I encountered an issue. Please try again.",timestamp:new Date,agentType:$.agentType||((ne=$.routing)==null?void 0:ne.agentType)}]}),($.requiresApproval||$.pendingApproval)&&A(q=>q+1)}catch(T){console.error("AI request failed:",T),o($=>[...$.filter(V=>V.id!==J),{id:`msg_${Date.now()}`,role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date}])}finally{m(!1)}},Y=P=>{if(P.requiresGoogle&&!n){o(U=>[...U,{id:`msg_${Date.now()}`,role:"system",content:"Please connect your Google Workspace to use this feature. Click your profile to connect.",timestamp:new Date}]);return}Q(P.prompt)},X=P=>{const U=`Prepare a detailed meeting brief for "${P.title}" with ${P.attendees.slice(0,3).join(", ")}${P.attendees.length>3?` and ${P.attendees.length-3} others`:""}. Include:
1. Likely discussion topics based on the meeting title
2. Key questions to ask
3. Talking points
4. Suggested agenda`;Q(U)};return c.jsxs("div",{className:"flex h-[calc(100vh-200px)] min-h-[600px] bg-cscx-gray-900 rounded-xl border border-cscx-gray-800 overflow-hidden",children:[c.jsxs("div",{className:"w-72 bg-cscx-black border-r border-cscx-gray-800 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-cscx-gray-800",children:[c.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:""}),"AI Assistant"]}),c.jsx("p",{className:"text-xs text-cscx-gray-400 mt-1",children:"Powered by LangChain + RAG"})]}),c.jsxs("div",{className:"p-4 border-b border-cscx-gray-800",children:[c.jsx("h3",{className:"text-xs font-medium text-cscx-gray-400 uppercase tracking-wider mb-2",children:"Customer Context"}),c.jsxs("select",{value:(N==null?void 0:N.id)||"",onChange:P=>{const U=E.find(J=>J.id===P.target.value);j(U||null)},className:"w-full bg-cscx-gray-800 border border-cscx-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-cscx-accent",children:[c.jsx("option",{value:"",children:"General Inquiry"}),E.map(P=>c.jsxs("option",{value:P.id,children:[P.name," ",P.arr>0?`($${(P.arr/1e3).toFixed(0)}K)`:""]},P.id))]}),N&&c.jsxs("div",{className:"mt-2 p-2 bg-cscx-gray-800 rounded-lg text-xs",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Health:"}),c.jsxs("span",{className:`font-medium ${N.health_score>=70?"text-green-400":N.health_score>=40?"text-yellow-400":"text-red-400"}`,children:[N.health_score,"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-1",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Status:"}),c.jsx("span",{className:"text-white capitalize",children:N.status})]}),N.primary_contact&&c.jsxs("div",{className:"flex items-center justify-between mt-1",children:[c.jsx("span",{className:"text-cscx-gray-400",children:"Contact:"}),c.jsx("span",{className:"text-white truncate ml-2",children:N.primary_contact.email})]})]})]}),c.jsx("div",{className:"p-4 border-b border-cscx-gray-800",children:c.jsx(Sj,{onApprovalChange:I,refreshTrigger:_})}),c.jsx("div",{className:"p-4 border-b border-cscx-gray-800",children:c.jsx(jj,{onTaskChange:I,refreshTrigger:_})}),n&&c.jsxs("div",{className:"p-4 border-b border-cscx-gray-800",children:[c.jsxs("h3",{className:"text-xs font-medium text-cscx-gray-400 uppercase tracking-wider mb-3 flex items-center justify-between",children:["Today's Meetings",c.jsx("button",{onClick:I,className:"text-cscx-accent hover:text-red-400 transition-colors",disabled:x,children:x?"...":""})]}),x?c.jsx("div",{className:"text-sm text-cscx-gray-500",children:"Loading..."}):p.length===0?c.jsx("div",{className:"text-sm text-cscx-gray-500",children:"No meetings today"}):c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.slice(0,5).map(P=>c.jsxs("button",{onClick:()=>X(P),className:"w-full text-left p-2 rounded-lg bg-cscx-gray-800 hover:bg-cscx-gray-700 transition-colors",children:[c.jsx("div",{className:"text-sm text-white font-medium truncate",children:P.title}),c.jsxs("div",{className:"text-xs text-cscx-gray-400 flex items-center gap-1 mt-1",children:[c.jsx("span",{children:""}),new Date(P.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P.attendees.length>0&&c.jsxs("span",{className:"ml-2",children:[" ",P.attendees.length]})]})]},P.id))})]}),c.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[c.jsx("h3",{className:"text-xs font-medium text-cscx-gray-400 uppercase tracking-wider mb-3",children:"Quick Actions"}),c.jsx("div",{className:"space-y-2",children:Zp.map(P=>c.jsxs("button",{onClick:()=>Y(P),disabled:f,className:`w-full text-left p-3 rounded-lg transition-colors flex items-center gap-3 ${P.requiresGoogle&&!n?"bg-cscx-gray-800/50 text-cscx-gray-500 cursor-not-allowed":"bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white"}`,children:[c.jsx("span",{className:"text-xl",children:P.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium",children:P.label}),P.requiresGoogle&&!n&&c.jsx("div",{className:"text-xs text-yellow-500",children:"Requires Google"})]})]},P.id))})]}),c.jsx("div",{className:"p-4 border-t border-cscx-gray-800",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${n?"bg-green-500":"bg-yellow-500"}`}),c.jsx("span",{className:"text-xs text-cscx-gray-400",children:n?"Google Connected":"Google Not Connected"})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-cscx-gray-800 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-medium",children:"Customer Success AI"}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Auto-routing to specialist agents"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-cscx-gray-400",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Ready"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:i.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"How can I help you today?"}),c.jsx("p",{className:"text-cscx-gray-400 max-w-md mb-6",children:"I'm your AI-powered Customer Success assistant. I can help with meeting prep, email drafts, onboarding plans, and more."}),c.jsx("div",{className:"flex flex-wrap gap-2 justify-center max-w-lg",children:Zp.slice(0,4).map(P=>c.jsxs("button",{onClick:()=>Y(P),className:"px-4 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white text-sm rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:P.icon}),P.label]},P.id))})]}):c.jsxs(c.Fragment,{children:[i.map(P=>c.jsx("div",{className:`flex ${P.role==="user"?"justify-end":"justify-start"}`,children:c.jsx("div",{className:`max-w-[80%] rounded-xl px-4 py-3 ${P.role==="user"?"bg-cscx-accent text-white":P.role==="system"?"bg-yellow-900/30 border border-yellow-600/50 text-yellow-200":"bg-cscx-gray-800 text-white"}`,children:P.isThinking?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),c.jsx("span",{children:"Thinking..."})]}):c.jsxs(c.Fragment,{children:[P.agentType&&P.role==="assistant"&&c.jsxs("div",{className:"text-xs text-cscx-gray-400 mb-1 capitalize",children:[P.agentType," Agent"]}),c.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:P.content})]})})},P.id)),c.jsx("div",{ref:z})]})}),c.jsxs("div",{className:"p-4 border-t border-cscx-gray-800",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:u,onChange:P=>d(P.target.value),onKeyDown:P=>P.key==="Enter"&&Q(u),placeholder:"Ask me anything about customer success...",disabled:f,className:"flex-1 bg-cscx-gray-800 border border-cscx-gray-700 rounded-lg px-4 py-3 text-white placeholder-cscx-gray-500 focus:outline-none focus:border-cscx-accent disabled:opacity-50"}),c.jsx("button",{onClick:()=>Q(u),disabled:f||!u.trim(),className:"px-6 py-3 bg-cscx-accent hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":"Send"})]}),c.jsx("p",{className:"text-xs text-cscx-gray-500 mt-2 text-center",children:"LangChain RAG + Auto-routing + HITL approval"})]})]})]})}const Go="";function Ej(){const{user:t,hasGoogleAccess:n,getAuthHeaders:a,connectGoogleWorkspace:i}=Vs(),[o,u]=M.useState(null),[d,f]=M.useState(!0),[m,p]=M.useState([]),[y,x]=M.useState([]),[v,w]=M.useState([]),[_,A]=M.useState(!1),[E,S]=M.useState(!1),[N,j]=M.useState(!1),[C,D]=M.useState("overview"),[z,R]=M.useState(null);M.useEffect(()=>{L()},[n]),M.useEffect(()=>{o!=null&&o.connected&&I()},[o==null?void 0:o.connected]);const L=async()=>{f(!0);try{const T=await fetch(`${Go}/api/google/auth/status`,{headers:a()});if(T.ok){const $=await T.json();u($)}else u({connected:!1})}catch(T){console.error("Failed to check Google status:",T),u({connected:!1})}finally{f(!1)}},I=async()=>{await Promise.all([Q(),Y(),X()])},Q=async()=>{A(!0);try{const T=await fetch(`${Go}/api/google/calendar/events/upcoming?days=7`,{headers:a()});if(T.ok){const $=await T.json();p($.events||[])}}catch(T){console.error("Failed to load calendar:",T)}finally{A(!1)}},Y=async()=>{S(!0);try{const T=await fetch(`${Go}/api/google/gmail/threads?maxResults=10`,{headers:a()});if(T.ok){const $=await T.json();x($.threads||[])}}catch(T){console.error("Failed to load emails:",T)}finally{S(!1)}},X=async()=>{j(!0);try{const T=await fetch(`${Go}/api/google/drive/files?maxResults=10`,{headers:a()});if(T.ok){const $=await T.json();w($.files||[])}}catch(T){console.error("Failed to load drive files:",T)}finally{j(!1)}},P=async()=>{try{await i()}catch{R("Failed to connect Google. Please try again.")}},U=T=>new Date(T).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),J=T=>{const $=new Date(T),V=new Date().getTime()-$.getTime(),ne=Math.floor(V/(1e3*60*60*24)),O=Math.floor(V/(1e3*60*60)),H=Math.floor(V/(1e3*60));return ne>0?`${ne}d ago`:O>0?`${O}h ago`:H>0?`${H}m ago`:"Just now"};return d?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-cscx-accent border-t-transparent"})}):o!=null&&o.connected?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-cscx-gray-900 rounded-xl border border-cscx-gray-800 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Google Workspace Connected"}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:o.email})]})]}),c.jsxs("button",{onClick:I,className:"px-4 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:""})," Refresh All"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-white font-medium",children:"Calendar"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:m.length}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"upcoming events"})]}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-white font-medium",children:"Gmail"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:y.length}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"recent threads"})]}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-white font-medium",children:"Drive"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:v.length}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"recent files"})]})]})]}),c.jsx("div",{className:"flex gap-1 p-1 bg-cscx-gray-900 rounded-lg w-fit",children:["overview","calendar","email","drive"].map(T=>c.jsx("button",{onClick:()=>D(T),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors capitalize ${C===T?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:T==="email"?"Gmail":T},T))}),c.jsxs("div",{className:"bg-cscx-gray-900 rounded-xl border border-cscx-gray-800",children:[C==="overview"&&c.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[c.jsx("span",{children:""})," Upcoming Meetings"]}),_?c.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(T=>c.jsx("div",{className:"h-16 bg-cscx-gray-800 rounded-lg"},T))}):m.length===0?c.jsx("p",{className:"text-cscx-gray-500 text-sm",children:"No upcoming meetings"}):c.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(T=>c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3",children:[c.jsx("p",{className:"text-white font-medium text-sm truncate",children:T.title}),c.jsx("p",{className:"text-xs text-cscx-gray-400 mt-1",children:U(T.startTime)}),T.meetLink&&c.jsx("a",{href:T.meetLink,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-cscx-accent hover:underline mt-1 inline-block",children:"Join Meet"})]},T.id))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[c.jsx("span",{children:""})," Recent Emails"]}),E?c.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(T=>c.jsx("div",{className:"h-16 bg-cscx-gray-800 rounded-lg"},T))}):y.length===0?c.jsx("p",{className:"text-cscx-gray-500 text-sm",children:"No recent emails"}):c.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(T=>c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3",children:[c.jsx("p",{className:"text-white font-medium text-sm truncate",children:T.subject}),c.jsx("p",{className:"text-xs text-cscx-gray-400 mt-1 truncate",children:T.from}),c.jsx("p",{className:"text-xs text-cscx-gray-500 mt-1",children:J(T.lastMessageAt)})]},T.id))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[c.jsx("span",{children:""})," Recent Files"]}),N?c.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(T=>c.jsx("div",{className:"h-16 bg-cscx-gray-800 rounded-lg"},T))}):v.length===0?c.jsx("p",{className:"text-cscx-gray-500 text-sm",children:"No recent files"}):c.jsx("div",{className:"space-y-3",children:v.slice(0,5).map(T=>c.jsxs("a",{href:T.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"bg-cscx-gray-800 rounded-lg p-3 block hover:bg-cscx-gray-700 transition-colors",children:[c.jsx("p",{className:"text-white font-medium text-sm truncate",children:T.name}),c.jsx("p",{className:"text-xs text-cscx-gray-400 mt-1",children:J(T.modifiedTime)})]},T.id))})]})]}),C==="calendar"&&c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Calendar Events"}),c.jsx("button",{onClick:Q,disabled:_,className:"px-3 py-1 text-sm bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white rounded-lg transition-colors",children:_?"Loading...":"Refresh"})]}),m.length===0?c.jsx("p",{className:"text-cscx-gray-500",children:"No upcoming events in the next 7 days"}):c.jsx("div",{className:"space-y-4",children:m.map(T=>c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4 flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-white font-medium",children:T.title}),c.jsx("p",{className:"text-sm text-cscx-gray-400 mt-1",children:U(T.startTime)}),T.attendees.length>0&&c.jsxs("p",{className:"text-xs text-cscx-gray-500 mt-2",children:[T.attendees.slice(0,3).map($=>$.name||$.email).join(", "),T.attendees.length>3&&` +${T.attendees.length-3} more`]})]}),T.meetLink&&c.jsx("a",{href:T.meetLink,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Join"})]},T.id))})]}),C==="email"&&c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Gmail Inbox"}),c.jsx("button",{onClick:Y,disabled:E,className:"px-3 py-1 text-sm bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white rounded-lg transition-colors",children:E?"Loading...":"Refresh"})]}),y.length===0?c.jsx("p",{className:"text-cscx-gray-500",children:"No recent emails"}):c.jsx("div",{className:"space-y-3",children:y.map(T=>c.jsx("div",{className:`bg-cscx-gray-800 rounded-lg p-4 ${T.isUnread?"border-l-4 border-cscx-accent":""}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:`font-medium ${T.isUnread?"text-white":"text-cscx-gray-300"}`,children:T.subject||"(no subject)"}),c.jsx("p",{className:"text-sm text-cscx-gray-400 mt-1",children:T.from}),c.jsx("p",{className:"text-sm text-cscx-gray-500 mt-2 line-clamp-2",children:T.snippet})]}),c.jsx("div",{className:"text-xs text-cscx-gray-500 whitespace-nowrap ml-4",children:J(T.lastMessageAt)})]})},T.id))})]}),C==="drive"&&c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Google Drive"}),c.jsx("button",{onClick:X,disabled:N,className:"px-3 py-1 text-sm bg-cscx-gray-800 hover:bg-cscx-gray-700 text-white rounded-lg transition-colors",children:N?"Loading...":"Refresh"})]}),v.length===0?c.jsx("p",{className:"text-cscx-gray-500",children:"No recent files"}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(T=>c.jsx("a",{href:T.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"bg-cscx-gray-800 rounded-lg p-4 hover:bg-cscx-gray-700 transition-colors block",children:c.jsxs("div",{className:"flex items-start gap-3",children:[T.iconLink?c.jsx("img",{src:T.iconLink,alt:"",className:"w-6 h-6"}):c.jsx("span",{className:"text-xl",children:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-white font-medium text-sm truncate",children:T.name}),c.jsxs("p",{className:"text-xs text-cscx-gray-500 mt-1",children:["Modified ",J(T.modifiedTime)]})]})]})},T.id))})]})]})]}):c.jsx("div",{className:"bg-cscx-gray-900 rounded-xl border border-cscx-gray-800 p-8",children:c.jsxs("div",{className:"text-center max-w-md mx-auto",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Connect Your Google Workspace"}),c.jsx("p",{className:"text-cscx-gray-400 mb-6",children:"Connect your Google account to access Calendar, Gmail, and Drive directly from CSCX.AI"}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-4 mb-6 text-left",children:[c.jsx("p",{className:"text-sm text-cscx-gray-300 mb-3",children:"You'll get access to:"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsxs("li",{className:"flex items-center gap-2 text-cscx-gray-300",children:[c.jsx("span",{className:"text-green-500",children:""})," Calendar events and meeting scheduling"]}),c.jsxs("li",{className:"flex items-center gap-2 text-cscx-gray-300",children:[c.jsx("span",{className:"text-green-500",children:""})," Gmail inbox and email drafting"]}),c.jsxs("li",{className:"flex items-center gap-2 text-cscx-gray-300",children:[c.jsx("span",{className:"text-green-500",children:""})," Drive files and document search"]}),c.jsxs("li",{className:"flex items-center gap-2 text-cscx-gray-300",children:[c.jsx("span",{className:"text-green-500",children:""})," AI-powered meeting briefs"]})]})]}),c.jsxs("button",{onClick:P,className:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-100 text-gray-900 font-medium py-3 px-4 rounded-lg transition-colors",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Connect Google Workspace"]}),z&&c.jsx("p",{className:"mt-4 text-sm text-red-400",children:z})]})})}function dt(t){if(typeof t=="string"||typeof t=="number")return""+t;let n="";if(Array.isArray(t))for(let a=0,i;a<t.length;a++)(i=dt(t[a]))!==""&&(n+=(n&&" ")+i);else for(let a in t)t[a]&&(n+=(n&&" ")+a);return n}var Aj={value:()=>{}};function _c(){for(var t=0,n=arguments.length,a={},i;t<n;++t){if(!(i=arguments[t]+"")||i in a||/[\s.]/.test(i))throw new Error("illegal type: "+i);a[i]=[]}return new ec(a)}function ec(t){this._=t}function Tj(t,n){return t.trim().split(/^|\s+/).map(function(a){var i="",o=a.indexOf(".");if(o>=0&&(i=a.slice(o+1),a=a.slice(0,o)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:i}})}ec.prototype=_c.prototype={constructor:ec,on:function(t,n){var a=this._,i=Tj(t+"",a),o,u=-1,d=i.length;if(arguments.length<2){for(;++u<d;)if((o=(t=i[u]).type)&&(o=Cj(a[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<d;)if(o=(t=i[u]).type)a[o]=Fp(a[o],t.name,n);else if(n==null)for(o in a)a[o]=Fp(a[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new ec(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var a=new Array(o),i=0,o,u;i<o;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,o=u.length;i<o;++i)u[i].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,u=i.length;o<u;++o)i[o].value.apply(n,a)}};function Cj(t,n){for(var a=0,i=t.length,o;a<i;++a)if((o=t[a]).name===n)return o.value}function Fp(t,n,a){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=Aj,t=t.slice(0,i).concat(t.slice(i+1));break}return a!=null&&t.push({name:n,value:a}),t}var Ih="http://www.w3.org/1999/xhtml";const Wp={svg:"http://www.w3.org/2000/svg",xhtml:Ih,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sc(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),Wp.hasOwnProperty(n)?{space:Wp[n],local:t}:t}function kj(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Ih&&n.documentElement.namespaceURI===Ih?n.createElement(t):n.createElementNS(a,t)}}function Oj(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ay(t){var n=Sc(t);return(n.local?Oj:kj)(n)}function Rj(){}function uf(t){return t==null?Rj:function(){return this.querySelector(t)}}function Mj(t){typeof t!="function"&&(t=uf(t));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var u=n[o],d=u.length,f=i[o]=new Array(d),m,p,y=0;y<d;++y)(m=u[y])&&(p=t.call(m,m.__data__,y,u))&&("__data__"in m&&(p.__data__=m.__data__),f[y]=p);return new Wt(i,this._parents)}function Dj(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zj(){return[]}function Ty(t){return t==null?zj:function(){return this.querySelectorAll(t)}}function Uj(t){return function(){return Dj(t.apply(this,arguments))}}function $j(t){typeof t=="function"?t=Uj(t):t=Ty(t);for(var n=this._groups,a=n.length,i=[],o=[],u=0;u<a;++u)for(var d=n[u],f=d.length,m,p=0;p<f;++p)(m=d[p])&&(i.push(t.call(m,m.__data__,p,d)),o.push(m));return new Wt(i,o)}function Cy(t){return function(){return this.matches(t)}}function ky(t){return function(n){return n.matches(t)}}var Lj=Array.prototype.find;function Bj(t){return function(){return Lj.call(this.children,t)}}function Hj(){return this.firstElementChild}function qj(t){return this.select(t==null?Hj:Bj(typeof t=="function"?t:ky(t)))}var Ij=Array.prototype.filter;function Vj(){return Array.from(this.children)}function Gj(t){return function(){return Ij.call(this.children,t)}}function Pj(t){return this.selectAll(t==null?Vj:Gj(typeof t=="function"?t:ky(t)))}function Yj(t){typeof t!="function"&&(t=Cy(t));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var u=n[o],d=u.length,f=i[o]=[],m,p=0;p<d;++p)(m=u[p])&&t.call(m,m.__data__,p,u)&&f.push(m);return new Wt(i,this._parents)}function Oy(t){return new Array(t.length)}function Xj(){return new Wt(this._enter||this._groups.map(Oy),this._parents)}function oc(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}oc.prototype={constructor:oc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Kj(t){return function(){return t}}function Qj(t,n,a,i,o,u){for(var d=0,f,m=n.length,p=u.length;d<p;++d)(f=n[d])?(f.__data__=u[d],i[d]=f):a[d]=new oc(t,u[d]);for(;d<m;++d)(f=n[d])&&(o[d]=f)}function Jj(t,n,a,i,o,u,d){var f,m,p=new Map,y=n.length,x=u.length,v=new Array(y),w;for(f=0;f<y;++f)(m=n[f])&&(v[f]=w=d.call(m,m.__data__,f,n)+"",p.has(w)?o[f]=m:p.set(w,m));for(f=0;f<x;++f)w=d.call(t,u[f],f,u)+"",(m=p.get(w))?(i[f]=m,m.__data__=u[f],p.delete(w)):a[f]=new oc(t,u[f]);for(f=0;f<y;++f)(m=n[f])&&p.get(v[f])===m&&(o[f]=m)}function Zj(t){return t.__data__}function Fj(t,n){if(!arguments.length)return Array.from(this,Zj);var a=n?Jj:Qj,i=this._parents,o=this._groups;typeof t!="function"&&(t=Kj(t));for(var u=o.length,d=new Array(u),f=new Array(u),m=new Array(u),p=0;p<u;++p){var y=i[p],x=o[p],v=x.length,w=Wj(t.call(y,y&&y.__data__,p,i)),_=w.length,A=f[p]=new Array(_),E=d[p]=new Array(_),S=m[p]=new Array(v);a(y,x,A,E,S,w,n);for(var N=0,j=0,C,D;N<_;++N)if(C=A[N]){for(N>=j&&(j=N+1);!(D=E[j])&&++j<_;);C._next=D||null}}return d=new Wt(d,i),d._enter=f,d._exit=m,d}function Wj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eN(){return new Wt(this._exit||this._groups.map(Oy),this._parents)}function tN(t,n,a){var i=this.enter(),o=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(o=n(o),o&&(o=o.selection())),a==null?u.remove():a(u),i&&o?i.merge(o).order():o}function nN(t){for(var n=t.selection?t.selection():t,a=this._groups,i=n._groups,o=a.length,u=i.length,d=Math.min(o,u),f=new Array(o),m=0;m<d;++m)for(var p=a[m],y=i[m],x=p.length,v=f[m]=new Array(x),w,_=0;_<x;++_)(w=p[_]||y[_])&&(v[_]=w);for(;m<o;++m)f[m]=a[m];return new Wt(f,this._parents)}function sN(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var i=t[n],o=i.length-1,u=i[o],d;--o>=0;)(d=i[o])&&(u&&d.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(d,u),u=d);return this}function aN(t){t||(t=rN);function n(x,v){return x&&v?t(x.__data__,v.__data__):!x-!v}for(var a=this._groups,i=a.length,o=new Array(i),u=0;u<i;++u){for(var d=a[u],f=d.length,m=o[u]=new Array(f),p,y=0;y<f;++y)(p=d[y])&&(m[y]=p);m.sort(n)}return new Wt(o,this._parents).order()}function rN(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function iN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function lN(){return Array.from(this)}function oN(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var i=t[n],o=0,u=i.length;o<u;++o){var d=i[o];if(d)return d}return null}function cN(){let t=0;for(const n of this)++t;return t}function uN(){return!this.node()}function dN(t){for(var n=this._groups,a=0,i=n.length;a<i;++a)for(var o=n[a],u=0,d=o.length,f;u<d;++u)(f=o[u])&&t.call(f,f.__data__,u,o);return this}function hN(t){return function(){this.removeAttribute(t)}}function fN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mN(t,n){return function(){this.setAttribute(t,n)}}function gN(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function pN(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function xN(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function yN(t,n){var a=Sc(t);if(arguments.length<2){var i=this.node();return a.local?i.getAttributeNS(a.space,a.local):i.getAttribute(a)}return this.each((n==null?a.local?fN:hN:typeof n=="function"?a.local?xN:pN:a.local?gN:mN)(a,n))}function Ry(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vN(t){return function(){this.style.removeProperty(t)}}function bN(t,n,a){return function(){this.style.setProperty(t,n,a)}}function wN(t,n,a){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,a)}}function _N(t,n,a){return arguments.length>1?this.each((n==null?vN:typeof n=="function"?wN:bN)(t,n,a??"")):Mr(this.node(),t)}function Mr(t,n){return t.style.getPropertyValue(n)||Ry(t).getComputedStyle(t,null).getPropertyValue(n)}function SN(t){return function(){delete this[t]}}function jN(t,n){return function(){this[t]=n}}function NN(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function EN(t,n){return arguments.length>1?this.each((n==null?SN:typeof n=="function"?NN:jN)(t,n)):this.node()[t]}function My(t){return t.trim().split(/^|\s+/)}function df(t){return t.classList||new Dy(t)}function Dy(t){this._node=t,this._names=My(t.getAttribute("class")||"")}Dy.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function zy(t,n){for(var a=df(t),i=-1,o=n.length;++i<o;)a.add(n[i])}function Uy(t,n){for(var a=df(t),i=-1,o=n.length;++i<o;)a.remove(n[i])}function AN(t){return function(){zy(this,t)}}function TN(t){return function(){Uy(this,t)}}function CN(t,n){return function(){(n.apply(this,arguments)?zy:Uy)(this,t)}}function kN(t,n){var a=My(t+"");if(arguments.length<2){for(var i=df(this.node()),o=-1,u=a.length;++o<u;)if(!i.contains(a[o]))return!1;return!0}return this.each((typeof n=="function"?CN:n?AN:TN)(a,n))}function ON(){this.textContent=""}function RN(t){return function(){this.textContent=t}}function MN(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function DN(t){return arguments.length?this.each(t==null?ON:(typeof t=="function"?MN:RN)(t)):this.node().textContent}function zN(){this.innerHTML=""}function UN(t){return function(){this.innerHTML=t}}function $N(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function LN(t){return arguments.length?this.each(t==null?zN:(typeof t=="function"?$N:UN)(t)):this.node().innerHTML}function BN(){this.nextSibling&&this.parentNode.appendChild(this)}function HN(){return this.each(BN)}function qN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IN(){return this.each(qN)}function VN(t){var n=typeof t=="function"?t:Ay(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function GN(){return null}function PN(t,n){var a=typeof t=="function"?t:Ay(t),i=n==null?GN:typeof n=="function"?n:uf(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),i.apply(this,arguments)||null)})}function YN(){var t=this.parentNode;t&&t.removeChild(this)}function XN(){return this.each(YN)}function KN(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function QN(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function JN(t){return this.select(t?QN:KN)}function ZN(t){return arguments.length?this.property("__data__",t):this.node().__data__}function FN(t){return function(n){t.call(this,n,this.__data__)}}function WN(t){return t.trim().split(/^|\s+/).map(function(n){var a="",i=n.indexOf(".");return i>=0&&(a=n.slice(i+1),n=n.slice(0,i)),{type:n,name:a}})}function eE(t){return function(){var n=this.__on;if(n){for(var a=0,i=-1,o=n.length,u;a<o;++a)u=n[a],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):n[++i]=u;++i?n.length=i:delete this.__on}}}function tE(t,n,a){return function(){var i=this.__on,o,u=FN(n);if(i){for(var d=0,f=i.length;d<f;++d)if((o=i[d]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=a),o.value=n;return}}this.addEventListener(t.type,u,a),o={type:t.type,name:t.name,value:n,listener:u,options:a},i?i.push(o):this.__on=[o]}}function nE(t,n,a){var i=WN(t+""),o,u=i.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var m=0,p=f.length,y;m<p;++m)for(o=0,y=f[m];o<u;++o)if((d=i[o]).type===y.type&&d.name===y.name)return y.value}return}for(f=n?tE:eE,o=0;o<u;++o)this.each(f(i[o],n,a));return this}function $y(t,n,a){var i=Ry(t),o=i.CustomEvent;typeof o=="function"?o=new o(n,a):(o=i.document.createEvent("Event"),a?(o.initEvent(n,a.bubbles,a.cancelable),o.detail=a.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function sE(t,n){return function(){return $y(this,t,n)}}function aE(t,n){return function(){return $y(this,t,n.apply(this,arguments))}}function rE(t,n){return this.each((typeof n=="function"?aE:sE)(t,n))}function*iE(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var i=t[n],o=0,u=i.length,d;o<u;++o)(d=i[o])&&(yield d)}var Ly=[null];function Wt(t,n){this._groups=t,this._parents=n}function cl(){return new Wt([[document.documentElement]],Ly)}function lE(){return this}Wt.prototype=cl.prototype={constructor:Wt,select:Mj,selectAll:$j,selectChild:qj,selectChildren:Pj,filter:Yj,data:Fj,enter:Xj,exit:eN,join:tN,merge:nN,selection:lE,order:sN,sort:aN,call:iN,nodes:lN,node:oN,size:cN,empty:uN,each:dN,attr:yN,style:_N,property:EN,classed:kN,text:DN,html:LN,raise:HN,lower:IN,append:VN,insert:PN,remove:XN,clone:JN,datum:ZN,on:nE,dispatch:rE,[Symbol.iterator]:iE};function Ft(t){return typeof t=="string"?new Wt([[document.querySelector(t)]],[document.documentElement]):new Wt([[t]],Ly)}function oE(t){let n;for(;n=t.sourceEvent;)t=n;return t}function yn(t,n){if(t=oE(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var i=a.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}const cE={passive:!1},Fi={capture:!0,passive:!1};function yh(t){t.stopImmediatePropagation()}function Or(t){t.preventDefault(),t.stopImmediatePropagation()}function By(t){var n=t.document.documentElement,a=Ft(t).on("dragstart.drag",Or,Fi);"onselectstart"in n?a.on("selectstart.drag",Or,Fi):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Hy(t,n){var a=t.document.documentElement,i=Ft(t).on("dragstart.drag",null);n&&(i.on("click.drag",Or,Fi),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in a?i.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const Po=t=>()=>t;function Vh(t,{sourceEvent:n,subject:a,target:i,identifier:o,active:u,x:d,y:f,dx:m,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Vh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function uE(t){return!t.ctrlKey&&!t.button}function dE(){return this.parentNode}function hE(t,n){return n??{x:t.x,y:t.y}}function fE(){return navigator.maxTouchPoints||"ontouchstart"in this}function qy(){var t=uE,n=dE,a=hE,i=fE,o={},u=_c("start","drag","end"),d=0,f,m,p,y,x=0;function v(C){C.on("mousedown.drag",w).filter(i).on("touchstart.drag",E).on("touchmove.drag",S,cE).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(C,D){if(!(y||!t.call(this,C,D))){var z=j(this,n.call(this,C,D),C,D,"mouse");z&&(Ft(C.view).on("mousemove.drag",_,Fi).on("mouseup.drag",A,Fi),By(C.view),yh(C),p=!1,f=C.clientX,m=C.clientY,z("start",C))}}function _(C){if(Or(C),!p){var D=C.clientX-f,z=C.clientY-m;p=D*D+z*z>x}o.mouse("drag",C)}function A(C){Ft(C.view).on("mousemove.drag mouseup.drag",null),Hy(C.view,p),Or(C),o.mouse("end",C)}function E(C,D){if(t.call(this,C,D)){var z=C.changedTouches,R=n.call(this,C,D),L=z.length,I,Q;for(I=0;I<L;++I)(Q=j(this,R,C,D,z[I].identifier,z[I]))&&(yh(C),Q("start",C,z[I]))}}function S(C){var D=C.changedTouches,z=D.length,R,L;for(R=0;R<z;++R)(L=o[D[R].identifier])&&(Or(C),L("drag",C,D[R]))}function N(C){var D=C.changedTouches,z=D.length,R,L;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),R=0;R<z;++R)(L=o[D[R].identifier])&&(yh(C),L("end",C,D[R]))}function j(C,D,z,R,L,I){var Q=u.copy(),Y=yn(I||z,D),X,P,U;if((U=a.call(C,new Vh("beforestart",{sourceEvent:z,target:v,identifier:L,active:d,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:Q}),R))!=null)return X=U.x-Y[0]||0,P=U.y-Y[1]||0,function J(T,$,q){var V=Y,ne;switch(T){case"start":o[L]=J,ne=d++;break;case"end":delete o[L],--d;case"drag":Y=yn(q||$,D),ne=d;break}Q.call(T,C,new Vh(T,{sourceEvent:$,subject:U,target:v,identifier:L,active:ne,x:Y[0]+X,y:Y[1]+P,dx:Y[0]-V[0],dy:Y[1]-V[1],dispatch:Q}),R)}}return v.filter=function(C){return arguments.length?(t=typeof C=="function"?C:Po(!!C),v):t},v.container=function(C){return arguments.length?(n=typeof C=="function"?C:Po(C),v):n},v.subject=function(C){return arguments.length?(a=typeof C=="function"?C:Po(C),v):a},v.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:Po(!!C),v):i},v.on=function(){var C=u.on.apply(u,arguments);return C===u?v:C},v.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,v):Math.sqrt(x)},v}function hf(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function Iy(t,n){var a=Object.create(t.prototype);for(var i in n)a[i]=n[i];return a}function ul(){}var Wi=.7,cc=1/Wi,Rr="\\s*([+-]?\\d+)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mE=/^#([0-9a-f]{3,8})$/,gE=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),pE=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),xE=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${el}\\)$`),yE=new RegExp(`^rgba\\(${kn},${kn},${kn},${el}\\)$`),vE=new RegExp(`^hsl\\(${el},${kn},${kn}\\)$`),bE=new RegExp(`^hsla\\(${el},${kn},${kn},${el}\\)$`),ex={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hf(ul,Na,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tx,formatHex:tx,formatHex8:wE,formatHsl:_E,formatRgb:nx,toString:nx});function tx(){return this.rgb().formatHex()}function wE(){return this.rgb().formatHex8()}function _E(){return Vy(this).formatHsl()}function nx(){return this.rgb().formatRgb()}function Na(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=mE.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?sx(n):a===3?new Ht(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?Yo(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?Yo(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=gE.exec(t))?new Ht(n[1],n[2],n[3],1):(n=pE.exec(t))?new Ht(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=xE.exec(t))?Yo(n[1],n[2],n[3],n[4]):(n=yE.exec(t))?Yo(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vE.exec(t))?ix(n[1],n[2]/100,n[3]/100,1):(n=bE.exec(t))?ix(n[1],n[2]/100,n[3]/100,n[4]):ex.hasOwnProperty(t)?sx(ex[t]):t==="transparent"?new Ht(NaN,NaN,NaN,0):null}function sx(t){return new Ht(t>>16&255,t>>8&255,t&255,1)}function Yo(t,n,a,i){return i<=0&&(t=n=a=NaN),new Ht(t,n,a,i)}function SE(t){return t instanceof ul||(t=Na(t)),t?(t=t.rgb(),new Ht(t.r,t.g,t.b,t.opacity)):new Ht}function Gh(t,n,a,i){return arguments.length===1?SE(t):new Ht(t,n,a,i??1)}function Ht(t,n,a,i){this.r=+t,this.g=+n,this.b=+a,this.opacity=+i}hf(Ht,Gh,Iy(ul,{brighter(t){return t=t==null?cc:Math.pow(cc,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wi:Math.pow(Wi,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ht(Sa(this.r),Sa(this.g),Sa(this.b),uc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ax,formatHex:ax,formatHex8:jE,formatRgb:rx,toString:rx}));function ax(){return`#${_a(this.r)}${_a(this.g)}${_a(this.b)}`}function jE(){return`#${_a(this.r)}${_a(this.g)}${_a(this.b)}${_a((isNaN(this.opacity)?1:this.opacity)*255)}`}function rx(){const t=uc(this.opacity);return`${t===1?"rgb(":"rgba("}${Sa(this.r)}, ${Sa(this.g)}, ${Sa(this.b)}${t===1?")":`, ${t})`}`}function uc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Sa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _a(t){return t=Sa(t),(t<16?"0":"")+t.toString(16)}function ix(t,n,a,i){return i<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new vn(t,n,a,i)}function Vy(t){if(t instanceof vn)return new vn(t.h,t.s,t.l,t.opacity);if(t instanceof ul||(t=Na(t)),!t)return new vn;if(t instanceof vn)return t;t=t.rgb();var n=t.r/255,a=t.g/255,i=t.b/255,o=Math.min(n,a,i),u=Math.max(n,a,i),d=NaN,f=u-o,m=(u+o)/2;return f?(n===u?d=(a-i)/f+(a<i)*6:a===u?d=(i-n)/f+2:d=(n-a)/f+4,f/=m<.5?u+o:2-u-o,d*=60):f=m>0&&m<1?0:d,new vn(d,f,m,t.opacity)}function NE(t,n,a,i){return arguments.length===1?Vy(t):new vn(t,n,a,i??1)}function vn(t,n,a,i){this.h=+t,this.s=+n,this.l=+a,this.opacity=+i}hf(vn,NE,Iy(ul,{brighter(t){return t=t==null?cc:Math.pow(cc,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wi:Math.pow(Wi,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,i=a+(a<.5?a:1-a)*n,o=2*a-i;return new Ht(vh(t>=240?t-240:t+120,o,i),vh(t,o,i),vh(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new vn(lx(this.h),Xo(this.s),Xo(this.l),uc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=uc(this.opacity);return`${t===1?"hsl(":"hsla("}${lx(this.h)}, ${Xo(this.s)*100}%, ${Xo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function lx(t){return t=(t||0)%360,t<0?t+360:t}function Xo(t){return Math.max(0,Math.min(1,t||0))}function vh(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}const ff=t=>()=>t;function EE(t,n){return function(a){return t+a*n}}function AE(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(i){return Math.pow(t+i*n,a)}}function TE(t){return(t=+t)==1?Gy:function(n,a){return a-n?AE(n,a,t):ff(isNaN(n)?a:n)}}function Gy(t,n){var a=n-t;return a?EE(t,a):ff(isNaN(t)?n:t)}const dc=(function t(n){var a=TE(n);function i(o,u){var d=a((o=Gh(o)).r,(u=Gh(u)).r),f=a(o.g,u.g),m=a(o.b,u.b),p=Gy(o.opacity,u.opacity);return function(y){return o.r=d(y),o.g=f(y),o.b=m(y),o.opacity=p(y),o+""}}return i.gamma=t,i})(1);function CE(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,i=n.slice(),o;return function(u){for(o=0;o<a;++o)i[o]=t[o]*(1-u)+n[o]*u;return i}}function kE(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function OE(t,n){var a=n?n.length:0,i=t?Math.min(a,t.length):0,o=new Array(i),u=new Array(a),d;for(d=0;d<i;++d)o[d]=Gi(t[d],n[d]);for(;d<a;++d)u[d]=n[d];return function(f){for(d=0;d<i;++d)u[d]=o[d](f);return u}}function RE(t,n){var a=new Date;return t=+t,n=+n,function(i){return a.setTime(t*(1-i)+n*i),a}}function Cn(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function ME(t,n){var a={},i={},o;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in t?a[o]=Gi(t[o],n[o]):i[o]=n[o];return function(u){for(o in a)i[o]=a[o](u);return i}}var Ph=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bh=new RegExp(Ph.source,"g");function DE(t){return function(){return t}}function zE(t){return function(n){return t(n)+""}}function Py(t,n){var a=Ph.lastIndex=bh.lastIndex=0,i,o,u,d=-1,f=[],m=[];for(t=t+"",n=n+"";(i=Ph.exec(t))&&(o=bh.exec(n));)(u=o.index)>a&&(u=n.slice(a,u),f[d]?f[d]+=u:f[++d]=u),(i=i[0])===(o=o[0])?f[d]?f[d]+=o:f[++d]=o:(f[++d]=null,m.push({i:d,x:Cn(i,o)})),a=bh.lastIndex;return a<n.length&&(u=n.slice(a),f[d]?f[d]+=u:f[++d]=u),f.length<2?m[0]?zE(m[0].x):DE(n):(n=m.length,function(p){for(var y=0,x;y<n;++y)f[(x=m[y]).i]=x.x(p);return f.join("")})}function Gi(t,n){var a=typeof n,i;return n==null||a==="boolean"?ff(n):(a==="number"?Cn:a==="string"?(i=Na(n))?(n=i,dc):Py:n instanceof Na?dc:n instanceof Date?RE:kE(n)?CE:Array.isArray(n)?OE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ME:Cn)(t,n)}var ox=180/Math.PI,Yh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yy(t,n,a,i,o,u){var d,f,m;return(d=Math.sqrt(t*t+n*n))&&(t/=d,n/=d),(m=t*a+n*i)&&(a-=t*m,i-=n*m),(f=Math.sqrt(a*a+i*i))&&(a/=f,i/=f,m/=f),t*i<n*a&&(t=-t,n=-n,m=-m,d=-d),{translateX:o,translateY:u,rotate:Math.atan2(n,t)*ox,skewX:Math.atan(m)*ox,scaleX:d,scaleY:f}}var Ko;function UE(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Yh:Yy(n.a,n.b,n.c,n.d,n.e,n.f)}function $E(t){return t==null||(Ko||(Ko=document.createElementNS("http://www.w3.org/2000/svg","g")),Ko.setAttribute("transform",t),!(t=Ko.transform.baseVal.consolidate()))?Yh:(t=t.matrix,Yy(t.a,t.b,t.c,t.d,t.e,t.f))}function Xy(t,n,a,i){function o(p){return p.length?p.pop()+" ":""}function u(p,y,x,v,w,_){if(p!==x||y!==v){var A=w.push("translate(",null,n,null,a);_.push({i:A-4,x:Cn(p,x)},{i:A-2,x:Cn(y,v)})}else(x||v)&&w.push("translate("+x+n+v+a)}function d(p,y,x,v){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),v.push({i:x.push(o(x)+"rotate(",null,i)-2,x:Cn(p,y)})):y&&x.push(o(x)+"rotate("+y+i)}function f(p,y,x,v){p!==y?v.push({i:x.push(o(x)+"skewX(",null,i)-2,x:Cn(p,y)}):y&&x.push(o(x)+"skewX("+y+i)}function m(p,y,x,v,w,_){if(p!==x||y!==v){var A=w.push(o(w)+"scale(",null,",",null,")");_.push({i:A-4,x:Cn(p,x)},{i:A-2,x:Cn(y,v)})}else(x!==1||v!==1)&&w.push(o(w)+"scale("+x+","+v+")")}return function(p,y){var x=[],v=[];return p=t(p),y=t(y),u(p.translateX,p.translateY,y.translateX,y.translateY,x,v),d(p.rotate,y.rotate,x,v),f(p.skewX,y.skewX,x,v),m(p.scaleX,p.scaleY,y.scaleX,y.scaleY,x,v),p=y=null,function(w){for(var _=-1,A=v.length,E;++_<A;)x[(E=v[_]).i]=E.x(w);return x.join("")}}}var LE=Xy(UE,"px, ","px)","deg)"),BE=Xy($E,", ",")",")"),HE=1e-12;function cx(t){return((t=Math.exp(t))+1/t)/2}function qE(t){return((t=Math.exp(t))-1/t)/2}function IE(t){return((t=Math.exp(2*t))-1)/(t+1)}const tc=(function t(n,a,i){function o(u,d){var f=u[0],m=u[1],p=u[2],y=d[0],x=d[1],v=d[2],w=y-f,_=x-m,A=w*w+_*_,E,S;if(A<HE)S=Math.log(v/p)/n,E=function(R){return[f+R*w,m+R*_,p*Math.exp(n*R*S)]};else{var N=Math.sqrt(A),j=(v*v-p*p+i*A)/(2*p*a*N),C=(v*v-p*p-i*A)/(2*v*a*N),D=Math.log(Math.sqrt(j*j+1)-j),z=Math.log(Math.sqrt(C*C+1)-C);S=(z-D)/n,E=function(R){var L=R*S,I=cx(D),Q=p/(a*N)*(I*IE(n*L+D)-qE(D));return[f+Q*w,m+Q*_,p*I/cx(n*L+D)]}}return E.duration=S*1e3*n/Math.SQRT2,E}return o.rho=function(u){var d=Math.max(.001,+u),f=d*d,m=f*f;return t(d,f,m)},o})(Math.SQRT2,2,4);var Dr=0,Hi=0,$i=0,Ky=1e3,hc,qi,fc=0,Ea=0,jc=0,tl=typeof performance=="object"&&performance.now?performance:Date,Qy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mf(){return Ea||(Qy(VE),Ea=tl.now()+jc)}function VE(){Ea=0}function mc(){this._call=this._time=this._next=null}mc.prototype=Jy.prototype={constructor:mc,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?mf():+a)+(n==null?0:+n),!this._next&&qi!==this&&(qi?qi._next=this:hc=this,qi=this),this._call=t,this._time=a,Xh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xh())}};function Jy(t,n,a){var i=new mc;return i.restart(t,n,a),i}function GE(){mf(),++Dr;for(var t=hc,n;t;)(n=Ea-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Dr}function ux(){Ea=(fc=tl.now())+jc,Dr=Hi=0;try{GE()}finally{Dr=0,YE(),Ea=0}}function PE(){var t=tl.now(),n=t-fc;n>Ky&&(jc-=n,fc=t)}function YE(){for(var t,n=hc,a,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:hc=a);qi=t,Xh(i)}function Xh(t){if(!Dr){Hi&&(Hi=clearTimeout(Hi));var n=t-Ea;n>24?(t<1/0&&(Hi=setTimeout(ux,t-tl.now()-jc)),$i&&($i=clearInterval($i))):($i||(fc=tl.now(),$i=setInterval(PE,Ky)),Dr=1,Qy(ux))}}function dx(t,n,a){var i=new mc;return n=n==null?0:+n,i.restart(o=>{i.stop(),t(o+n)},n,a),i}var XE=_c("start","end","cancel","interrupt"),KE=[],Zy=0,hx=1,Kh=2,nc=3,fx=4,Qh=5,sc=6;function Nc(t,n,a,i,o,u){var d=t.__transition;if(!d)t.__transition={};else if(a in d)return;QE(t,a,{name:n,index:i,group:o,on:XE,tween:KE,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Zy})}function gf(t,n){var a=_n(t,n);if(a.state>Zy)throw new Error("too late; already scheduled");return a}function Rn(t,n){var a=_n(t,n);if(a.state>nc)throw new Error("too late; already running");return a}function _n(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function QE(t,n,a){var i=t.__transition,o;i[n]=a,a.timer=Jy(u,0,a.time);function u(p){a.state=hx,a.timer.restart(d,a.delay,a.time),a.delay<=p&&d(p-a.delay)}function d(p){var y,x,v,w;if(a.state!==hx)return m();for(y in i)if(w=i[y],w.name===a.name){if(w.state===nc)return dx(d);w.state===fx?(w.state=sc,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[y]):+y<n&&(w.state=sc,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[y])}if(dx(function(){a.state===nc&&(a.state=fx,a.timer.restart(f,a.delay,a.time),f(p))}),a.state=Kh,a.on.call("start",t,t.__data__,a.index,a.group),a.state===Kh){for(a.state=nc,o=new Array(v=a.tween.length),y=0,x=-1;y<v;++y)(w=a.tween[y].value.call(t,t.__data__,a.index,a.group))&&(o[++x]=w);o.length=x+1}}function f(p){for(var y=p<a.duration?a.ease.call(null,p/a.duration):(a.timer.restart(m),a.state=Qh,1),x=-1,v=o.length;++x<v;)o[x].call(t,y);a.state===Qh&&(a.on.call("end",t,t.__data__,a.index,a.group),m())}function m(){a.state=sc,a.timer.stop(),delete i[n];for(var p in i)return;delete t.__transition}}function ac(t,n){var a=t.__transition,i,o,u=!0,d;if(a){n=n==null?null:n+"";for(d in a){if((i=a[d]).name!==n){u=!1;continue}o=i.state>Kh&&i.state<Qh,i.state=sc,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete a[d]}u&&delete t.__transition}}function JE(t){return this.each(function(){ac(this,t)})}function ZE(t,n){var a,i;return function(){var o=Rn(this,t),u=o.tween;if(u!==a){i=a=u;for(var d=0,f=i.length;d<f;++d)if(i[d].name===n){i=i.slice(),i.splice(d,1);break}}o.tween=i}}function FE(t,n,a){var i,o;if(typeof a!="function")throw new Error;return function(){var u=Rn(this,t),d=u.tween;if(d!==i){o=(i=d).slice();for(var f={name:n,value:a},m=0,p=o.length;m<p;++m)if(o[m].name===n){o[m]=f;break}m===p&&o.push(f)}u.tween=o}}function WE(t,n){var a=this._id;if(t+="",arguments.length<2){for(var i=_n(this.node(),a).tween,o=0,u=i.length,d;o<u;++o)if((d=i[o]).name===t)return d.value;return null}return this.each((n==null?ZE:FE)(a,t,n))}function pf(t,n,a){var i=t._id;return t.each(function(){var o=Rn(this,i);(o.value||(o.value={}))[n]=a.apply(this,arguments)}),function(o){return _n(o,i).value[n]}}function Fy(t,n){var a;return(typeof n=="number"?Cn:n instanceof Na?dc:(a=Na(n))?(n=a,dc):Py)(t,n)}function eA(t){return function(){this.removeAttribute(t)}}function tA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nA(t,n,a){var i,o=a+"",u;return function(){var d=this.getAttribute(t);return d===o?null:d===i?u:u=n(i=d,a)}}function sA(t,n,a){var i,o=a+"",u;return function(){var d=this.getAttributeNS(t.space,t.local);return d===o?null:d===i?u:u=n(i=d,a)}}function aA(t,n,a){var i,o,u;return function(){var d,f=a(this),m;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),m=f+"",d===m?null:d===i&&m===o?u:(o=m,u=n(i=d,f)))}}function rA(t,n,a){var i,o,u;return function(){var d,f=a(this),m;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),m=f+"",d===m?null:d===i&&m===o?u:(o=m,u=n(i=d,f)))}}function iA(t,n){var a=Sc(t),i=a==="transform"?BE:Fy;return this.attrTween(t,typeof n=="function"?(a.local?rA:aA)(a,i,pf(this,"attr."+t,n)):n==null?(a.local?tA:eA)(a):(a.local?sA:nA)(a,i,n))}function lA(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function oA(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function cA(t,n){var a,i;function o(){var u=n.apply(this,arguments);return u!==i&&(a=(i=u)&&oA(t,u)),a}return o._value=n,o}function uA(t,n){var a,i;function o(){var u=n.apply(this,arguments);return u!==i&&(a=(i=u)&&lA(t,u)),a}return o._value=n,o}function dA(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var i=Sc(t);return this.tween(a,(i.local?cA:uA)(i,n))}function hA(t,n){return function(){gf(this,t).delay=+n.apply(this,arguments)}}function fA(t,n){return n=+n,function(){gf(this,t).delay=n}}function mA(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?hA:fA)(n,t)):_n(this.node(),n).delay}function gA(t,n){return function(){Rn(this,t).duration=+n.apply(this,arguments)}}function pA(t,n){return n=+n,function(){Rn(this,t).duration=n}}function xA(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?gA:pA)(n,t)):_n(this.node(),n).duration}function yA(t,n){if(typeof n!="function")throw new Error;return function(){Rn(this,t).ease=n}}function vA(t){var n=this._id;return arguments.length?this.each(yA(n,t)):_n(this.node(),n).ease}function bA(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;Rn(this,t).ease=a}}function wA(t){if(typeof t!="function")throw new Error;return this.each(bA(this._id,t))}function _A(t){typeof t!="function"&&(t=Cy(t));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var u=n[o],d=u.length,f=i[o]=[],m,p=0;p<d;++p)(m=u[p])&&t.call(m,m.__data__,p,u)&&f.push(m);return new rs(i,this._parents,this._name,this._id)}function SA(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,i=n.length,o=a.length,u=Math.min(i,o),d=new Array(i),f=0;f<u;++f)for(var m=n[f],p=a[f],y=m.length,x=d[f]=new Array(y),v,w=0;w<y;++w)(v=m[w]||p[w])&&(x[w]=v);for(;f<i;++f)d[f]=n[f];return new rs(d,this._parents,this._name,this._id)}function jA(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function NA(t,n,a){var i,o,u=jA(n)?gf:Rn;return function(){var d=u(this,t),f=d.on;f!==i&&(o=(i=f).copy()).on(n,a),d.on=o}}function EA(t,n){var a=this._id;return arguments.length<2?_n(this.node(),a).on.on(t):this.each(NA(a,t,n))}function AA(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function TA(){return this.on("end.remove",AA(this._id))}function CA(t){var n=this._name,a=this._id;typeof t!="function"&&(t=uf(t));for(var i=this._groups,o=i.length,u=new Array(o),d=0;d<o;++d)for(var f=i[d],m=f.length,p=u[d]=new Array(m),y,x,v=0;v<m;++v)(y=f[v])&&(x=t.call(y,y.__data__,v,f))&&("__data__"in y&&(x.__data__=y.__data__),p[v]=x,Nc(p[v],n,a,v,p,_n(y,a)));return new rs(u,this._parents,n,a)}function kA(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Ty(t));for(var i=this._groups,o=i.length,u=[],d=[],f=0;f<o;++f)for(var m=i[f],p=m.length,y,x=0;x<p;++x)if(y=m[x]){for(var v=t.call(y,y.__data__,x,m),w,_=_n(y,a),A=0,E=v.length;A<E;++A)(w=v[A])&&Nc(w,n,a,A,v,_);u.push(v),d.push(y)}return new rs(u,d,n,a)}var OA=cl.prototype.constructor;function RA(){return new OA(this._groups,this._parents)}function MA(t,n){var a,i,o;return function(){var u=Mr(this,t),d=(this.style.removeProperty(t),Mr(this,t));return u===d?null:u===a&&d===i?o:o=n(a=u,i=d)}}function Wy(t){return function(){this.style.removeProperty(t)}}function DA(t,n,a){var i,o=a+"",u;return function(){var d=Mr(this,t);return d===o?null:d===i?u:u=n(i=d,a)}}function zA(t,n,a){var i,o,u;return function(){var d=Mr(this,t),f=a(this),m=f+"";return f==null&&(m=f=(this.style.removeProperty(t),Mr(this,t))),d===m?null:d===i&&m===o?u:(o=m,u=n(i=d,f))}}function UA(t,n){var a,i,o,u="style."+n,d="end."+u,f;return function(){var m=Rn(this,t),p=m.on,y=m.value[u]==null?f||(f=Wy(n)):void 0;(p!==a||o!==y)&&(i=(a=p).copy()).on(d,o=y),m.on=i}}function $A(t,n,a){var i=(t+="")=="transform"?LE:Fy;return n==null?this.styleTween(t,MA(t,i)).on("end.style."+t,Wy(t)):typeof n=="function"?this.styleTween(t,zA(t,i,pf(this,"style."+t,n))).each(UA(this._id,t)):this.styleTween(t,DA(t,i,n),a).on("end.style."+t,null)}function LA(t,n,a){return function(i){this.style.setProperty(t,n.call(this,i),a)}}function BA(t,n,a){var i,o;function u(){var d=n.apply(this,arguments);return d!==o&&(i=(o=d)&&LA(t,d,a)),i}return u._value=n,u}function HA(t,n,a){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,BA(t,n,a??""))}function qA(t){return function(){this.textContent=t}}function IA(t){return function(){var n=t(this);this.textContent=n??""}}function VA(t){return this.tween("text",typeof t=="function"?IA(pf(this,"text",t)):qA(t==null?"":t+""))}function GA(t){return function(n){this.textContent=t.call(this,n)}}function PA(t){var n,a;function i(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&GA(o)),n}return i._value=t,i}function YA(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,PA(t))}function XA(){for(var t=this._name,n=this._id,a=ev(),i=this._groups,o=i.length,u=0;u<o;++u)for(var d=i[u],f=d.length,m,p=0;p<f;++p)if(m=d[p]){var y=_n(m,n);Nc(m,t,a,p,d,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new rs(i,this._parents,t,a)}function KA(){var t,n,a=this,i=a._id,o=a.size();return new Promise(function(u,d){var f={value:d},m={value:function(){--o===0&&u()}};a.each(function(){var p=Rn(this,i),y=p.on;y!==t&&(n=(t=y).copy(),n._.cancel.push(f),n._.interrupt.push(f),n._.end.push(m)),p.on=n}),o===0&&u()})}var QA=0;function rs(t,n,a,i){this._groups=t,this._parents=n,this._name=a,this._id=i}function ev(){return++QA}var ts=cl.prototype;rs.prototype={constructor:rs,select:CA,selectAll:kA,selectChild:ts.selectChild,selectChildren:ts.selectChildren,filter:_A,merge:SA,selection:RA,transition:XA,call:ts.call,nodes:ts.nodes,node:ts.node,size:ts.size,empty:ts.empty,each:ts.each,on:EA,attr:iA,attrTween:dA,style:$A,styleTween:HA,text:VA,textTween:YA,remove:TA,tween:WE,delay:mA,duration:xA,ease:vA,easeVarying:wA,end:KA,[Symbol.iterator]:ts[Symbol.iterator]};function JA(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ZA={time:null,delay:0,duration:250,ease:JA};function FA(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function WA(t){var n,a;t instanceof rs?(n=t._id,t=t._name):(n=ev(),(a=ZA).time=mf(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,u=0;u<o;++u)for(var d=i[u],f=d.length,m,p=0;p<f;++p)(m=d[p])&&Nc(m,t,n,p,d,a||FA(m,n));return new rs(i,this._parents,t,n)}cl.prototype.interrupt=JE;cl.prototype.transition=WA;const Qo=t=>()=>t;function eT(t,{sourceEvent:n,target:a,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ss(t,n,a){this.k=t,this.x=n,this.y=a}ss.prototype={constructor:ss,scale:function(t){return t===1?this:new ss(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new ss(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ec=new ss(1,0,0);tv.prototype=ss.prototype;function tv(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ec;return t.__zoom}function wh(t){t.stopImmediatePropagation()}function Li(t){t.preventDefault(),t.stopImmediatePropagation()}function tT(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function nT(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mx(){return this.__zoom||Ec}function sT(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function aT(){return navigator.maxTouchPoints||"ontouchstart"in this}function rT(t,n,a){var i=t.invertX(n[0][0])-a[0][0],o=t.invertX(n[1][0])-a[1][0],u=t.invertY(n[0][1])-a[0][1],d=t.invertY(n[1][1])-a[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),d>u?(u+d)/2:Math.min(0,u)||Math.max(0,d))}function nv(){var t=tT,n=nT,a=rT,i=sT,o=aT,u=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,m=tc,p=_c("start","zoom","end"),y,x,v,w=500,_=150,A=0,E=10;function S(U){U.property("__zoom",mx).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",Q).filter(o).on("touchstart.zoom",Y).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(U,J,T,$){var q=U.selection?U.selection():U;q.property("__zoom",mx),U!==q?D(U,J,T,$):q.interrupt().each(function(){z(this,arguments).event($).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},S.scaleBy=function(U,J,T,$){S.scaleTo(U,function(){var q=this.__zoom.k,V=typeof J=="function"?J.apply(this,arguments):J;return q*V},T,$)},S.scaleTo=function(U,J,T,$){S.transform(U,function(){var q=n.apply(this,arguments),V=this.__zoom,ne=T==null?C(q):typeof T=="function"?T.apply(this,arguments):T,O=V.invert(ne),H=typeof J=="function"?J.apply(this,arguments):J;return a(j(N(V,H),ne,O),q,d)},T,$)},S.translateBy=function(U,J,T,$){S.transform(U,function(){return a(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof T=="function"?T.apply(this,arguments):T),n.apply(this,arguments),d)},null,$)},S.translateTo=function(U,J,T,$,q){S.transform(U,function(){var V=n.apply(this,arguments),ne=this.__zoom,O=$==null?C(V):typeof $=="function"?$.apply(this,arguments):$;return a(Ec.translate(O[0],O[1]).scale(ne.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof T=="function"?-T.apply(this,arguments):-T),V,d)},$,q)};function N(U,J){return J=Math.max(u[0],Math.min(u[1],J)),J===U.k?U:new ss(J,U.x,U.y)}function j(U,J,T){var $=J[0]-T[0]*U.k,q=J[1]-T[1]*U.k;return $===U.x&&q===U.y?U:new ss(U.k,$,q)}function C(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function D(U,J,T,$){U.on("start.zoom",function(){z(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event($).end()}).tween("zoom",function(){var q=this,V=arguments,ne=z(q,V).event($),O=n.apply(q,V),H=T==null?C(O):typeof T=="function"?T.apply(q,V):T,Z=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),te=q.__zoom,le=typeof J=="function"?J.apply(q,V):J,oe=m(te.invert(H).concat(Z/te.k),le.invert(H).concat(Z/le.k));return function(de){if(de===1)de=le;else{var ce=oe(de),fe=Z/ce[2];de=new ss(fe,H[0]-ce[0]*fe,H[1]-ce[1]*fe)}ne.zoom(null,de)}})}function z(U,J,T){return!T&&U.__zooming||new R(U,J)}function R(U,J){this.that=U,this.args=J,this.active=0,this.sourceEvent=null,this.extent=n.apply(U,J),this.taps=0}R.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,J){return this.mouse&&U!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var J=Ft(this.that).datum();p.call(U,this.that,new eT(U,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:p}),J)}};function L(U,...J){if(!t.apply(this,arguments))return;var T=z(this,J).event(U),$=this.__zoom,q=Math.max(u[0],Math.min(u[1],$.k*Math.pow(2,i.apply(this,arguments)))),V=yn(U);if(T.wheel)(T.mouse[0][0]!==V[0]||T.mouse[0][1]!==V[1])&&(T.mouse[1]=$.invert(T.mouse[0]=V)),clearTimeout(T.wheel);else{if($.k===q)return;T.mouse=[V,$.invert(V)],ac(this),T.start()}Li(U),T.wheel=setTimeout(ne,_),T.zoom("mouse",a(j(N($,q),T.mouse[0],T.mouse[1]),T.extent,d));function ne(){T.wheel=null,T.end()}}function I(U,...J){if(v||!t.apply(this,arguments))return;var T=U.currentTarget,$=z(this,J,!0).event(U),q=Ft(U.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",Z,!0),V=yn(U,T),ne=U.clientX,O=U.clientY;By(U.view),wh(U),$.mouse=[V,this.__zoom.invert(V)],ac(this),$.start();function H(te){if(Li(te),!$.moved){var le=te.clientX-ne,oe=te.clientY-O;$.moved=le*le+oe*oe>A}$.event(te).zoom("mouse",a(j($.that.__zoom,$.mouse[0]=yn(te,T),$.mouse[1]),$.extent,d))}function Z(te){q.on("mousemove.zoom mouseup.zoom",null),Hy(te.view,$.moved),Li(te),$.event(te).end()}}function Q(U,...J){if(t.apply(this,arguments)){var T=this.__zoom,$=yn(U.changedTouches?U.changedTouches[0]:U,this),q=T.invert($),V=T.k*(U.shiftKey?.5:2),ne=a(j(N(T,V),$,q),n.apply(this,J),d);Li(U),f>0?Ft(this).transition().duration(f).call(D,ne,$,U):Ft(this).call(S.transform,ne,$,U)}}function Y(U,...J){if(t.apply(this,arguments)){var T=U.touches,$=T.length,q=z(this,J,U.changedTouches.length===$).event(U),V,ne,O,H;for(wh(U),ne=0;ne<$;++ne)O=T[ne],H=yn(O,this),H=[H,this.__zoom.invert(H),O.identifier],q.touch0?!q.touch1&&q.touch0[2]!==H[2]&&(q.touch1=H,q.taps=0):(q.touch0=H,V=!0,q.taps=1+!!y);y&&(y=clearTimeout(y)),V&&(q.taps<2&&(x=H[0],y=setTimeout(function(){y=null},w)),ac(this),q.start())}}function X(U,...J){if(this.__zooming){var T=z(this,J).event(U),$=U.changedTouches,q=$.length,V,ne,O,H;for(Li(U),V=0;V<q;++V)ne=$[V],O=yn(ne,this),T.touch0&&T.touch0[2]===ne.identifier?T.touch0[0]=O:T.touch1&&T.touch1[2]===ne.identifier&&(T.touch1[0]=O);if(ne=T.that.__zoom,T.touch1){var Z=T.touch0[0],te=T.touch0[1],le=T.touch1[0],oe=T.touch1[1],de=(de=le[0]-Z[0])*de+(de=le[1]-Z[1])*de,ce=(ce=oe[0]-te[0])*ce+(ce=oe[1]-te[1])*ce;ne=N(ne,Math.sqrt(de/ce)),O=[(Z[0]+le[0])/2,(Z[1]+le[1])/2],H=[(te[0]+oe[0])/2,(te[1]+oe[1])/2]}else if(T.touch0)O=T.touch0[0],H=T.touch0[1];else return;T.zoom("touch",a(j(ne,O,H),T.extent,d))}}function P(U,...J){if(this.__zooming){var T=z(this,J).event(U),$=U.changedTouches,q=$.length,V,ne;for(wh(U),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),V=0;V<q;++V)ne=$[V],T.touch0&&T.touch0[2]===ne.identifier?delete T.touch0:T.touch1&&T.touch1[2]===ne.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(ne=yn(ne,this),Math.hypot(x[0]-ne[0],x[1]-ne[1])<E)){var O=Ft(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return S.wheelDelta=function(U){return arguments.length?(i=typeof U=="function"?U:Qo(+U),S):i},S.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Qo(!!U),S):t},S.touchable=function(U){return arguments.length?(o=typeof U=="function"?U:Qo(!!U),S):o},S.extent=function(U){return arguments.length?(n=typeof U=="function"?U:Qo([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),S):n},S.scaleExtent=function(U){return arguments.length?(u[0]=+U[0],u[1]=+U[1],S):[u[0],u[1]]},S.translateExtent=function(U){return arguments.length?(d[0][0]=+U[0][0],d[1][0]=+U[1][0],d[0][1]=+U[0][1],d[1][1]=+U[1][1],S):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},S.constrain=function(U){return arguments.length?(a=U,S):a},S.duration=function(U){return arguments.length?(f=+U,S):f},S.interpolate=function(U){return arguments.length?(m=U,S):m},S.on=function(){var U=p.on.apply(p,arguments);return U===p?S:U},S.clickDistance=function(U){return arguments.length?(A=(U=+U)*U,S):Math.sqrt(A)},S.tapDistance=function(U){return arguments.length?(E=+U,S):E},S}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:n,sourceHandle:a,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?a:i}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},nl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],sv=["Enter"," ","Escape"],av={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:n,y:a})=>`Moved selected node ${t}. New position, x: ${n}, y: ${a}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var zr;(function(t){t.Strict="strict",t.Loose="loose"})(zr||(zr={}));var ja;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ja||(ja={}));var sl;(function(t){t.Partial="partial",t.Full="full"})(sl||(sl={}));const rv={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Is;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Is||(Is={}));var Ur;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ur||(Ur={}));var ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ye||(ye={}));const gx={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function iv(t){return t===null?null:t?"valid":"invalid"}const lv=t=>"id"in t&&"source"in t&&"target"in t,iT=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),xf=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),dl=(t,n=[0,0])=>{const{width:a,height:i}=ls(t),o=t.origin??n,u=a*o[0],d=i*o[1];return{x:t.position.x-u,y:t.position.y-d}},lT=(t,n={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const a=t.reduce((i,o)=>{const u=typeof o=="string";let d=!n.nodeLookup&&!u?o:void 0;n.nodeLookup&&(d=u?n.nodeLookup.get(o):xf(o)?o:n.nodeLookup.get(o.id));const f=d?gc(d,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ac(i,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tc(a)},hl=(t,n={})=>{let a={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(o=>{(n.filter===void 0||n.filter(o))&&(a=Ac(a,gc(o)),i=!0)}),i?Tc(a):{x:0,y:0,width:0,height:0}},yf=(t,n,[a,i,o]=[0,0,1],u=!1,d=!1)=>{const f={...ml(n,[a,i,o]),width:n.width/o,height:n.height/o},m=[];for(const p of t.values()){const{measured:y,selectable:x=!0,hidden:v=!1}=p;if(d&&!x||v)continue;const w=y.width??p.width??p.initialWidth??null,_=y.height??p.height??p.initialHeight??null,A=al(f,Lr(p)),E=(w??0)*(_??0),S=u&&A>0;(!p.internals.handleBounds||S||A>=E||p.dragging)&&m.push(p)}return m},oT=(t,n)=>{const a=new Set;return t.forEach(i=>{a.add(i.id)}),n.filter(i=>a.has(i.source)||a.has(i.target))};function cT(t,n){const a=new Map,i=n!=null&&n.nodes?new Set(n.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((n==null?void 0:n.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&a.set(o.id,o)}),a}async function uT({nodes:t,width:n,height:a,panZoom:i,minZoom:o,maxZoom:u},d){if(t.size===0)return Promise.resolve(!0);const f=cT(t,d),m=hl(f),p=vf(m,n,a,(d==null?void 0:d.minZoom)??o,(d==null?void 0:d.maxZoom)??u,(d==null?void 0:d.padding)??.1);return await i.setViewport(p,{duration:d==null?void 0:d.duration,ease:d==null?void 0:d.ease,interpolate:d==null?void 0:d.interpolate}),Promise.resolve(!0)}function ov({nodeId:t,nextPosition:n,nodeLookup:a,nodeOrigin:i=[0,0],nodeExtent:o,onError:u}){const d=a.get(t),f=d.parentId?a.get(d.parentId):void 0,{x:m,y:p}=f?f.internals.positionAbsolute:{x:0,y:0},y=d.origin??i;let x=d.extent||o;if(d.extent==="parent"&&!d.expandParent)if(!f)u==null||u("005",On.error005());else{const w=f.measured.width,_=f.measured.height;w&&_&&(x=[[m,p],[m+w,p+_]])}else f&&Br(d.extent)&&(x=[[d.extent[0][0]+m,d.extent[0][1]+p],[d.extent[1][0]+m,d.extent[1][1]+p]]);const v=Br(x)?Aa(n,x,d.measured):n;return(d.measured.width===void 0||d.measured.height===void 0)&&(u==null||u("015",On.error015())),{position:{x:v.x-m+(d.measured.width??0)*y[0],y:v.y-p+(d.measured.height??0)*y[1]},positionAbsolute:v}}async function dT({nodesToRemove:t=[],edgesToRemove:n=[],nodes:a,edges:i,onBeforeDelete:o}){const u=new Set(t.map(v=>v.id)),d=[];for(const v of a){if(v.deletable===!1)continue;const w=u.has(v.id),_=!w&&v.parentId&&d.find(A=>A.id===v.parentId);(w||_)&&d.push(v)}const f=new Set(n.map(v=>v.id)),m=i.filter(v=>v.deletable!==!1),y=oT(d,m);for(const v of m)f.has(v.id)&&!y.find(_=>_.id===v.id)&&y.push(v);if(!o)return{edges:y,nodes:d};const x=await o({nodes:d,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:d}:{edges:[],nodes:[]}:x}const $r=(t,n=0,a=1)=>Math.min(Math.max(t,n),a),Aa=(t={x:0,y:0},n,a)=>({x:$r(t.x,n[0][0],n[1][0]-((a==null?void 0:a.width)??0)),y:$r(t.y,n[0][1],n[1][1]-((a==null?void 0:a.height)??0))});function cv(t,n,a){const{width:i,height:o}=ls(a),{x:u,y:d}=a.internals.positionAbsolute;return Aa(t,[[u,d],[u+i,d+o]],n)}const px=(t,n,a)=>t<n?$r(Math.abs(t-n),1,n)/n:t>a?-$r(Math.abs(t-a),1,n)/n:0,uv=(t,n,a=15,i=40)=>{const o=px(t.x,i,n.width-i)*a,u=px(t.y,i,n.height-i)*a;return[o,u]},Ac=(t,n)=>({x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}),Jh=({x:t,y:n,width:a,height:i})=>({x:t,y:n,x2:t+a,y2:n+i}),Tc=({x:t,y:n,x2:a,y2:i})=>({x:t,y:n,width:a-t,height:i-n}),Lr=(t,n=[0,0])=>{var o,u;const{x:a,y:i}=xf(t)?t.internals.positionAbsolute:dl(t,n);return{x:a,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0}},gc=(t,n=[0,0])=>{var o,u;const{x:a,y:i}=xf(t)?t.internals.positionAbsolute:dl(t,n);return{x:a,y:i,x2:a+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((u=t.measured)==null?void 0:u.height)??t.height??t.initialHeight??0)}},dv=(t,n)=>Tc(Ac(Jh(t),Jh(n))),al=(t,n)=>{const a=Math.max(0,Math.min(t.x+t.width,n.x+n.width)-Math.max(t.x,n.x)),i=Math.max(0,Math.min(t.y+t.height,n.y+n.height)-Math.max(t.y,n.y));return Math.ceil(a*i)},xx=t=>bn(t.width)&&bn(t.height)&&bn(t.x)&&bn(t.y),bn=t=>!isNaN(t)&&isFinite(t),hT=(t,n)=>{},fl=(t,n=[1,1])=>({x:n[0]*Math.round(t.x/n[0]),y:n[1]*Math.round(t.y/n[1])}),ml=({x:t,y:n},[a,i,o],u=!1,d=[1,1])=>{const f={x:(t-a)/o,y:(n-i)/o};return u?fl(f,d):f},pc=({x:t,y:n},[a,i,o])=>({x:t*o+a,y:n*o+i});function _r(t,n){if(typeof t=="number")return Math.floor((n-n/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const a=parseFloat(t);if(!Number.isNaN(a))return Math.floor(a)}if(typeof t=="string"&&t.endsWith("%")){const a=parseFloat(t);if(!Number.isNaN(a))return Math.floor(n*a*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fT(t,n,a){if(typeof t=="string"||typeof t=="number"){const i=_r(t,a),o=_r(t,n);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof t=="object"){const i=_r(t.top??t.y??0,a),o=_r(t.bottom??t.y??0,a),u=_r(t.left??t.x??0,n),d=_r(t.right??t.x??0,n);return{top:i,right:d,bottom:o,left:u,x:u+d,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function mT(t,n,a,i,o,u){const{x:d,y:f}=pc(t,[n,a,i]),{x:m,y:p}=pc({x:t.x+t.width,y:t.y+t.height},[n,a,i]),y=o-m,x=u-p;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(y),bottom:Math.floor(x)}}const vf=(t,n,a,i,o,u)=>{const d=fT(u,n,a),f=(n-d.x)/t.width,m=(a-d.y)/t.height,p=Math.min(f,m),y=$r(p,i,o),x=t.x+t.width/2,v=t.y+t.height/2,w=n/2-x*y,_=a/2-v*y,A=mT(t,w,_,y,n,a),E={left:Math.min(A.left-d.left,0),top:Math.min(A.top-d.top,0),right:Math.min(A.right-d.right,0),bottom:Math.min(A.bottom-d.bottom,0)};return{x:w-E.left+E.right,y:_-E.top+E.bottom,zoom:y}},rl=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Br(t){return t!=null&&t!=="parent"}function ls(t){var n,a;return{width:((n=t.measured)==null?void 0:n.width)??t.width??t.initialWidth??0,height:((a=t.measured)==null?void 0:a.height)??t.height??t.initialHeight??0}}function hv(t){var n,a;return(((n=t.measured)==null?void 0:n.width)??t.width??t.initialWidth)!==void 0&&(((a=t.measured)==null?void 0:a.height)??t.height??t.initialHeight)!==void 0}function fv(t,n={width:0,height:0},a,i,o){const u={...t},d=i.get(a);if(d){const f=d.origin||o;u.x+=d.internals.positionAbsolute.x-(n.width??0)*f[0],u.y+=d.internals.positionAbsolute.y-(n.height??0)*f[1]}return u}function yx(t,n){if(t.size!==n.size)return!1;for(const a of t)if(!n.has(a))return!1;return!0}function gT(){let t,n;return{promise:new Promise((i,o)=>{t=i,n=o}),resolve:t,reject:n}}function pT(t){return{...av,...t||{}}}function Pi(t,{snapGrid:n=[0,0],snapToGrid:a=!1,transform:i,containerBounds:o}){const{x:u,y:d}=wn(t),f=ml({x:u-((o==null?void 0:o.left)??0),y:d-((o==null?void 0:o.top)??0)},i),{x:m,y:p}=a?fl(f,n):f;return{xSnapped:m,ySnapped:p,...f}}const bf=t=>({width:t.offsetWidth,height:t.offsetHeight}),mv=t=>{var n;return((n=t==null?void 0:t.getRootNode)==null?void 0:n.call(t))||(window==null?void 0:window.document)},xT=["INPUT","SELECT","TEXTAREA"];function gv(t){var i,o;const n=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return(n==null?void 0:n.nodeType)!==1?!1:xT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const pv=t=>"clientX"in t,wn=(t,n)=>{var u,d;const a=pv(t),i=a?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,o=a?t.clientY:(d=t.touches)==null?void 0:d[0].clientY;return{x:i-((n==null?void 0:n.left)??0),y:o-((n==null?void 0:n.top)??0)}},vx=(t,n,a,i,o)=>{const u=n.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:o,position:d.getAttribute("data-handlepos"),x:(f.left-a.left)/i,y:(f.top-a.top)/i,...bf(d)}})};function xv({sourceX:t,sourceY:n,targetX:a,targetY:i,sourceControlX:o,sourceControlY:u,targetControlX:d,targetControlY:f}){const m=t*.125+o*.375+d*.375+a*.125,p=n*.125+u*.375+f*.375+i*.125,y=Math.abs(m-t),x=Math.abs(p-n);return[m,p,y,x]}function Jo(t,n){return t>=0?.5*t:n*25*Math.sqrt(-t)}function bx({pos:t,x1:n,y1:a,x2:i,y2:o,c:u}){switch(t){case ye.Left:return[n-Jo(n-i,u),a];case ye.Right:return[n+Jo(i-n,u),a];case ye.Top:return[n,a-Jo(a-o,u)];case ye.Bottom:return[n,a+Jo(o-a,u)]}}function yv({sourceX:t,sourceY:n,sourcePosition:a=ye.Bottom,targetX:i,targetY:o,targetPosition:u=ye.Top,curvature:d=.25}){const[f,m]=bx({pos:a,x1:t,y1:n,x2:i,y2:o,c:d}),[p,y]=bx({pos:u,x1:i,y1:o,x2:t,y2:n,c:d}),[x,v,w,_]=xv({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:y});return[`M${t},${n} C${f},${m} ${p},${y} ${i},${o}`,x,v,w,_]}function vv({sourceX:t,sourceY:n,targetX:a,targetY:i}){const o=Math.abs(a-t)/2,u=a<t?a+o:a-o,d=Math.abs(i-n)/2,f=i<n?i+d:i-d;return[u,f,o,d]}function yT({sourceNode:t,targetNode:n,selected:a=!1,zIndex:i=0,elevateOnSelect:o=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const d=o&&a?i+1e3:i,f=Math.max(t.parentId||o&&t.selected?t.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return d+f}function vT({sourceNode:t,targetNode:n,width:a,height:i,transform:o}){const u=Ac(gc(t),gc(n));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d={x:-o[0]/o[2],y:-o[1]/o[2],width:a/o[2],height:i/o[2]};return al(d,Tc(u))>0}const bT=({source:t,sourceHandle:n,target:a,targetHandle:i})=>`xy-edge__${t}${n||""}-${a}${i||""}`,wT=(t,n)=>n.some(a=>a.source===t.source&&a.target===t.target&&(a.sourceHandle===t.sourceHandle||!a.sourceHandle&&!t.sourceHandle)&&(a.targetHandle===t.targetHandle||!a.targetHandle&&!t.targetHandle)),_T=(t,n,a={})=>{if(!t.source||!t.target)return n;const i=a.getEdgeId||bT;let o;return lv(t)?o={...t}:o={...t,id:i(t)},wT(o,n)?n:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,n.concat(o))};function bv({sourceX:t,sourceY:n,targetX:a,targetY:i}){const[o,u,d,f]=vv({sourceX:t,sourceY:n,targetX:a,targetY:i});return[`M ${t},${n}L ${a},${i}`,o,u,d,f]}const wx={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},ST=({source:t,sourcePosition:n=ye.Bottom,target:a})=>n===ye.Left||n===ye.Right?t.x<a.x?{x:1,y:0}:{x:-1,y:0}:t.y<a.y?{x:0,y:1}:{x:0,y:-1},_x=(t,n)=>Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));function jT({source:t,sourcePosition:n=ye.Bottom,target:a,targetPosition:i=ye.Top,center:o,offset:u,stepPosition:d}){const f=wx[n],m=wx[i],p={x:t.x+f.x*u,y:t.y+f.y*u},y={x:a.x+m.x*u,y:a.y+m.y*u},x=ST({source:p,sourcePosition:n,target:y}),v=x.x!==0?"x":"y",w=x[v];let _=[],A,E;const S={x:0,y:0},N={x:0,y:0},[,,j,C]=vv({sourceX:t.x,sourceY:t.y,targetX:a.x,targetY:a.y});if(f[v]*m[v]===-1){v==="x"?(A=o.x??p.x+(y.x-p.x)*d,E=o.y??(p.y+y.y)/2):(A=o.x??(p.x+y.x)/2,E=o.y??p.y+(y.y-p.y)*d);const z=[{x:A,y:p.y},{x:A,y:y.y}],R=[{x:p.x,y:E},{x:y.x,y:E}];f[v]===w?_=v==="x"?z:R:_=v==="x"?R:z}else{const z=[{x:p.x,y:y.y}],R=[{x:y.x,y:p.y}];if(v==="x"?_=f.x===w?R:z:_=f.y===w?z:R,n===i){const X=Math.abs(t[v]-a[v]);if(X<=u){const P=Math.min(u-1,u-X);f[v]===w?S[v]=(p[v]>t[v]?-1:1)*P:N[v]=(y[v]>a[v]?-1:1)*P}}if(n!==i){const X=v==="x"?"y":"x",P=f[v]===m[X],U=p[X]>y[X],J=p[X]<y[X];(f[v]===1&&(!P&&U||P&&J)||f[v]!==1&&(!P&&J||P&&U))&&(_=v==="x"?z:R)}const L={x:p.x+S.x,y:p.y+S.y},I={x:y.x+N.x,y:y.y+N.y},Q=Math.max(Math.abs(L.x-_[0].x),Math.abs(I.x-_[0].x)),Y=Math.max(Math.abs(L.y-_[0].y),Math.abs(I.y-_[0].y));Q>=Y?(A=(L.x+I.x)/2,E=_[0].y):(A=_[0].x,E=(L.y+I.y)/2)}return[[t,{x:p.x+S.x,y:p.y+S.y},..._,{x:y.x+N.x,y:y.y+N.y},a],A,E,j,C]}function NT(t,n,a,i){const o=Math.min(_x(t,n)/2,_x(n,a)/2,i),{x:u,y:d}=n;if(t.x===u&&u===a.x||t.y===d&&d===a.y)return`L${u} ${d}`;if(t.y===d){const p=t.x<a.x?-1:1,y=t.y<a.y?1:-1;return`L ${u+o*p},${d}Q ${u},${d} ${u},${d+o*y}`}const f=t.x<a.x?1:-1,m=t.y<a.y?-1:1;return`L ${u},${d+o*m}Q ${u},${d} ${u+o*f},${d}`}function Zh({sourceX:t,sourceY:n,sourcePosition:a=ye.Bottom,targetX:i,targetY:o,targetPosition:u=ye.Top,borderRadius:d=5,centerX:f,centerY:m,offset:p=20,stepPosition:y=.5}){const[x,v,w,_,A]=jT({source:{x:t,y:n},sourcePosition:a,target:{x:i,y:o},targetPosition:u,center:{x:f,y:m},offset:p,stepPosition:y});return[x.reduce((S,N,j)=>{let C="";return j>0&&j<x.length-1?C=NT(x[j-1],N,x[j+1],d):C=`${j===0?"M":"L"}${N.x} ${N.y}`,S+=C,S},""),v,w,_,A]}function Sx(t){var n;return t&&!!(t.internals.handleBounds||(n=t.handles)!=null&&n.length)&&!!(t.measured.width||t.width||t.initialWidth)}function ET(t){var x;const{sourceNode:n,targetNode:a}=t;if(!Sx(n)||!Sx(a))return null;const i=n.internals.handleBounds||jx(n.handles),o=a.internals.handleBounds||jx(a.handles),u=Nx((i==null?void 0:i.source)??[],t.sourceHandle),d=Nx(t.connectionMode===zr.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!u||!d)return(x=t.onError)==null||x.call(t,"008",On.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=(u==null?void 0:u.position)||ye.Bottom,m=(d==null?void 0:d.position)||ye.Top,p=Ta(n,u,f),y=Ta(a,d,m);return{sourceX:p.x,sourceY:p.y,targetX:y.x,targetY:y.y,sourcePosition:f,targetPosition:m}}function jx(t){if(!t)return null;const n=[],a=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?n.push(i):i.type==="target"&&a.push(i);return{source:n,target:a}}function Ta(t,n,a=ye.Left,i=!1){const o=((n==null?void 0:n.x)??0)+t.internals.positionAbsolute.x,u=((n==null?void 0:n.y)??0)+t.internals.positionAbsolute.y,{width:d,height:f}=n??ls(t);if(i)return{x:o+d/2,y:u+f/2};switch((n==null?void 0:n.position)??a){case ye.Top:return{x:o+d/2,y:u};case ye.Right:return{x:o+d,y:u+f/2};case ye.Bottom:return{x:o+d/2,y:u+f};case ye.Left:return{x:o,y:u+f/2}}}function Nx(t,n){return t&&(n?t.find(a=>a.id===n):t[0])||null}function Fh(t,n){return t?typeof t=="string"?t:`${n?`${n}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function AT(t,{id:n,defaultColor:a,defaultMarkerStart:i,defaultMarkerEnd:o}){const u=new Set;return t.reduce((d,f)=>([f.markerStart||i,f.markerEnd||o].forEach(m=>{if(m&&typeof m=="object"){const p=Fh(m,n);u.has(p)||(d.push({id:p,color:m.color||a,...m}),u.add(p))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const wv=1e3,TT=10,wf={nodeOrigin:[0,0],nodeExtent:nl,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},CT={...wf,checkEquality:!0};function _f(t,n){const a={...t};for(const i in n)n[i]!==void 0&&(a[i]=n[i]);return a}function kT(t,n,a){const i=_f(wf,a);for(const o of t.values())if(o.parentId)jf(o,t,n,i);else{const u=dl(o,i.nodeOrigin),d=Br(o.extent)?o.extent:i.nodeExtent,f=Aa(u,d,ls(o));o.internals.positionAbsolute=f}}function OT(t,n){if(!t.handles)return t.measured?n==null?void 0:n.internals.handleBounds:void 0;const a=[],i=[];for(const o of t.handles){const u={id:o.id,width:o.width??1,height:o.height??1,nodeId:t.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?a.push(u):o.type==="target"&&i.push(u)}return{source:a,target:i}}function Sf(t){return t==="manual"}function Wh(t,n,a,i={}){var p,y;const o=_f(CT,i),u={i:0},d=new Map(n),f=o!=null&&o.elevateNodesOnSelect&&!Sf(o.zIndexMode)?wv:0;let m=t.length>0;n.clear(),a.clear();for(const x of t){let v=d.get(x.id);if(o.checkEquality&&x===(v==null?void 0:v.internals.userNode))n.set(x.id,v);else{const w=dl(x,o.nodeOrigin),_=Br(x.extent)?x.extent:o.nodeExtent,A=Aa(w,_,ls(x));v={...o.defaults,...x,measured:{width:(p=x.measured)==null?void 0:p.width,height:(y=x.measured)==null?void 0:y.height},internals:{positionAbsolute:A,handleBounds:OT(x,v),z:_v(x,f,o.zIndexMode),userNode:x}},n.set(x.id,v)}(v.measured===void 0||v.measured.width===void 0||v.measured.height===void 0)&&!v.hidden&&(m=!1),x.parentId&&jf(v,n,a,i,u)}return m}function RT(t,n){if(!t.parentId)return;const a=n.get(t.parentId);a?a.set(t.id,t):n.set(t.parentId,new Map([[t.id,t]]))}function jf(t,n,a,i,o){const{elevateNodesOnSelect:u,nodeOrigin:d,nodeExtent:f,zIndexMode:m}=_f(wf,i),p=t.parentId,y=n.get(p);if(!y){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}RT(t,a),o&&!y.parentId&&y.internals.rootParentIndex===void 0&&m==="auto"&&(y.internals.rootParentIndex=++o.i,y.internals.z=y.internals.z+o.i*TT),o&&y.internals.rootParentIndex!==void 0&&(o.i=y.internals.rootParentIndex);const x=u&&!Sf(m)?wv:0,{x:v,y:w,z:_}=MT(t,y,d,f,x,m),{positionAbsolute:A}=t.internals,E=v!==A.x||w!==A.y;(E||_!==t.internals.z)&&n.set(t.id,{...t,internals:{...t.internals,positionAbsolute:E?{x:v,y:w}:A,z:_}})}function _v(t,n,a){const i=bn(t.zIndex)?t.zIndex:0;return Sf(a)?i:i+(t.selected?n:0)}function MT(t,n,a,i,o,u){const{x:d,y:f}=n.internals.positionAbsolute,m=ls(t),p=dl(t,a),y=Br(t.extent)?Aa(p,t.extent,m):p;let x=Aa({x:d+y.x,y:f+y.y},i,m);t.extent==="parent"&&(x=cv(x,m,n));const v=_v(t,o,u),w=n.internals.z??0;return{x:x.x,y:x.y,z:w>=v?w+1:v}}function Nf(t,n,a,i=[0,0]){var d;const o=[],u=new Map;for(const f of t){const m=n.get(f.parentId);if(!m)continue;const p=((d=u.get(f.parentId))==null?void 0:d.expandedRect)??Lr(m),y=dv(p,f.rect);u.set(f.parentId,{expandedRect:y,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},p)=>{var j;const y=m.internals.positionAbsolute,x=ls(m),v=m.origin??i,w=f.x<y.x?Math.round(Math.abs(y.x-f.x)):0,_=f.y<y.y?Math.round(Math.abs(y.y-f.y)):0,A=Math.max(x.width,Math.round(f.width)),E=Math.max(x.height,Math.round(f.height)),S=(A-x.width)*v[0],N=(E-x.height)*v[1];(w>0||_>0||S||N)&&(o.push({id:p,type:"position",position:{x:m.position.x-w+S,y:m.position.y-_+N}}),(j=a.get(p))==null||j.forEach(C=>{t.some(D=>D.id===C.id)||o.push({id:C.id,type:"position",position:{x:C.position.x+w,y:C.position.y+_}})})),(x.width<f.width||x.height<f.height||w||_)&&o.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:A+(w?v[0]*w-S:0),height:E+(_?v[1]*_-N:0)}})}),o}function DT(t,n,a,i,o,u,d){const f=i==null?void 0:i.querySelector(".xyflow__viewport");let m=!1;if(!f)return{changes:[],updatedInternals:m};const p=[],y=window.getComputedStyle(f),{m22:x}=new window.DOMMatrixReadOnly(y.transform),v=[];for(const w of t.values()){const _=n.get(w.id);if(!_)continue;if(_.hidden){n.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),m=!0;continue}const A=bf(w.nodeElement),E=_.measured.width!==A.width||_.measured.height!==A.height;if(!!(A.width&&A.height&&(E||!_.internals.handleBounds||w.force))){const N=w.nodeElement.getBoundingClientRect(),j=Br(_.extent)?_.extent:u;let{positionAbsolute:C}=_.internals;_.parentId&&_.extent==="parent"?C=cv(C,A,n.get(_.parentId)):j&&(C=Aa(C,j,A));const D={..._,measured:A,internals:{..._.internals,positionAbsolute:C,handleBounds:{source:vx("source",w.nodeElement,N,x,_.id),target:vx("target",w.nodeElement,N,x,_.id)}}};n.set(_.id,D),_.parentId&&jf(D,n,a,{nodeOrigin:o,zIndexMode:d}),m=!0,E&&(p.push({id:_.id,type:"dimensions",dimensions:A}),_.expandParent&&_.parentId&&v.push({id:_.id,parentId:_.parentId,rect:Lr(D,o)}))}}if(v.length>0){const w=Nf(v,n,a,o);p.push(...w)}return{changes:p,updatedInternals:m}}async function zT({delta:t,panZoom:n,transform:a,translateExtent:i,width:o,height:u}){if(!n||!t.x&&!t.y)return Promise.resolve(!1);const d=await n.setViewportConstrained({x:a[0]+t.x,y:a[1]+t.y,zoom:a[2]},[[0,0],[o,u]],i),f=!!d&&(d.x!==a[0]||d.y!==a[1]||d.k!==a[2]);return Promise.resolve(f)}function Ex(t,n,a,i,o,u){let d=o;const f=i.get(d)||new Map;i.set(d,f.set(a,n)),d=`${o}-${t}`;const m=i.get(d)||new Map;if(i.set(d,m.set(a,n)),u){d=`${o}-${t}-${u}`;const p=i.get(d)||new Map;i.set(d,p.set(a,n))}}function Sv(t,n,a){t.clear(),n.clear();for(const i of a){const{source:o,target:u,sourceHandle:d=null,targetHandle:f=null}=i,m={edgeId:i.id,source:o,target:u,sourceHandle:d,targetHandle:f},p=`${o}-${d}--${u}-${f}`,y=`${u}-${f}--${o}-${d}`;Ex("source",m,y,t,o,d),Ex("target",m,p,t,u,f),n.set(i.id,i)}}function jv(t,n){if(!t.parentId)return!1;const a=n.get(t.parentId);return a?a.selected?!0:jv(a,n):!1}function Ax(t,n,a){var o;let i=t;do{if((o=i==null?void 0:i.matches)!=null&&o.call(i,n))return!0;if(i===a)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function UT(t,n,a,i){const o=new Map;for(const[u,d]of t)if((d.selected||d.id===i)&&(!d.parentId||!jv(d,t))&&(d.draggable||n&&typeof d.draggable>"u")){const f=t.get(u);f&&o.set(u,{id:u,position:f.position||{x:0,y:0},distance:{x:a.x-f.internals.positionAbsolute.x,y:a.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return o}function _h({nodeId:t,dragItems:n,nodeLookup:a,dragging:i=!0}){var d,f,m;const o=[];for(const[p,y]of n){const x=(d=a.get(p))==null?void 0:d.internals.userNode;x&&o.push({...x,position:y.position,dragging:i})}if(!t)return[o[0],o];const u=(f=a.get(t))==null?void 0:f.internals.userNode;return[u?{...u,position:((m=n.get(t))==null?void 0:m.position)||u.position,dragging:i}:o[0],o]}function $T({dragItems:t,snapGrid:n,x:a,y:i}){const o=t.values().next().value;if(!o)return null;const u={x:a-o.distance.x,y:i-o.distance.y},d=fl(u,n);return{x:d.x-u.x,y:d.y-u.y}}function LT({onNodeMouseDown:t,getStoreItems:n,onDragStart:a,onDrag:i,onDragStop:o}){let u={x:null,y:null},d=0,f=new Map,m=!1,p={x:0,y:0},y=null,x=!1,v=null,w=!1,_=!1,A=null;function E({noDragClassName:N,handleSelector:j,domNode:C,isSelectable:D,nodeId:z,nodeClickDistance:R=0}){v=Ft(C);function L({x:X,y:P}){const{nodeLookup:U,nodeExtent:J,snapGrid:T,snapToGrid:$,nodeOrigin:q,onNodeDrag:V,onSelectionDrag:ne,onError:O,updateNodePositions:H}=n();u={x:X,y:P};let Z=!1;const te=f.size>1,le=te&&J?Jh(hl(f)):null,oe=te&&$?$T({dragItems:f,snapGrid:T,x:X,y:P}):null;for(const[de,ce]of f){if(!U.has(de))continue;let fe={x:X-ce.distance.x,y:P-ce.distance.y};$&&(fe=oe?{x:Math.round(fe.x+oe.x),y:Math.round(fe.y+oe.y)}:fl(fe,T));let Ne=null;if(te&&J&&!ce.extent&&le){const{positionAbsolute:me}=ce.internals,ve=me.x-le.x+J[0][0],Ae=me.x+ce.measured.width-le.x2+J[1][0],be=me.y-le.y+J[0][1],De=me.y+ce.measured.height-le.y2+J[1][1];Ne=[[ve,be],[Ae,De]]}const{position:ue,positionAbsolute:he}=ov({nodeId:de,nextPosition:fe,nodeLookup:U,nodeExtent:Ne||J,nodeOrigin:q,onError:O});Z=Z||ce.position.x!==ue.x||ce.position.y!==ue.y,ce.position=ue,ce.internals.positionAbsolute=he}if(_=_||Z,!!Z&&(H(f,!0),A&&(i||V||!z&&ne))){const[de,ce]=_h({nodeId:z,dragItems:f,nodeLookup:U});i==null||i(A,f,de,ce),V==null||V(A,de,ce),z||ne==null||ne(A,ce)}}async function I(){if(!y)return;const{transform:X,panBy:P,autoPanSpeed:U,autoPanOnNodeDrag:J}=n();if(!J){m=!1,cancelAnimationFrame(d);return}const[T,$]=uv(p,y,U);(T!==0||$!==0)&&(u.x=(u.x??0)-T/X[2],u.y=(u.y??0)-$/X[2],await P({x:T,y:$})&&L(u)),d=requestAnimationFrame(I)}function Q(X){var te;const{nodeLookup:P,multiSelectionActive:U,nodesDraggable:J,transform:T,snapGrid:$,snapToGrid:q,selectNodesOnDrag:V,onNodeDragStart:ne,onSelectionDragStart:O,unselectNodesAndEdges:H}=n();x=!0,(!V||!D)&&!U&&z&&((te=P.get(z))!=null&&te.selected||H()),D&&V&&z&&(t==null||t(z));const Z=Pi(X.sourceEvent,{transform:T,snapGrid:$,snapToGrid:q,containerBounds:y});if(u=Z,f=UT(P,J,Z,z),f.size>0&&(a||ne||!z&&O)){const[le,oe]=_h({nodeId:z,dragItems:f,nodeLookup:P});a==null||a(X.sourceEvent,f,le,oe),ne==null||ne(X.sourceEvent,le,oe),z||O==null||O(X.sourceEvent,oe)}}const Y=qy().clickDistance(R).on("start",X=>{const{domNode:P,nodeDragThreshold:U,transform:J,snapGrid:T,snapToGrid:$}=n();y=(P==null?void 0:P.getBoundingClientRect())||null,w=!1,_=!1,A=X.sourceEvent,U===0&&Q(X),u=Pi(X.sourceEvent,{transform:J,snapGrid:T,snapToGrid:$,containerBounds:y}),p=wn(X.sourceEvent,y)}).on("drag",X=>{const{autoPanOnNodeDrag:P,transform:U,snapGrid:J,snapToGrid:T,nodeDragThreshold:$,nodeLookup:q}=n(),V=Pi(X.sourceEvent,{transform:U,snapGrid:J,snapToGrid:T,containerBounds:y});if(A=X.sourceEvent,(X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1||z&&!q.has(z))&&(w=!0),!w){if(!m&&P&&x&&(m=!0,I()),!x){const ne=wn(X.sourceEvent,y),O=ne.x-p.x,H=ne.y-p.y;Math.sqrt(O*O+H*H)>$&&Q(X)}(u.x!==V.xSnapped||u.y!==V.ySnapped)&&f&&x&&(p=wn(X.sourceEvent,y),L(V))}}).on("end",X=>{if(!(!x||w)&&(m=!1,x=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:P,updateNodePositions:U,onNodeDragStop:J,onSelectionDragStop:T}=n();if(_&&(U(f,!1),_=!1),o||J||!z&&T){const[$,q]=_h({nodeId:z,dragItems:f,nodeLookup:P,dragging:!1});o==null||o(X.sourceEvent,f,$,q),J==null||J(X.sourceEvent,$,q),z||T==null||T(X.sourceEvent,q)}}}).filter(X=>{const P=X.target;return!X.button&&(!N||!Ax(P,`.${N}`,C))&&(!j||Ax(P,j,C))});v.call(Y)}function S(){v==null||v.on(".drag",null)}return{update:E,destroy:S}}function BT(t,n,a){const i=[],o={x:t.x-a,y:t.y-a,width:a*2,height:a*2};for(const u of n.values())al(o,Lr(u))>0&&i.push(u);return i}const HT=250;function qT(t,n,a,i){var f,m;let o=[],u=1/0;const d=BT(t,a,n+HT);for(const p of d){const y=[...((f=p.internals.handleBounds)==null?void 0:f.source)??[],...((m=p.internals.handleBounds)==null?void 0:m.target)??[]];for(const x of y){if(i.nodeId===x.nodeId&&i.type===x.type&&i.id===x.id)continue;const{x:v,y:w}=Ta(p,x,x.position,!0),_=Math.sqrt(Math.pow(v-t.x,2)+Math.pow(w-t.y,2));_>n||(_<u?(o=[{...x,x:v,y:w}],u=_):_===u&&o.push({...x,x:v,y:w}))}}if(!o.length)return null;if(o.length>1){const p=i.type==="source"?"target":"source";return o.find(y=>y.type===p)??o[0]}return o[0]}function Nv(t,n,a,i,o,u=!1){var p,y,x;const d=i.get(t);if(!d)return null;const f=o==="strict"?(p=d.internals.handleBounds)==null?void 0:p[n]:[...((y=d.internals.handleBounds)==null?void 0:y.source)??[],...((x=d.internals.handleBounds)==null?void 0:x.target)??[]],m=(a?f==null?void 0:f.find(v=>v.id===a):f==null?void 0:f[0])??null;return m&&u?{...m,...Ta(d,m,m.position,!0)}:m}function Ev(t,n){return t||(n!=null&&n.classList.contains("target")?"target":n!=null&&n.classList.contains("source")?"source":null)}function IT(t,n){let a=null;return n?a=!0:t&&!n&&(a=!1),a}const Av=()=>!0;function VT(t,{connectionMode:n,connectionRadius:a,handleId:i,nodeId:o,edgeUpdaterType:u,isTarget:d,domNode:f,nodeLookup:m,lib:p,autoPanOnConnect:y,flowId:x,panBy:v,cancelConnection:w,onConnectStart:_,onConnect:A,onConnectEnd:E,isValidConnection:S=Av,onReconnectEnd:N,updateConnection:j,getTransform:C,getFromHandle:D,autoPanSpeed:z,dragThreshold:R=1,handleDomNode:L}){const I=mv(t.target);let Q=0,Y;const{x:X,y:P}=wn(t),U=Ev(u,L),J=f==null?void 0:f.getBoundingClientRect();let T=!1;if(!J||!U)return;const $=Nv(o,U,i,m,n);if(!$)return;let q=wn(t,J),V=!1,ne=null,O=!1,H=null;function Z(){if(!y||!J)return;const[ue,he]=uv(q,J,z);v({x:ue,y:he}),Q=requestAnimationFrame(Z)}const te={...$,nodeId:o,type:U,position:$.position},le=m.get(o);let de={inProgress:!0,isValid:null,from:Ta(le,te,ye.Left,!0),fromHandle:te,fromPosition:te.position,fromNode:le,to:q,toHandle:null,toPosition:gx[te.position],toNode:null,pointer:q};function ce(){T=!0,j(de),_==null||_(t,{nodeId:o,handleId:i,handleType:U})}R===0&&ce();function fe(ue){if(!T){const{x:De,y:ht}=wn(ue),nt=De-X,jt=ht-P;if(!(nt*nt+jt*jt>R*R))return;ce()}if(!D()||!te){Ne(ue);return}const he=C();q=wn(ue,J),Y=qT(ml(q,he,!1,[1,1]),a,m,te),V||(Z(),V=!0);const me=Tv(ue,{handle:Y,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:d?"target":"source",isValidConnection:S,doc:I,lib:p,flowId:x,nodeLookup:m});H=me.handleDomNode,ne=me.connection,O=IT(!!Y,me.isValid);const ve=m.get(o),Ae=ve?Ta(ve,te,ye.Left,!0):de.from,be={...de,from:Ae,isValid:O,to:me.toHandle&&O?pc({x:me.toHandle.x,y:me.toHandle.y},he):q,toHandle:me.toHandle,toPosition:O&&me.toHandle?me.toHandle.position:gx[te.position],toNode:me.toHandle?m.get(me.toHandle.nodeId):null,pointer:q};j(be),de=be}function Ne(ue){if(!("touches"in ue&&ue.touches.length>0)){if(T){(Y||H)&&ne&&O&&(A==null||A(ne));const{inProgress:he,...me}=de,ve={...me,toPosition:de.toHandle?de.toPosition:null};E==null||E(ue,ve),u&&(N==null||N(ue,ve))}w(),cancelAnimationFrame(Q),V=!1,O=!1,ne=null,H=null,I.removeEventListener("mousemove",fe),I.removeEventListener("mouseup",Ne),I.removeEventListener("touchmove",fe),I.removeEventListener("touchend",Ne)}}I.addEventListener("mousemove",fe),I.addEventListener("mouseup",Ne),I.addEventListener("touchmove",fe),I.addEventListener("touchend",Ne)}function Tv(t,{handle:n,connectionMode:a,fromNodeId:i,fromHandleId:o,fromType:u,doc:d,lib:f,flowId:m,isValidConnection:p=Av,nodeLookup:y}){const x=u==="target",v=n?d.querySelector(`.${f}-flow__handle[data-id="${m}-${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`):null,{x:w,y:_}=wn(t),A=d.elementFromPoint(w,_),E=A!=null&&A.classList.contains(`${f}-flow__handle`)?A:v,S={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const N=Ev(void 0,E),j=E.getAttribute("data-nodeid"),C=E.getAttribute("data-handleid"),D=E.classList.contains("connectable"),z=E.classList.contains("connectableend");if(!j||!N)return S;const R={source:x?j:i,sourceHandle:x?C:o,target:x?i:j,targetHandle:x?o:C};S.connection=R;const I=D&&z&&(a===zr.Strict?x&&N==="source"||!x&&N==="target":j!==i||C!==o);S.isValid=I&&p(R),S.toHandle=Nv(j,N,C,y,a,!0)}return S}const ef={onPointerDown:VT,isValid:Tv};function GT({domNode:t,panZoom:n,getTransform:a,getViewScale:i}){const o=Ft(t);function u({translateExtent:f,width:m,height:p,zoomStep:y=1,pannable:x=!0,zoomable:v=!0,inversePan:w=!1}){const _=j=>{if(j.sourceEvent.type!=="wheel"||!n)return;const C=a(),D=j.sourceEvent.ctrlKey&&rl()?10:1,z=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*y,R=C[2]*Math.pow(2,z*D);n.scaleTo(R)};let A=[0,0];const E=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(A=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},S=j=>{const C=a();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!n)return;const D=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],z=[D[0]-A[0],D[1]-A[1]];A=D;const R=i()*Math.max(C[2],Math.log(C[2]))*(w?-1:1),L={x:C[0]-z[0]*R,y:C[1]-z[1]*R},I=[[0,0],[m,p]];n.setViewportConstrained({x:L.x,y:L.y,zoom:C[2]},I,f)},N=nv().on("start",E).on("zoom",x?S:null).on("zoom.wheel",v?_:null);o.call(N,{})}function d(){o.on("zoom",null)}return{update:u,destroy:d,pointer:yn}}const Cc=t=>({x:t.x,y:t.y,zoom:t.k}),Sh=({x:t,y:n,zoom:a})=>Ec.translate(t,n).scale(a),Tr=(t,n)=>t.target.closest(`.${n}`),Cv=(t,n)=>n===2&&Array.isArray(t)&&t.includes(2),PT=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,jh=(t,n=0,a=PT,i=()=>{})=>{const o=typeof n=="number"&&n>0;return o||i(),o?t.transition().duration(n).ease(a).on("end",i):t},kv=t=>{const n=t.ctrlKey&&rl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*n};function YT({zoomPanValues:t,noWheelClassName:n,d3Selection:a,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:u,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:m,onPanZoomEnd:p}){return y=>{if(Tr(y,n))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=a.property("__zoom").k||1;if(y.ctrlKey&&d){const E=yn(y),S=kv(y),N=x*Math.pow(2,S);i.scaleTo(a,N,E,y);return}const v=y.deltaMode===1?20:1;let w=o===ja.Vertical?0:y.deltaX*v,_=o===ja.Horizontal?0:y.deltaY*v;!rl()&&y.shiftKey&&o!==ja.Vertical&&(w=y.deltaY*v,_=0),i.translateBy(a,-(w/x)*u,-(_/x)*u,{internal:!0});const A=Cc(a.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(m==null||m(y,A),t.panScrollTimeout=setTimeout(()=>{p==null||p(y,A),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,f==null||f(y,A))}}function XT({noWheelClassName:t,preventScrolling:n,d3ZoomHandler:a}){return function(i,o){const u=i.type==="wheel",d=!n&&u&&!i.ctrlKey,f=Tr(i,t);if(i.ctrlKey&&u&&f&&i.preventDefault(),d||f)return null;i.preventDefault(),a.call(this,i,o)}}function KT({zoomPanValues:t,onDraggingChange:n,onPanZoomStart:a}){return i=>{var u,d,f;if((u=i.sourceEvent)!=null&&u.internal)return;const o=Cc(i.transform);t.mouseButton=((d=i.sourceEvent)==null?void 0:d.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((f=i.sourceEvent)==null?void 0:f.type)==="mousedown"&&n(!0),a&&(a==null||a(i.sourceEvent,o))}}function QT({zoomPanValues:t,panOnDrag:n,onPaneContextMenu:a,onTransformChange:i,onPanZoom:o}){return u=>{var d,f;t.usedRightMouseButton=!!(a&&Cv(n,t.mouseButton??0)),(d=u.sourceEvent)!=null&&d.sync||i([u.transform.x,u.transform.y,u.transform.k]),o&&!((f=u.sourceEvent)!=null&&f.internal)&&(o==null||o(u.sourceEvent,Cc(u.transform)))}}function JT({zoomPanValues:t,panOnDrag:n,panOnScroll:a,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:u}){return d=>{var f;if(!((f=d.sourceEvent)!=null&&f.internal)&&(t.isZoomingOrPanning=!1,u&&Cv(n,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&u(d.sourceEvent),t.usedRightMouseButton=!1,i(!1),o)){const m=Cc(d.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(d.sourceEvent,m)},a?150:0)}}}function ZT({zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:a,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:u,userSelectionActive:d,noWheelClassName:f,noPanClassName:m,lib:p,connectionInProgress:y}){return x=>{var E;const v=t||n,w=a&&x.ctrlKey,_=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Tr(x,`${p}-flow__node`)||Tr(x,`${p}-flow__edge`)))return!0;if(!i&&!v&&!o&&!u&&!a||d||y&&!_||Tr(x,f)&&_||Tr(x,m)&&(!_||o&&_&&!t)||!a&&x.ctrlKey&&_)return!1;if(!a&&x.type==="touchstart"&&((E=x.touches)==null?void 0:E.length)>1)return x.preventDefault(),!1;if(!v&&!o&&!w&&_||!i&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(i)&&!i.includes(x.button)&&x.type==="mousedown")return!1;const A=Array.isArray(i)&&i.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||_)&&A}}function FT({domNode:t,minZoom:n,maxZoom:a,translateExtent:i,viewport:o,onPanZoom:u,onPanZoomStart:d,onPanZoomEnd:f,onDraggingChange:m}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),x=nv().scaleExtent([n,a]).translateExtent(i),v=Ft(t).call(x);N({x:o.x,y:o.y,zoom:$r(o.zoom,n,a)},[[0,0],[y.width,y.height]],i);const w=v.on("wheel.zoom"),_=v.on("dblclick.zoom");x.wheelDelta(kv);function A(Y,X){return v?new Promise(P=>{x==null||x.interpolate((X==null?void 0:X.interpolate)==="linear"?Gi:tc).transform(jh(v,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>P(!0)),Y)}):Promise.resolve(!1)}function E({noWheelClassName:Y,noPanClassName:X,onPaneContextMenu:P,userSelectionActive:U,panOnScroll:J,panOnDrag:T,panOnScrollMode:$,panOnScrollSpeed:q,preventScrolling:V,zoomOnPinch:ne,zoomOnScroll:O,zoomOnDoubleClick:H,zoomActivationKeyPressed:Z,lib:te,onTransformChange:le,connectionInProgress:oe,paneClickDistance:de,selectionOnDrag:ce}){U&&!p.isZoomingOrPanning&&S();const fe=J&&!Z&&!U;x.clickDistance(ce?1/0:!bn(de)||de<0?0:de);const Ne=fe?YT({zoomPanValues:p,noWheelClassName:Y,d3Selection:v,d3Zoom:x,panOnScrollMode:$,panOnScrollSpeed:q,zoomOnPinch:ne,onPanZoomStart:d,onPanZoom:u,onPanZoomEnd:f}):XT({noWheelClassName:Y,preventScrolling:V,d3ZoomHandler:w});if(v.on("wheel.zoom",Ne,{passive:!1}),!U){const he=KT({zoomPanValues:p,onDraggingChange:m,onPanZoomStart:d});x.on("start",he);const me=QT({zoomPanValues:p,panOnDrag:T,onPaneContextMenu:!!P,onPanZoom:u,onTransformChange:le});x.on("zoom",me);const ve=JT({zoomPanValues:p,panOnDrag:T,panOnScroll:J,onPaneContextMenu:P,onPanZoomEnd:f,onDraggingChange:m});x.on("end",ve)}const ue=ZT({zoomActivationKeyPressed:Z,panOnDrag:T,zoomOnScroll:O,panOnScroll:J,zoomOnDoubleClick:H,zoomOnPinch:ne,userSelectionActive:U,noPanClassName:X,noWheelClassName:Y,lib:te,connectionInProgress:oe});x.filter(ue),H?v.on("dblclick.zoom",_):v.on("dblclick.zoom",null)}function S(){x.on("zoom",null)}async function N(Y,X,P){const U=Sh(Y),J=x==null?void 0:x.constrain()(U,X,P);return J&&await A(J),new Promise(T=>T(J))}async function j(Y,X){const P=Sh(Y);return await A(P,X),new Promise(U=>U(P))}function C(Y){if(v){const X=Sh(Y),P=v.property("__zoom");(P.k!==Y.zoom||P.x!==Y.x||P.y!==Y.y)&&(x==null||x.transform(v,X,null,{sync:!0}))}}function D(){const Y=v?tv(v.node()):{x:0,y:0,k:1};return{x:Y.x,y:Y.y,zoom:Y.k}}function z(Y,X){return v?new Promise(P=>{x==null||x.interpolate((X==null?void 0:X.interpolate)==="linear"?Gi:tc).scaleTo(jh(v,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>P(!0)),Y)}):Promise.resolve(!1)}function R(Y,X){return v?new Promise(P=>{x==null||x.interpolate((X==null?void 0:X.interpolate)==="linear"?Gi:tc).scaleBy(jh(v,X==null?void 0:X.duration,X==null?void 0:X.ease,()=>P(!0)),Y)}):Promise.resolve(!1)}function L(Y){x==null||x.scaleExtent(Y)}function I(Y){x==null||x.translateExtent(Y)}function Q(Y){const X=!bn(Y)||Y<0?0:Y;x==null||x.clickDistance(X)}return{update:E,destroy:S,setViewport:j,setViewportConstrained:N,getViewport:D,scaleTo:z,scaleBy:R,setScaleExtent:L,setTranslateExtent:I,syncViewport:C,setClickDistance:Q}}var Hr;(function(t){t.Line="line",t.Handle="handle"})(Hr||(Hr={}));function WT({width:t,prevWidth:n,height:a,prevHeight:i,affectsX:o,affectsY:u}){const d=t-n,f=a-i,m=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&o&&(m[0]=m[0]*-1),f&&u&&(m[1]=m[1]*-1),m}function Tx(t){const n=t.includes("right")||t.includes("left"),a=t.includes("bottom")||t.includes("top"),i=t.includes("left"),o=t.includes("top");return{isHorizontal:n,isVertical:a,affectsX:i,affectsY:o}}function Ls(t,n){return Math.max(0,n-t)}function Bs(t,n){return Math.max(0,t-n)}function Zo(t,n,a){return Math.max(0,n-t,t-a)}function Cx(t,n){return t?!n:n}function e3(t,n,a,i,o,u,d,f){let{affectsX:m,affectsY:p}=n;const{isHorizontal:y,isVertical:x}=n,v=y&&x,{xSnapped:w,ySnapped:_}=a,{minWidth:A,maxWidth:E,minHeight:S,maxHeight:N}=i,{x:j,y:C,width:D,height:z,aspectRatio:R}=t;let L=Math.floor(y?w-t.pointerX:0),I=Math.floor(x?_-t.pointerY:0);const Q=D+(m?-L:L),Y=z+(p?-I:I),X=-u[0]*D,P=-u[1]*z;let U=Zo(Q,A,E),J=Zo(Y,S,N);if(d){let q=0,V=0;m&&L<0?q=Ls(j+L+X,d[0][0]):!m&&L>0&&(q=Bs(j+Q+X,d[1][0])),p&&I<0?V=Ls(C+I+P,d[0][1]):!p&&I>0&&(V=Bs(C+Y+P,d[1][1])),U=Math.max(U,q),J=Math.max(J,V)}if(f){let q=0,V=0;m&&L>0?q=Bs(j+L,f[0][0]):!m&&L<0&&(q=Ls(j+Q,f[1][0])),p&&I>0?V=Bs(C+I,f[0][1]):!p&&I<0&&(V=Ls(C+Y,f[1][1])),U=Math.max(U,q),J=Math.max(J,V)}if(o){if(y){const q=Zo(Q/R,S,N)*R;if(U=Math.max(U,q),d){let V=0;!m&&!p||m&&!p&&v?V=Bs(C+P+Q/R,d[1][1])*R:V=Ls(C+P+(m?L:-L)/R,d[0][1])*R,U=Math.max(U,V)}if(f){let V=0;!m&&!p||m&&!p&&v?V=Ls(C+Q/R,f[1][1])*R:V=Bs(C+(m?L:-L)/R,f[0][1])*R,U=Math.max(U,V)}}if(x){const q=Zo(Y*R,A,E)/R;if(J=Math.max(J,q),d){let V=0;!m&&!p||p&&!m&&v?V=Bs(j+Y*R+X,d[1][0])/R:V=Ls(j+(p?I:-I)*R+X,d[0][0])/R,J=Math.max(J,V)}if(f){let V=0;!m&&!p||p&&!m&&v?V=Ls(j+Y*R,f[1][0])/R:V=Bs(j+(p?I:-I)*R,f[0][0])/R,J=Math.max(J,V)}}}I=I+(I<0?J:-J),L=L+(L<0?U:-U),o&&(v?Q>Y*R?I=(Cx(m,p)?-L:L)/R:L=(Cx(m,p)?-I:I)*R:y?(I=L/R,p=m):(L=I*R,m=p));const T=m?j+L:j,$=p?C+I:C;return{width:D+(m?-L:L),height:z+(p?-I:I),x:u[0]*L*(m?-1:1)+T,y:u[1]*I*(p?-1:1)+$}}const Ov={width:0,height:0,x:0,y:0},t3={...Ov,pointerX:0,pointerY:0,aspectRatio:1};function n3(t){return[[0,0],[t.measured.width,t.measured.height]]}function s3(t,n,a){const i=n.position.x+t.position.x,o=n.position.y+t.position.y,u=t.measured.width??0,d=t.measured.height??0,f=a[0]*u,m=a[1]*d;return[[i-f,o-m],[i+u-f,o+d-m]]}function a3({domNode:t,nodeId:n,getStoreItems:a,onChange:i,onEnd:o}){const u=Ft(t);let d={controlDirection:Tx("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:p,boundaries:y,keepAspectRatio:x,resizeDirection:v,onResizeStart:w,onResize:_,onResizeEnd:A,shouldResize:E}){let S={...Ov},N={...t3};d={boundaries:y,resizeDirection:v,keepAspectRatio:x,controlDirection:Tx(p)};let j,C=null,D=[],z,R,L,I=!1;const Q=qy().on("start",Y=>{const{nodeLookup:X,transform:P,snapGrid:U,snapToGrid:J,nodeOrigin:T,paneDomNode:$}=a();if(j=X.get(n),!j)return;C=($==null?void 0:$.getBoundingClientRect())??null;const{xSnapped:q,ySnapped:V}=Pi(Y.sourceEvent,{transform:P,snapGrid:U,snapToGrid:J,containerBounds:C});S={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},N={...S,pointerX:q,pointerY:V,aspectRatio:S.width/S.height},z=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(z=X.get(j.parentId),R=z&&j.extent==="parent"?n3(z):void 0),D=[],L=void 0;for(const[ne,O]of X)if(O.parentId===n&&(D.push({id:ne,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const H=s3(O,j,O.origin??T);L?L=[[Math.min(H[0][0],L[0][0]),Math.min(H[0][1],L[0][1])],[Math.max(H[1][0],L[1][0]),Math.max(H[1][1],L[1][1])]]:L=H}w==null||w(Y,{...S})}).on("drag",Y=>{const{transform:X,snapGrid:P,snapToGrid:U,nodeOrigin:J}=a(),T=Pi(Y.sourceEvent,{transform:X,snapGrid:P,snapToGrid:U,containerBounds:C}),$=[];if(!j)return;const{x:q,y:V,width:ne,height:O}=S,H={},Z=j.origin??J,{width:te,height:le,x:oe,y:de}=e3(N,d.controlDirection,T,d.boundaries,d.keepAspectRatio,Z,R,L),ce=te!==ne,fe=le!==O,Ne=oe!==q&&ce,ue=de!==V&&fe;if(!Ne&&!ue&&!ce&&!fe)return;if((Ne||ue||Z[0]===1||Z[1]===1)&&(H.x=Ne?oe:S.x,H.y=ue?de:S.y,S.x=H.x,S.y=H.y,D.length>0)){const Ae=oe-q,be=de-V;for(const De of D)De.position={x:De.position.x-Ae+Z[0]*(te-ne),y:De.position.y-be+Z[1]*(le-O)},$.push(De)}if((ce||fe)&&(H.width=ce&&(!d.resizeDirection||d.resizeDirection==="horizontal")?te:S.width,H.height=fe&&(!d.resizeDirection||d.resizeDirection==="vertical")?le:S.height,S.width=H.width,S.height=H.height),z&&j.expandParent){const Ae=Z[0]*(H.width??0);H.x&&H.x<Ae&&(S.x=Ae,N.x=N.x-(H.x-Ae));const be=Z[1]*(H.height??0);H.y&&H.y<be&&(S.y=be,N.y=N.y-(H.y-be))}const he=WT({width:S.width,prevWidth:ne,height:S.height,prevHeight:O,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),me={...S,direction:he};(E==null?void 0:E(Y,me))!==!1&&(I=!0,_==null||_(Y,me),i(H,$))}).on("end",Y=>{I&&(A==null||A(Y,{...S}),o==null||o({...S}),I=!1)});u.call(Q)}function m(){u.on(".drag",null)}return{update:f,destroy:m}}var Nh={exports:{}},Eh={},Ah={exports:{}},Th={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function r3(){if(kx)return Th;kx=1;var t=ll();function n(x,v){return x===v&&(x!==0||1/x===1/v)||x!==x&&v!==v}var a=typeof Object.is=="function"?Object.is:n,i=t.useState,o=t.useEffect,u=t.useLayoutEffect,d=t.useDebugValue;function f(x,v){var w=v(),_=i({inst:{value:w,getSnapshot:v}}),A=_[0].inst,E=_[1];return u(function(){A.value=w,A.getSnapshot=v,m(A)&&E({inst:A})},[x,w,v]),o(function(){return m(A)&&E({inst:A}),x(function(){m(A)&&E({inst:A})})},[x]),d(w),w}function m(x){var v=x.getSnapshot;x=x.value;try{var w=v();return!a(x,w)}catch{return!0}}function p(x,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Th.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Th}var Ox;function i3(){return Ox||(Ox=1,Ah.exports=r3()),Ah.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function l3(){if(Rx)return Eh;Rx=1;var t=ll(),n=i3();function a(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:a,o=n.useSyncExternalStore,u=t.useRef,d=t.useEffect,f=t.useMemo,m=t.useDebugValue;return Eh.useSyncExternalStoreWithSelector=function(p,y,x,v,w){var _=u(null);if(_.current===null){var A={hasValue:!1,value:null};_.current=A}else A=_.current;_=f(function(){function S(z){if(!N){if(N=!0,j=z,z=v(z),w!==void 0&&A.hasValue){var R=A.value;if(w(R,z))return C=R}return C=z}if(R=C,i(j,z))return R;var L=v(z);return w!==void 0&&w(R,L)?(j=z,R):(j=z,C=L)}var N=!1,j,C,D=x===void 0?null:x;return[function(){return S(y())},D===null?void 0:function(){return S(D())}]},[y,x,v,w]);var E=o(p,_[0],_[1]);return d(function(){A.hasValue=!0,A.value=E},[E]),m(E),E},Eh}var Mx;function o3(){return Mx||(Mx=1,Nh.exports=l3()),Nh.exports}var c3=o3();const u3=sf(c3),d3={},Dx=t=>{let n;const a=new Set,i=(y,x)=>{const v=typeof y=="function"?y(n):y;if(!Object.is(v,n)){const w=n;n=x??(typeof v!="object"||v===null)?v:Object.assign({},n,v),a.forEach(_=>_(n,w))}},o=()=>n,m={setState:i,getState:o,getInitialState:()=>p,subscribe:y=>(a.add(y),()=>a.delete(y)),destroy:()=>{(d3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},p=n=t(i,o,m);return m},h3=t=>t?Dx(t):Dx,{useDebugValue:f3}=ay,{useSyncExternalStoreWithSelector:m3}=u3,g3=t=>t;function Rv(t,n=g3,a){const i=m3(t.subscribe,t.getState,t.getServerState||t.getInitialState,n,a);return f3(i),i}const zx=(t,n)=>{const a=h3(t),i=(o,u=n)=>Rv(a,o,u);return Object.assign(i,a),i},p3=(t,n)=>t?zx(t,n):zx;function Je(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[i,o]of t)if(!Object.is(o,n.get(i)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const i of t)if(!n.has(i))return!1;return!0}const a=Object.keys(t);if(a.length!==Object.keys(n).length)return!1;for(const i of a)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(t[i],n[i]))return!1;return!0}ry();const kc=M.createContext(null),x3=kc.Provider,Mv=On.error001();function Ue(t,n){const a=M.useContext(kc);if(a===null)throw new Error(Mv);return Rv(a,t,n)}function Ze(){const t=M.useContext(kc);if(t===null)throw new Error(Mv);return M.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Ux={display:"none"},y3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Dv="react-flow__node-desc",zv="react-flow__edge-desc",v3="react-flow__aria-live",b3=t=>t.ariaLiveMessage,w3=t=>t.ariaLabelConfig;function _3({rfId:t}){const n=Ue(b3);return c.jsx("div",{id:`${v3}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:y3,children:n})}function S3({rfId:t,disableKeyboardA11y:n}){const a=Ue(w3);return c.jsxs(c.Fragment,{children:[c.jsx("div",{id:`${Dv}-${t}`,style:Ux,children:n?a["node.a11yDescription.default"]:a["node.a11yDescription.keyboardDisabled"]}),c.jsx("div",{id:`${zv}-${t}`,style:Ux,children:a["edge.a11yDescription.default"]}),!n&&c.jsx(_3,{rfId:t})]})}const Oc=M.forwardRef(({position:t="top-left",children:n,className:a,style:i,...o},u)=>{const d=`${t}`.split("-");return c.jsx("div",{className:dt(["react-flow__panel",a,...d]),style:i,ref:u,...o,children:n})});Oc.displayName="Panel";function j3({proOptions:t,position:n="bottom-right"}){return t!=null&&t.hideAttribution?null:c.jsx(Oc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:c.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const N3=t=>{const n=[],a=[];for(const[,i]of t.nodeLookup)i.selected&&n.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&a.push(i);return{selectedNodes:n,selectedEdges:a}},Fo=t=>t.id;function E3(t,n){return Je(t.selectedNodes.map(Fo),n.selectedNodes.map(Fo))&&Je(t.selectedEdges.map(Fo),n.selectedEdges.map(Fo))}function A3({onSelectionChange:t}){const n=Ze(),{selectedNodes:a,selectedEdges:i}=Ue(N3,E3);return M.useEffect(()=>{const o={nodes:a,edges:i};t==null||t(o),n.getState().onSelectionChangeHandlers.forEach(u=>u(o))},[a,i,t]),null}const T3=t=>!!t.onSelectionChangeHandlers;function C3({onSelectionChange:t}){const n=Ue(T3);return t||n?c.jsx(A3,{onSelectionChange:t}):null}const Uv=[0,0],k3={x:0,y:0,zoom:1},O3=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],$x=[...O3,"rfId"],R3=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Lx={translateExtent:nl,nodeOrigin:Uv,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function M3(t){const{setNodes:n,setEdges:a,setMinZoom:i,setMaxZoom:o,setTranslateExtent:u,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:m}=Ue(R3,Je),p=Ze();M.useEffect(()=>(m(t.defaultNodes,t.defaultEdges),()=>{y.current=Lx,f()}),[]);const y=M.useRef(Lx);return M.useEffect(()=>{for(const x of $x){const v=t[x],w=y.current[x];v!==w&&(typeof t[x]>"u"||(x==="nodes"?n(v):x==="edges"?a(v):x==="minZoom"?i(v):x==="maxZoom"?o(v):x==="translateExtent"?u(v):x==="nodeExtent"?d(v):x==="ariaLabelConfig"?p.setState({ariaLabelConfig:pT(v)}):x==="fitView"?p.setState({fitViewQueued:v}):x==="fitViewOptions"?p.setState({fitViewOptions:v}):p.setState({[x]:v})))}y.current=t},$x.map(x=>t[x])),null}function Bx(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function D3(t){var i;const[n,a]=M.useState(t==="system"?null:t);return M.useEffect(()=>{if(t!=="system"){a(t);return}const o=Bx(),u=()=>a(o!=null&&o.matches?"dark":"light");return u(),o==null||o.addEventListener("change",u),()=>{o==null||o.removeEventListener("change",u)}},[t]),n!==null?n:(i=Bx())!=null&&i.matches?"dark":"light"}const Hx=typeof document<"u"?document:null;function il(t=null,n={target:Hx,actInsideInputWithModifier:!0}){const[a,i]=M.useState(!1),o=M.useRef(!1),u=M.useRef(new Set([])),[d,f]=M.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=p.reduce((x,v)=>x.concat(...v),[]);return[p,y]}return[[],[]]},[t]);return M.useEffect(()=>{const m=(n==null?void 0:n.target)??Hx,p=(n==null?void 0:n.actInsideInputWithModifier)??!0;if(t!==null){const y=w=>{var E,S;if(o.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!o.current||o.current&&!p)&&gv(w))return!1;const A=Ix(w.code,f);if(u.current.add(w[A]),qx(d,u.current,!1)){const N=((S=(E=w.composedPath)==null?void 0:E.call(w))==null?void 0:S[0])||w.target,j=(N==null?void 0:N.nodeName)==="BUTTON"||(N==null?void 0:N.nodeName)==="A";n.preventDefault!==!1&&(o.current||!j)&&w.preventDefault(),i(!0)}},x=w=>{const _=Ix(w.code,f);qx(d,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(w[_]),w.key==="Meta"&&u.current.clear(),o.current=!1},v=()=>{u.current.clear(),i(!1)};return m==null||m.addEventListener("keydown",y),m==null||m.addEventListener("keyup",x),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{m==null||m.removeEventListener("keydown",y),m==null||m.removeEventListener("keyup",x),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,i]),a}function qx(t,n,a){return t.filter(i=>a||i.length===n.size).some(i=>i.every(o=>n.has(o)))}function Ix(t,n){return n.includes(t)?"code":"key"}const z3=()=>{const t=Ze();return M.useMemo(()=>({zoomIn:n=>{const{panZoom:a}=t.getState();return a?a.scaleBy(1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:a}=t.getState();return a?a.scaleBy(1/1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomTo:(n,a)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(n,{duration:a==null?void 0:a.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(n,a)=>{const{transform:[i,o,u],panZoom:d}=t.getState();return d?(await d.setViewport({x:n.x??i,y:n.y??o,zoom:n.zoom??u},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,a,i]=t.getState().transform;return{x:n,y:a,zoom:i}},setCenter:async(n,a,i)=>t.getState().setCenter(n,a,i),fitBounds:async(n,a)=>{const{width:i,height:o,minZoom:u,maxZoom:d,panZoom:f}=t.getState(),m=vf(n,i,o,u,d,(a==null?void 0:a.padding)??.1);return f?(await f.setViewport(m,{duration:a==null?void 0:a.duration,ease:a==null?void 0:a.ease,interpolate:a==null?void 0:a.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,a={})=>{const{transform:i,snapGrid:o,snapToGrid:u,domNode:d}=t.getState();if(!d)return n;const{x:f,y:m}=d.getBoundingClientRect(),p={x:n.x-f,y:n.y-m},y=a.snapGrid??o,x=a.snapToGrid??u;return ml(p,i,x,y)},flowToScreenPosition:n=>{const{transform:a,domNode:i}=t.getState();if(!i)return n;const{x:o,y:u}=i.getBoundingClientRect(),d=pc(n,a);return{x:d.x+o,y:d.y+u}}}),[])};function $v(t,n){const a=[],i=new Map,o=[];for(const u of t)if(u.type==="add"){o.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const d=i.get(u.id);d?d.push(u):i.set(u.id,[u])}for(const u of n){const d=i.get(u.id);if(!d){a.push(u);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){a.push({...d[0].item});continue}const f={...u};for(const m of d)U3(m,f);a.push(f)}return o.length&&o.forEach(u=>{u.index!==void 0?a.splice(u.index,0,{...u.item}):a.push({...u.item})}),a}function U3(t,n){switch(t.type){case"select":{n.selected=t.selected;break}case"position":{typeof t.position<"u"&&(n.position=t.position),typeof t.dragging<"u"&&(n.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(n.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(n.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(n.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(n.resizing=t.resizing);break}}}function Lv(t,n){return $v(t,n)}function Bv(t,n){return $v(t,n)}function ya(t,n){return{id:t,type:"select",selected:n}}function Cr(t,n=new Set,a=!1){const i=[];for(const[o,u]of t){const d=n.has(o);!(u.selected===void 0&&!d)&&u.selected!==d&&(a&&(u.selected=d),i.push(ya(u.id,d)))}return i}function Vx({items:t=[],lookup:n}){var o;const a=[],i=new Map(t.map(u=>[u.id,u]));for(const[u,d]of t.entries()){const f=n.get(d.id),m=((o=f==null?void 0:f.internals)==null?void 0:o.userNode)??f;m!==void 0&&m!==d&&a.push({id:d.id,item:d,type:"replace"}),m===void 0&&a.push({item:d,type:"add",index:u})}for(const[u]of n)i.get(u)===void 0&&a.push({id:u,type:"remove"});return a}function Gx(t){return{id:t.id,type:"remove"}}const Px=t=>iT(t),$3=t=>lv(t);function Hv(t){return M.forwardRef(t)}const L3=typeof window<"u"?M.useLayoutEffect:M.useEffect;function Yx(t){const[n,a]=M.useState(BigInt(0)),[i]=M.useState(()=>B3(()=>a(o=>o+BigInt(1))));return L3(()=>{const o=i.get();o.length&&(t(o),i.reset())},[n]),i}function B3(t){let n=[];return{get:()=>n,reset:()=>{n=[]},push:a=>{n.push(a),t()}}}const qv=M.createContext(null);function H3({children:t}){const n=Ze(),a=M.useCallback(f=>{const{nodes:m=[],setNodes:p,hasDefaultNodes:y,onNodesChange:x,nodeLookup:v,fitViewQueued:w,onNodesChangeMiddlewareMap:_}=n.getState();let A=m;for(const S of f)A=typeof S=="function"?S(A):S;let E=Vx({items:A,lookup:v});for(const S of _.values())E=S(E);y&&p(A),E.length>0?x==null||x(E):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:N,setNodes:j}=n.getState();S&&j(N)})},[]),i=Yx(a),o=M.useCallback(f=>{const{edges:m=[],setEdges:p,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:v}=n.getState();let w=m;for(const _ of f)w=typeof _=="function"?_(w):_;y?p(w):x&&x(Vx({items:w,lookup:v}))},[]),u=Yx(o),d=M.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return c.jsx(qv.Provider,{value:d,children:t})}function q3(){const t=M.useContext(qv);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const I3=t=>!!t.panZoom;function Ef(){const t=z3(),n=Ze(),a=q3(),i=Ue(I3),o=M.useMemo(()=>{const u=x=>n.getState().nodeLookup.get(x),d=x=>{a.nodeQueue.push(x)},f=x=>{a.edgeQueue.push(x)},m=x=>{var S,N;const{nodeLookup:v,nodeOrigin:w}=n.getState(),_=Px(x)?x:v.get(x.id),A=_.parentId?fv(_.position,_.measured,_.parentId,v,w):_.position,E={..._,position:A,width:((S=_.measured)==null?void 0:S.width)??_.width,height:((N=_.measured)==null?void 0:N.height)??_.height};return Lr(E)},p=(x,v,w={replace:!1})=>{d(_=>_.map(A=>{if(A.id===x){const E=typeof v=="function"?v(A):v;return w.replace&&Px(E)?E:{...A,...E}}return A}))},y=(x,v,w={replace:!1})=>{f(_=>_.map(A=>{if(A.id===x){const E=typeof v=="function"?v(A):v;return w.replace&&$3(E)?E:{...A,...E}}return A}))};return{getNodes:()=>n.getState().nodes.map(x=>({...x})),getNode:x=>{var v;return(v=u(x))==null?void 0:v.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:x=[]}=n.getState();return x.map(v=>({...v}))},getEdge:x=>n.getState().edgeLookup.get(x),setNodes:d,setEdges:f,addNodes:x=>{const v=Array.isArray(x)?x:[x];a.nodeQueue.push(w=>[...w,...v])},addEdges:x=>{const v=Array.isArray(x)?x:[x];a.edgeQueue.push(w=>[...w,...v])},toObject:()=>{const{nodes:x=[],edges:v=[],transform:w}=n.getState(),[_,A,E]=w;return{nodes:x.map(S=>({...S})),edges:v.map(S=>({...S})),viewport:{x:_,y:A,zoom:E}}},deleteElements:async({nodes:x=[],edges:v=[]})=>{const{nodes:w,edges:_,onNodesDelete:A,onEdgesDelete:E,triggerNodeChanges:S,triggerEdgeChanges:N,onDelete:j,onBeforeDelete:C}=n.getState(),{nodes:D,edges:z}=await dT({nodesToRemove:x,edgesToRemove:v,nodes:w,edges:_,onBeforeDelete:C}),R=z.length>0,L=D.length>0;if(R){const I=z.map(Gx);E==null||E(z),N(I)}if(L){const I=D.map(Gx);A==null||A(D),S(I)}return(L||R)&&(j==null||j({nodes:D,edges:z})),{deletedNodes:D,deletedEdges:z}},getIntersectingNodes:(x,v=!0,w)=>{const _=xx(x),A=_?x:m(x),E=w!==void 0;return A?(w||n.getState().nodes).filter(S=>{const N=n.getState().nodeLookup.get(S.id);if(N&&!_&&(S.id===x.id||!N.internals.positionAbsolute))return!1;const j=Lr(E?S:N),C=al(j,A);return v&&C>0||C>=j.width*j.height||C>=A.width*A.height}):[]},isNodeIntersecting:(x,v,w=!0)=>{const A=xx(x)?x:m(x);if(!A)return!1;const E=al(A,v);return w&&E>0||E>=v.width*v.height||E>=A.width*A.height},updateNode:p,updateNodeData:(x,v,w={replace:!1})=>{p(x,_=>{const A=typeof v=="function"?v(_):v;return w.replace?{..._,data:A}:{..._,data:{..._.data,...A}}},w)},updateEdge:y,updateEdgeData:(x,v,w={replace:!1})=>{y(x,_=>{const A=typeof v=="function"?v(_):v;return w.replace?{..._,data:A}:{..._,data:{..._.data,...A}}},w)},getNodesBounds:x=>{const{nodeLookup:v,nodeOrigin:w}=n.getState();return lT(x,{nodeLookup:v,nodeOrigin:w})},getHandleConnections:({type:x,id:v,nodeId:w})=>{var _;return Array.from(((_=n.getState().connectionLookup.get(`${w}-${x}${v?`-${v}`:""}`))==null?void 0:_.values())??[])},getNodeConnections:({type:x,handleId:v,nodeId:w})=>{var _;return Array.from(((_=n.getState().connectionLookup.get(`${w}${x?v?`-${x}-${v}`:`-${x}`:""}`))==null?void 0:_.values())??[])},fitView:async x=>{const v=n.getState().fitViewResolver??gT();return n.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:v}),a.nodeQueue.push(w=>[...w]),v.promise}}},[]);return M.useMemo(()=>({...o,...t,viewportInitialized:i}),[i])}const Xx=t=>t.selected,V3=typeof window<"u"?window:void 0;function G3({deleteKeyCode:t,multiSelectionKeyCode:n}){const a=Ze(),{deleteElements:i}=Ef(),o=il(t,{actInsideInputWithModifier:!1}),u=il(n,{target:V3});M.useEffect(()=>{if(o){const{edges:d,nodes:f}=a.getState();i({nodes:f.filter(Xx),edges:d.filter(Xx)}),a.setState({nodesSelectionActive:!1})}},[o]),M.useEffect(()=>{a.setState({multiSelectionActive:u})},[u])}function P3(t){const n=Ze();M.useEffect(()=>{const a=()=>{var o,u,d,f;if(!t.current||!(((u=(o=t.current).checkVisibility)==null?void 0:u.call(o))??!0))return!1;const i=bf(t.current);(i.height===0||i.width===0)&&((f=(d=n.getState()).onError)==null||f.call(d,"004",On.error004())),n.setState({width:i.width||500,height:i.height||500})};if(t.current){a(),window.addEventListener("resize",a);const i=new ResizeObserver(()=>a());return i.observe(t.current),()=>{window.removeEventListener("resize",a),i&&t.current&&i.unobserve(t.current)}}},[])}const Rc={position:"absolute",width:"100%",height:"100%",top:0,left:0},Y3=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function X3({onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:u=ja.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:m,translateExtent:p,minZoom:y,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:w=!0,children:_,noWheelClassName:A,noPanClassName:E,onViewportChange:S,isControlledViewport:N,paneClickDistance:j,selectionOnDrag:C}){const D=Ze(),z=M.useRef(null),{userSelectionActive:R,lib:L,connectionInProgress:I}=Ue(Y3,Je),Q=il(v),Y=M.useRef();P3(z);const X=M.useCallback(P=>{S==null||S({x:P[0],y:P[1],zoom:P[2]}),N||D.setState({transform:P})},[S,N]);return M.useEffect(()=>{if(z.current){Y.current=FT({domNode:z.current,minZoom:y,maxZoom:x,translateExtent:p,viewport:m,onDraggingChange:T=>D.setState({paneDragging:T}),onPanZoomStart:(T,$)=>{const{onViewportChangeStart:q,onMoveStart:V}=D.getState();V==null||V(T,$),q==null||q($)},onPanZoom:(T,$)=>{const{onViewportChange:q,onMove:V}=D.getState();V==null||V(T,$),q==null||q($)},onPanZoomEnd:(T,$)=>{const{onViewportChangeEnd:q,onMoveEnd:V}=D.getState();V==null||V(T,$),q==null||q($)}});const{x:P,y:U,zoom:J}=Y.current.getViewport();return D.setState({panZoom:Y.current,transform:[P,U,J],domNode:z.current.closest(".react-flow")}),()=>{var T;(T=Y.current)==null||T.destroy()}}},[]),M.useEffect(()=>{var P;(P=Y.current)==null||P.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:a,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:u,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:Q,preventScrolling:w,noPanClassName:E,userSelectionActive:R,noWheelClassName:A,lib:L,onTransformChange:X,connectionInProgress:I,selectionOnDrag:C,paneClickDistance:j})},[t,n,a,i,o,u,d,f,Q,w,E,R,A,L,X,I,C,j]),c.jsx("div",{className:"react-flow__renderer",ref:z,style:Rc,children:_})}const K3=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Q3(){const{userSelectionActive:t,userSelectionRect:n}=Ue(K3,Je);return t&&n?c.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Ch=(t,n)=>a=>{a.target===n.current&&(t==null||t(a))},J3=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function Z3({isSelecting:t,selectionKeyPressed:n,selectionMode:a=sl.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:u,onSelectionStart:d,onSelectionEnd:f,onPaneClick:m,onPaneContextMenu:p,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:v,onPaneMouseLeave:w,children:_}){const A=Ze(),{userSelectionActive:E,elementsSelectable:S,dragging:N,connectionInProgress:j}=Ue(J3,Je),C=S&&(t||E),D=M.useRef(null),z=M.useRef(),R=M.useRef(new Set),L=M.useRef(new Set),I=M.useRef(!1),Q=q=>{if(I.current||j){I.current=!1;return}m==null||m(q),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},Y=q=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){q.preventDefault();return}p==null||p(q)},X=y?q=>y(q):void 0,P=q=>{I.current&&(q.stopPropagation(),I.current=!1)},U=q=>{var le,oe;const{domNode:V}=A.getState();if(z.current=V==null?void 0:V.getBoundingClientRect(),!z.current)return;const ne=q.target===D.current;if(!ne&&!!q.target.closest(".nokey")||!t||!(u&&ne||n)||q.button!==0||!q.isPrimary)return;(oe=(le=q.target)==null?void 0:le.setPointerCapture)==null||oe.call(le,q.pointerId),I.current=!1;const{x:Z,y:te}=wn(q.nativeEvent,z.current);A.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:te,x:Z,y:te}}),ne||(q.stopPropagation(),q.preventDefault())},J=q=>{const{userSelectionRect:V,transform:ne,nodeLookup:O,edgeLookup:H,connectionLookup:Z,triggerNodeChanges:te,triggerEdgeChanges:le,defaultEdgeOptions:oe,resetSelectedElements:de}=A.getState();if(!z.current||!V)return;const{x:ce,y:fe}=wn(q.nativeEvent,z.current),{startX:Ne,startY:ue}=V;if(!I.current){const be=n?0:o;if(Math.hypot(ce-Ne,fe-ue)<=be)return;de(),d==null||d(q)}I.current=!0;const he={startX:Ne,startY:ue,x:ce<Ne?ce:Ne,y:fe<ue?fe:ue,width:Math.abs(ce-Ne),height:Math.abs(fe-ue)},me=R.current,ve=L.current;R.current=new Set(yf(O,he,ne,a===sl.Partial,!0).map(be=>be.id)),L.current=new Set;const Ae=(oe==null?void 0:oe.selectable)??!0;for(const be of R.current){const De=Z.get(be);if(De)for(const{edgeId:ht}of De.values()){const nt=H.get(ht);nt&&(nt.selectable??Ae)&&L.current.add(ht)}}if(!yx(me,R.current)){const be=Cr(O,R.current,!0);te(be)}if(!yx(ve,L.current)){const be=Cr(H,L.current);le(be)}A.setState({userSelectionRect:he,userSelectionActive:!0,nodesSelectionActive:!1})},T=q=>{var V,ne;q.button===0&&((ne=(V=q.target)==null?void 0:V.releasePointerCapture)==null||ne.call(V,q.pointerId),!E&&q.target===D.current&&A.getState().userSelectionRect&&(Q==null||Q(q)),A.setState({userSelectionActive:!1,userSelectionRect:null}),I.current&&(f==null||f(q),A.setState({nodesSelectionActive:R.current.size>0})))},$=i===!0||Array.isArray(i)&&i.includes(0);return c.jsxs("div",{className:dt(["react-flow__pane",{draggable:$,dragging:N,selection:t}]),onClick:C?void 0:Ch(Q,D),onContextMenu:Ch(Y,D),onWheel:Ch(X,D),onPointerEnter:C?void 0:x,onPointerMove:C?J:v,onPointerUp:C?T:void 0,onPointerDownCapture:C?U:void 0,onClickCapture:C?P:void 0,onPointerLeave:w,ref:D,style:Rc,children:[_,c.jsx(Q3,{})]})}function tf({id:t,store:n,unselect:a=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:u,multiSelectionActive:d,nodeLookup:f,onError:m}=n.getState(),p=f.get(t);if(!p){m==null||m("012",On.error012(t));return}n.setState({nodesSelectionActive:!1}),p.selected?(a||p.selected&&d)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):o([t])}function Iv({nodeRef:t,disabled:n=!1,noDragClassName:a,handleSelector:i,nodeId:o,isSelectable:u,nodeClickDistance:d}){const f=Ze(),[m,p]=M.useState(!1),y=M.useRef();return M.useEffect(()=>{y.current=LT({getStoreItems:()=>f.getState(),onNodeMouseDown:x=>{tf({id:x,store:f,nodeRef:t})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),M.useEffect(()=>{var x,v;if(n)(x=y.current)==null||x.destroy();else if(t.current)return(v=y.current)==null||v.update({noDragClassName:a,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:o,nodeClickDistance:d}),()=>{var w;(w=y.current)==null||w.destroy()}},[a,i,n,u,t,o]),m}const F3=t=>n=>n.selected&&(n.draggable||t&&typeof n.draggable>"u");function Vv(){const t=Ze();return M.useCallback(a=>{const{nodeExtent:i,snapToGrid:o,snapGrid:u,nodesDraggable:d,onError:f,updateNodePositions:m,nodeLookup:p,nodeOrigin:y}=t.getState(),x=new Map,v=F3(d),w=o?u[0]:5,_=o?u[1]:5,A=a.direction.x*w*a.factor,E=a.direction.y*_*a.factor;for(const[,S]of p){if(!v(S))continue;let N={x:S.internals.positionAbsolute.x+A,y:S.internals.positionAbsolute.y+E};o&&(N=fl(N,u));const{position:j,positionAbsolute:C}=ov({nodeId:S.id,nextPosition:N,nodeLookup:p,nodeExtent:i,nodeOrigin:y,onError:f});S.position=j,S.internals.positionAbsolute=C,x.set(S.id,S)}m(x)},[])}const Af=M.createContext(null),W3=Af.Provider;Af.Consumer;const Gv=()=>M.useContext(Af),e4=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),t4=(t,n,a)=>i=>{const{connectionClickStartHandle:o,connectionMode:u,connection:d}=i,{fromHandle:f,toHandle:m,isValid:p}=d,y=(m==null?void 0:m.nodeId)===t&&(m==null?void 0:m.id)===n&&(m==null?void 0:m.type)===a;return{connectingFrom:(f==null?void 0:f.nodeId)===t&&(f==null?void 0:f.id)===n&&(f==null?void 0:f.type)===a,connectingTo:y,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.id)===n&&(o==null?void 0:o.type)===a,isPossibleEndHandle:u===zr.Strict?(f==null?void 0:f.type)!==a:t!==(f==null?void 0:f.nodeId)||n!==(f==null?void 0:f.id),connectionInProcess:!!f,clickConnectionInProcess:!!o,valid:y&&p}};function n4({type:t="source",position:n=ye.Top,isValidConnection:a,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:u=!0,id:d,onConnect:f,children:m,className:p,onMouseDown:y,onTouchStart:x,...v},w){var J,T;const _=d||null,A=t==="target",E=Ze(),S=Gv(),{connectOnClick:N,noPanClassName:j,rfId:C}=Ue(e4,Je),{connectingFrom:D,connectingTo:z,clickConnecting:R,isPossibleEndHandle:L,connectionInProcess:I,clickConnectionInProcess:Q,valid:Y}=Ue(t4(S,_,t),Je);S||(T=(J=E.getState()).onError)==null||T.call(J,"010",On.error010());const X=$=>{const{defaultEdgeOptions:q,onConnect:V,hasDefaultEdges:ne}=E.getState(),O={...q,...$};if(ne){const{edges:H,setEdges:Z}=E.getState();Z(_T(O,H))}V==null||V(O),f==null||f(O)},P=$=>{if(!S)return;const q=pv($.nativeEvent);if(o&&(q&&$.button===0||!q)){const V=E.getState();ef.onPointerDown($.nativeEvent,{handleDomNode:$.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:A,handleId:_,nodeId:S,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:X,isValidConnection:a||V.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}q?y==null||y($):x==null||x($)},U=$=>{const{onClickConnectStart:q,onClickConnectEnd:V,connectionClickStartHandle:ne,connectionMode:O,isValidConnection:H,lib:Z,rfId:te,nodeLookup:le,connection:oe}=E.getState();if(!S||!ne&&!o)return;if(!ne){q==null||q($.nativeEvent,{nodeId:S,handleId:_,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:S,type:t,id:_}});return}const de=mv($.target),ce=a||H,{connection:fe,isValid:Ne}=ef.isValid($.nativeEvent,{handle:{nodeId:S,id:_,type:t},connectionMode:O,fromNodeId:ne.nodeId,fromHandleId:ne.id||null,fromType:ne.type,isValidConnection:ce,flowId:te,doc:de,lib:Z,nodeLookup:le});Ne&&fe&&X(fe);const ue=structuredClone(oe);delete ue.inProgress,ue.toPosition=ue.toHandle?ue.toHandle.position:null,V==null||V($,ue),E.setState({connectionClickStartHandle:null})};return c.jsx("div",{"data-handleid":_,"data-nodeid":S,"data-handlepos":n,"data-id":`${C}-${S}-${_}-${t}`,className:dt(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",j,p,{source:!A,target:A,connectable:i,connectablestart:o,connectableend:u,clickconnecting:R,connectingfrom:D,connectingto:z,valid:Y,connectionindicator:i&&(!I||L)&&(I||Q?u:o)}]),onMouseDown:P,onTouchStart:P,onClick:N?U:void 0,ref:w,...v,children:m})}const xc=M.memo(Hv(n4));function s4({data:t,isConnectable:n,sourcePosition:a=ye.Bottom}){return c.jsxs(c.Fragment,{children:[t==null?void 0:t.label,c.jsx(xc,{type:"source",position:a,isConnectable:n})]})}function a4({data:t,isConnectable:n,targetPosition:a=ye.Top,sourcePosition:i=ye.Bottom}){return c.jsxs(c.Fragment,{children:[c.jsx(xc,{type:"target",position:a,isConnectable:n}),t==null?void 0:t.label,c.jsx(xc,{type:"source",position:i,isConnectable:n})]})}function r4(){return null}function i4({data:t,isConnectable:n,targetPosition:a=ye.Top}){return c.jsxs(c.Fragment,{children:[c.jsx(xc,{type:"target",position:a,isConnectable:n}),t==null?void 0:t.label]})}const yc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Kx={input:s4,default:a4,output:i4,group:r4};function l4(t){var n,a,i,o;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((n=t.style)==null?void 0:n.width),height:t.height??t.initialHeight??((a=t.style)==null?void 0:a.height)}:{width:t.width??((i=t.style)==null?void 0:i.width),height:t.height??((o=t.style)==null?void 0:o.height)}}const o4=t=>{const{width:n,height:a,x:i,y:o}=hl(t.nodeLookup,{filter:u=>!!u.selected});return{width:bn(n)?n:null,height:bn(a)?a:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${o}px)`}};function c4({onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:a}){const i=Ze(),{width:o,height:u,transformString:d,userSelectionActive:f}=Ue(o4,Je),m=Vv(),p=M.useRef(null);if(M.useEffect(()=>{var v;a||(v=p.current)==null||v.focus({preventScroll:!0})},[a]),Iv({nodeRef:p}),f||!o||!u)return null;const y=t?v=>{const w=i.getState().nodes.filter(_=>_.selected);t(v,w)}:void 0,x=v=>{Object.prototype.hasOwnProperty.call(yc,v.key)&&(v.preventDefault(),m({direction:yc[v.key],factor:v.shiftKey?4:1}))};return c.jsx("div",{className:dt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d},children:c.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:a?void 0:-1,onKeyDown:a?void 0:x,style:{width:o,height:u}})})}const Qx=typeof window<"u"?window:void 0,u4=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Pv({children:t,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:m,selectionKeyCode:p,selectionOnDrag:y,selectionMode:x,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:_,panActivationKeyCode:A,zoomActivationKeyCode:E,elementsSelectable:S,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:C,panOnScrollSpeed:D,panOnScrollMode:z,zoomOnDoubleClick:R,panOnDrag:L,defaultViewport:I,translateExtent:Q,minZoom:Y,maxZoom:X,preventScrolling:P,onSelectionContextMenu:U,noWheelClassName:J,noPanClassName:T,disableKeyboardA11y:$,onViewportChange:q,isControlledViewport:V}){const{nodesSelectionActive:ne,userSelectionActive:O}=Ue(u4,Je),H=il(p,{target:Qx}),Z=il(A,{target:Qx}),te=Z||L,le=Z||C,oe=y&&te!==!0,de=H||O||oe;return G3({deleteKeyCode:m,multiSelectionKeyCode:_}),c.jsx(X3,{onPaneContextMenu:u,elementsSelectable:S,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:le,panOnScrollSpeed:D,panOnScrollMode:z,zoomOnDoubleClick:R,panOnDrag:!H&&te,defaultViewport:I,translateExtent:Q,minZoom:Y,maxZoom:X,zoomActivationKeyCode:E,preventScrolling:P,noWheelClassName:J,noPanClassName:T,onViewportChange:q,isControlledViewport:V,paneClickDistance:f,selectionOnDrag:oe,children:c.jsxs(Z3,{onSelectionStart:v,onSelectionEnd:w,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:d,panOnDrag:te,isSelecting:!!de,selectionMode:x,selectionKeyPressed:H,paneClickDistance:f,selectionOnDrag:oe,children:[t,ne&&c.jsx(c4,{onSelectionContextMenu:U,noPanClassName:T,disableKeyboardA11y:$})]})})}Pv.displayName="FlowRenderer";const d4=M.memo(Pv),h4=t=>n=>t?yf(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(a=>a.id):Array.from(n.nodeLookup.keys());function f4(t){return Ue(M.useCallback(h4(t),[t]),Je)}const m4=t=>t.updateNodeInternals;function g4(){const t=Ue(m4),[n]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const i=new Map;a.forEach(o=>{const u=o.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:o.target,force:!0})}),t(i)}));return M.useEffect(()=>()=>{n==null||n.disconnect()},[n]),n}function p4({node:t,nodeType:n,hasDimensions:a,resizeObserver:i}){const o=Ze(),u=M.useRef(null),d=M.useRef(null),f=M.useRef(t.sourcePosition),m=M.useRef(t.targetPosition),p=M.useRef(n),y=a&&!!t.internals.handleBounds;return M.useEffect(()=>{u.current&&!t.hidden&&(!y||d.current!==u.current)&&(d.current&&(i==null||i.unobserve(d.current)),i==null||i.observe(u.current),d.current=u.current)},[y,t.hidden]),M.useEffect(()=>()=>{d.current&&(i==null||i.unobserve(d.current),d.current=null)},[]),M.useEffect(()=>{if(u.current){const x=p.current!==n,v=f.current!==t.sourcePosition,w=m.current!==t.targetPosition;(x||v||w)&&(p.current=n,f.current=t.sourcePosition,m.current=t.targetPosition,o.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,n,t.sourcePosition,t.targetPosition]),u}function x4({id:t,onClick:n,onMouseEnter:a,onMouseMove:i,onMouseLeave:o,onContextMenu:u,onDoubleClick:d,nodesDraggable:f,elementsSelectable:m,nodesConnectable:p,nodesFocusable:y,resizeObserver:x,noDragClassName:v,noPanClassName:w,disableKeyboardA11y:_,rfId:A,nodeTypes:E,nodeClickDistance:S,onError:N}){const{node:j,internals:C,isParent:D}=Ue(ce=>{const fe=ce.nodeLookup.get(t),Ne=ce.parentLookup.has(t);return{node:fe,internals:fe.internals,isParent:Ne}},Je);let z=j.type||"default",R=(E==null?void 0:E[z])||Kx[z];R===void 0&&(N==null||N("003",On.error003(z)),z="default",R=(E==null?void 0:E.default)||Kx.default);const L=!!(j.draggable||f&&typeof j.draggable>"u"),I=!!(j.selectable||m&&typeof j.selectable>"u"),Q=!!(j.connectable||p&&typeof j.connectable>"u"),Y=!!(j.focusable||y&&typeof j.focusable>"u"),X=Ze(),P=hv(j),U=p4({node:j,nodeType:z,hasDimensions:P,resizeObserver:x}),J=Iv({nodeRef:U,disabled:j.hidden||!L,noDragClassName:v,handleSelector:j.dragHandle,nodeId:t,isSelectable:I,nodeClickDistance:S}),T=Vv();if(j.hidden)return null;const $=ls(j),q=l4(j),V=I||L||n||a||i||o,ne=a?ce=>a(ce,{...C.userNode}):void 0,O=i?ce=>i(ce,{...C.userNode}):void 0,H=o?ce=>o(ce,{...C.userNode}):void 0,Z=u?ce=>u(ce,{...C.userNode}):void 0,te=d?ce=>d(ce,{...C.userNode}):void 0,le=ce=>{const{selectNodesOnDrag:fe,nodeDragThreshold:Ne}=X.getState();I&&(!fe||!L||Ne>0)&&tf({id:t,store:X,nodeRef:U}),n&&n(ce,{...C.userNode})},oe=ce=>{if(!(gv(ce.nativeEvent)||_)){if(sv.includes(ce.key)&&I){const fe=ce.key==="Escape";tf({id:t,store:X,unselect:fe,nodeRef:U})}else if(L&&j.selected&&Object.prototype.hasOwnProperty.call(yc,ce.key)){ce.preventDefault();const{ariaLabelConfig:fe}=X.getState();X.setState({ariaLiveMessage:fe["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),T({direction:yc[ce.key],factor:ce.shiftKey?4:1})}}},de=()=>{var ve;if(_||!((ve=U.current)!=null&&ve.matches(":focus-visible")))return;const{transform:ce,width:fe,height:Ne,autoPanOnNodeFocus:ue,setCenter:he}=X.getState();if(!ue)return;yf(new Map([[t,j]]),{x:0,y:0,width:fe,height:Ne},ce,!0).length>0||he(j.position.x+$.width/2,j.position.y+$.height/2,{zoom:ce[2]})};return c.jsx("div",{className:dt(["react-flow__node",`react-flow__node-${z}`,{[w]:L},j.className,{selected:j.selected,selectable:I,parent:D,draggable:L,dragging:J}]),ref:U,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:P?"visible":"hidden",...j.style,...q},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ne,onMouseMove:O,onMouseLeave:H,onContextMenu:Z,onClick:le,onDoubleClick:te,onKeyDown:Y?oe:void 0,tabIndex:Y?0:void 0,onFocus:Y?de:void 0,role:j.ariaRole??(Y?"group":void 0),"aria-roledescription":"node","aria-describedby":_?void 0:`${Dv}-${A}`,"aria-label":j.ariaLabel,...j.domAttributes,children:c.jsx(W3,{value:t,children:c.jsx(R,{id:t,data:j.data,type:z,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:j.selected??!1,selectable:I,draggable:L,deletable:j.deletable??!0,isConnectable:Q,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:J,dragHandle:j.dragHandle,zIndex:C.z,parentId:j.parentId,...$})})})}var y4=M.memo(x4);const v4=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Yv(t){const{nodesDraggable:n,nodesConnectable:a,nodesFocusable:i,elementsSelectable:o,onError:u}=Ue(v4,Je),d=f4(t.onlyRenderVisibleElements),f=g4();return c.jsx("div",{className:"react-flow__nodes",style:Rc,children:d.map(m=>c.jsx(y4,{id:m,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:n,nodesConnectable:a,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:t.nodeClickDistance,onError:u},m))})}Yv.displayName="NodeRenderer";const b4=M.memo(Yv);function w4(t){return Ue(M.useCallback(a=>{if(!t)return a.edges.map(o=>o.id);const i=[];if(a.width&&a.height)for(const o of a.edges){const u=a.nodeLookup.get(o.source),d=a.nodeLookup.get(o.target);u&&d&&vT({sourceNode:u,targetNode:d,width:a.width,height:a.height,transform:a.transform})&&i.push(o.id)}return i},[t]),Je)}const _4=({color:t="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...t&&{stroke:t}};return c.jsx("polyline",{className:"arrow",style:a,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},S4=({color:t="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...t&&{stroke:t,fill:t}};return c.jsx("polyline",{className:"arrowclosed",style:a,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Jx={[Ur.Arrow]:_4,[Ur.ArrowClosed]:S4};function j4(t){const n=Ze();return M.useMemo(()=>{var o,u;return Object.prototype.hasOwnProperty.call(Jx,t)?Jx[t]:((u=(o=n.getState()).onError)==null||u.call(o,"009",On.error009(t)),null)},[t])}const N4=({id:t,type:n,color:a,width:i=12.5,height:o=12.5,markerUnits:u="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const m=j4(n);return m?c.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0",children:c.jsx(m,{color:a,strokeWidth:d})}):null},Xv=({defaultColor:t,rfId:n})=>{const a=Ue(u=>u.edges),i=Ue(u=>u.defaultEdgeOptions),o=M.useMemo(()=>AT(a,{id:n,defaultColor:t,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[a,i,n,t]);return o.length?c.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:c.jsx("defs",{children:o.map(u=>c.jsx(N4,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};Xv.displayName="MarkerDefinitions";var E4=M.memo(Xv);function Kv({x:t,y:n,label:a,labelStyle:i,labelShowBg:o=!0,labelBgStyle:u,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:m,className:p,...y}){const[x,v]=M.useState({x:1,y:0,width:0,height:0}),w=dt(["react-flow__edge-textwrapper",p]),_=M.useRef(null);return M.useEffect(()=>{if(_.current){const A=_.current.getBBox();v({x:A.x,y:A.y,width:A.width,height:A.height})}},[a]),a?c.jsxs("g",{transform:`translate(${t-x.width/2} ${n-x.height/2})`,className:w,visibility:x.width?"visible":"hidden",...y,children:[o&&c.jsx("rect",{width:x.width+2*d[0],x:-d[0],y:-d[1],height:x.height+2*d[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),c.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:_,style:i,children:a}),m]}):null}Kv.displayName="EdgeText";const A4=M.memo(Kv);function Mc({path:t,labelX:n,labelY:a,label:i,labelStyle:o,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,interactionWidth:p=20,...y}){return c.jsxs(c.Fragment,{children:[c.jsx("path",{...y,d:t,fill:"none",className:dt(["react-flow__edge-path",y.className])}),p?c.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,i&&bn(n)&&bn(a)?c.jsx(A4,{x:n,y:a,label:i,labelStyle:o,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m}):null]})}function Zx({pos:t,x1:n,y1:a,x2:i,y2:o}){return t===ye.Left||t===ye.Right?[.5*(n+i),a]:[n,.5*(a+o)]}function Qv({sourceX:t,sourceY:n,sourcePosition:a=ye.Bottom,targetX:i,targetY:o,targetPosition:u=ye.Top}){const[d,f]=Zx({pos:a,x1:t,y1:n,x2:i,y2:o}),[m,p]=Zx({pos:u,x1:i,y1:o,x2:t,y2:n}),[y,x,v,w]=xv({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:d,sourceControlY:f,targetControlX:m,targetControlY:p});return[`M${t},${n} C${d},${f} ${m},${p} ${i},${o}`,y,x,v,w]}function Jv(t){return M.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:u,sourcePosition:d,targetPosition:f,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:w,style:_,markerEnd:A,markerStart:E,interactionWidth:S})=>{const[N,j,C]=Qv({sourceX:a,sourceY:i,sourcePosition:d,targetX:o,targetY:u,targetPosition:f}),D=t.isInternal?void 0:n;return c.jsx(Mc,{id:D,path:N,labelX:j,labelY:C,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:w,style:_,markerEnd:A,markerStart:E,interactionWidth:S})})}const T4=Jv({isInternal:!1}),Zv=Jv({isInternal:!0});T4.displayName="SimpleBezierEdge";Zv.displayName="SimpleBezierEdgeInternal";function Fv(t){return M.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:v,sourcePosition:w=ye.Bottom,targetPosition:_=ye.Top,markerEnd:A,markerStart:E,pathOptions:S,interactionWidth:N})=>{const[j,C,D]=Zh({sourceX:a,sourceY:i,sourcePosition:w,targetX:o,targetY:u,targetPosition:_,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset,stepPosition:S==null?void 0:S.stepPosition}),z=t.isInternal?void 0:n;return c.jsx(Mc,{id:z,path:j,labelX:C,labelY:D,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:A,markerStart:E,interactionWidth:N})})}const Wv=Fv({isInternal:!1}),eb=Fv({isInternal:!0});Wv.displayName="SmoothStepEdge";eb.displayName="SmoothStepEdgeInternal";function tb(t){return M.memo(({id:n,...a})=>{var o;const i=t.isInternal?void 0:n;return c.jsx(Wv,{...a,id:i,pathOptions:M.useMemo(()=>{var u;return{borderRadius:0,offset:(u=a.pathOptions)==null?void 0:u.offset}},[(o=a.pathOptions)==null?void 0:o.offset])})})}const C4=tb({isInternal:!1}),nb=tb({isInternal:!0});C4.displayName="StepEdge";nb.displayName="StepEdgeInternal";function sb(t){return M.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:w,markerStart:_,interactionWidth:A})=>{const[E,S,N]=bv({sourceX:a,sourceY:i,targetX:o,targetY:u}),j=t.isInternal?void 0:n;return c.jsx(Mc,{id:j,path:E,labelX:S,labelY:N,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:v,markerEnd:w,markerStart:_,interactionWidth:A})})}const k4=sb({isInternal:!1}),ab=sb({isInternal:!0});k4.displayName="StraightEdge";ab.displayName="StraightEdgeInternal";function rb(t){return M.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:u,sourcePosition:d=ye.Bottom,targetPosition:f=ye.Top,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:w,style:_,markerEnd:A,markerStart:E,pathOptions:S,interactionWidth:N})=>{const[j,C,D]=yv({sourceX:a,sourceY:i,sourcePosition:d,targetX:o,targetY:u,targetPosition:f,curvature:S==null?void 0:S.curvature}),z=t.isInternal?void 0:n;return c.jsx(Mc,{id:z,path:j,labelX:C,labelY:D,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:v,labelBgBorderRadius:w,style:_,markerEnd:A,markerStart:E,interactionWidth:N})})}const O4=rb({isInternal:!1}),ib=rb({isInternal:!0});O4.displayName="BezierEdge";ib.displayName="BezierEdgeInternal";const Fx={default:ib,straight:ab,step:nb,smoothstep:eb,simplebezier:Zv},Wx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},R4=(t,n,a)=>a===ye.Left?t-n:a===ye.Right?t+n:t,M4=(t,n,a)=>a===ye.Top?t-n:a===ye.Bottom?t+n:t,ey="react-flow__edgeupdater";function ty({position:t,centerX:n,centerY:a,radius:i=10,onMouseDown:o,onMouseEnter:u,onMouseOut:d,type:f}){return c.jsx("circle",{onMouseDown:o,onMouseEnter:u,onMouseOut:d,className:dt([ey,`${ey}-${f}`]),cx:R4(n,i,t),cy:M4(a,i,t),r:i,stroke:"transparent",fill:"transparent"})}function D4({isReconnectable:t,reconnectRadius:n,edge:a,sourceX:i,sourceY:o,targetX:u,targetY:d,sourcePosition:f,targetPosition:m,onReconnect:p,onReconnectStart:y,onReconnectEnd:x,setReconnecting:v,setUpdateHover:w}){const _=Ze(),A=(C,D)=>{if(C.button!==0)return;const{autoPanOnConnect:z,domNode:R,isValidConnection:L,connectionMode:I,connectionRadius:Q,lib:Y,onConnectStart:X,onConnectEnd:P,cancelConnection:U,nodeLookup:J,rfId:T,panBy:$,updateConnection:q}=_.getState(),V=D.type==="target",ne=(Z,te)=>{v(!1),x==null||x(Z,a,D.type,te)},O=Z=>p==null?void 0:p(a,Z),H=(Z,te)=>{v(!0),y==null||y(C,a,D.type),X==null||X(Z,te)};ef.onPointerDown(C.nativeEvent,{autoPanOnConnect:z,connectionMode:I,connectionRadius:Q,domNode:R,handleId:D.id,nodeId:D.nodeId,nodeLookup:J,isTarget:V,edgeUpdaterType:D.type,lib:Y,flowId:T,cancelConnection:U,panBy:$,isValidConnection:L,onConnect:O,onConnectStart:H,onConnectEnd:P,onReconnectEnd:ne,updateConnection:q,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,dragThreshold:_.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},E=C=>A(C,{nodeId:a.target,id:a.targetHandle??null,type:"target"}),S=C=>A(C,{nodeId:a.source,id:a.sourceHandle??null,type:"source"}),N=()=>w(!0),j=()=>w(!1);return c.jsxs(c.Fragment,{children:[(t===!0||t==="source")&&c.jsx(ty,{position:f,centerX:i,centerY:o,radius:n,onMouseDown:E,onMouseEnter:N,onMouseOut:j,type:"source"}),(t===!0||t==="target")&&c.jsx(ty,{position:m,centerX:u,centerY:d,radius:n,onMouseDown:S,onMouseEnter:N,onMouseOut:j,type:"target"})]})}function z4({id:t,edgesFocusable:n,edgesReconnectable:a,elementsSelectable:i,onClick:o,onDoubleClick:u,onContextMenu:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:w,rfId:_,edgeTypes:A,noPanClassName:E,onError:S,disableKeyboardA11y:N}){let j=Ue(he=>he.edgeLookup.get(t));const C=Ue(he=>he.defaultEdgeOptions);j=C?{...C,...j}:j;let D=j.type||"default",z=(A==null?void 0:A[D])||Fx[D];z===void 0&&(S==null||S("011",On.error011(D)),D="default",z=(A==null?void 0:A.default)||Fx.default);const R=!!(j.focusable||n&&typeof j.focusable>"u"),L=typeof x<"u"&&(j.reconnectable||a&&typeof j.reconnectable>"u"),I=!!(j.selectable||i&&typeof j.selectable>"u"),Q=M.useRef(null),[Y,X]=M.useState(!1),[P,U]=M.useState(!1),J=Ze(),{zIndex:T,sourceX:$,sourceY:q,targetX:V,targetY:ne,sourcePosition:O,targetPosition:H}=Ue(M.useCallback(he=>{const me=he.nodeLookup.get(j.source),ve=he.nodeLookup.get(j.target);if(!me||!ve)return{zIndex:j.zIndex,...Wx};const Ae=ET({id:t,sourceNode:me,targetNode:ve,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:he.connectionMode,onError:S});return{zIndex:yT({selected:j.selected,zIndex:j.zIndex,sourceNode:me,targetNode:ve,elevateOnSelect:he.elevateEdgesOnSelect,zIndexMode:he.zIndexMode}),...Ae||Wx}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Je),Z=M.useMemo(()=>j.markerStart?`url('#${Fh(j.markerStart,_)}')`:void 0,[j.markerStart,_]),te=M.useMemo(()=>j.markerEnd?`url('#${Fh(j.markerEnd,_)}')`:void 0,[j.markerEnd,_]);if(j.hidden||$===null||q===null||V===null||ne===null)return null;const le=he=>{var be;const{addSelectedEdges:me,unselectNodesAndEdges:ve,multiSelectionActive:Ae}=J.getState();I&&(J.setState({nodesSelectionActive:!1}),j.selected&&Ae?(ve({nodes:[],edges:[j]}),(be=Q.current)==null||be.blur()):me([t])),o&&o(he,j)},oe=u?he=>{u(he,{...j})}:void 0,de=d?he=>{d(he,{...j})}:void 0,ce=f?he=>{f(he,{...j})}:void 0,fe=m?he=>{m(he,{...j})}:void 0,Ne=p?he=>{p(he,{...j})}:void 0,ue=he=>{var me;if(!N&&sv.includes(he.key)&&I){const{unselectNodesAndEdges:ve,addSelectedEdges:Ae}=J.getState();he.key==="Escape"?((me=Q.current)==null||me.blur(),ve({edges:[j]})):Ae([t])}};return c.jsx("svg",{style:{zIndex:T},children:c.jsxs("g",{className:dt(["react-flow__edge",`react-flow__edge-${D}`,j.className,E,{selected:j.selected,animated:j.animated,inactive:!I&&!o,updating:Y,selectable:I}]),onClick:le,onDoubleClick:oe,onContextMenu:de,onMouseEnter:ce,onMouseMove:fe,onMouseLeave:Ne,onKeyDown:R?ue:void 0,tabIndex:R?0:void 0,role:j.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":R?`${zv}-${_}`:void 0,ref:Q,...j.domAttributes,children:[!P&&c.jsx(z,{id:t,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:I,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:$,sourceY:q,targetX:V,targetY:ne,sourcePosition:O,targetPosition:H,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:Z,markerEnd:te,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),L&&c.jsx(D4,{edge:j,isReconnectable:L,reconnectRadius:y,onReconnect:x,onReconnectStart:v,onReconnectEnd:w,sourceX:$,sourceY:q,targetX:V,targetY:ne,sourcePosition:O,targetPosition:H,setUpdateHover:X,setReconnecting:U})]})})}var U4=M.memo(z4);const $4=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function lb({defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:a,edgeTypes:i,noPanClassName:o,onReconnect:u,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:m,onEdgeMouseLeave:p,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:v,onReconnectStart:w,onReconnectEnd:_,disableKeyboardA11y:A}){const{edgesFocusable:E,edgesReconnectable:S,elementsSelectable:N,onError:j}=Ue($4,Je),C=w4(n);return c.jsxs("div",{className:"react-flow__edges",children:[c.jsx(E4,{defaultColor:t,rfId:a}),C.map(D=>c.jsx(U4,{id:D,edgesFocusable:E,edgesReconnectable:S,elementsSelectable:N,noPanClassName:o,onReconnect:u,onContextMenu:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,onClick:y,reconnectRadius:x,onDoubleClick:v,onReconnectStart:w,onReconnectEnd:_,rfId:a,onError:j,edgeTypes:i,disableKeyboardA11y:A},D))]})}lb.displayName="EdgeRenderer";const L4=M.memo(lb),B4=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function H4({children:t}){const n=Ue(B4);return c.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}function q4(t){const n=Ef(),a=M.useRef(!1);M.useEffect(()=>{!a.current&&n.viewportInitialized&&t&&(setTimeout(()=>t(n),1),a.current=!0)},[t,n.viewportInitialized])}const I4=t=>{var n;return(n=t.panZoom)==null?void 0:n.syncViewport};function V4(t){const n=Ue(I4),a=Ze();return M.useEffect(()=>{t&&(n==null||n(t),a.setState({transform:[t.x,t.y,t.zoom]}))},[t,n]),null}function G4(t){return t.connection.inProgress?{...t.connection,to:ml(t.connection.to,t.transform)}:{...t.connection}}function P4(t){return G4}function Y4(t){const n=P4();return Ue(n,Je)}const X4=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function K4({containerStyle:t,style:n,type:a,component:i}){const{nodesConnectable:o,width:u,height:d,isValid:f,inProgress:m}=Ue(X4,Je);return!(u&&o&&m)?null:c.jsx("svg",{style:t,width:u,height:d,className:"react-flow__connectionline react-flow__container",children:c.jsx("g",{className:dt(["react-flow__connection",iv(f)]),children:c.jsx(ob,{style:n,type:a,CustomComponent:i,isValid:f})})})}const ob=({style:t,type:n=Is.Bezier,CustomComponent:a,isValid:i})=>{const{inProgress:o,from:u,fromNode:d,fromHandle:f,fromPosition:m,to:p,toNode:y,toHandle:x,toPosition:v,pointer:w}=Y4();if(!o)return;if(a)return c.jsx(a,{connectionLineType:n,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:u.x,fromY:u.y,toX:p.x,toY:p.y,fromPosition:m,toPosition:v,connectionStatus:iv(i),toNode:y,toHandle:x,pointer:w});let _="";const A={sourceX:u.x,sourceY:u.y,sourcePosition:m,targetX:p.x,targetY:p.y,targetPosition:v};switch(n){case Is.Bezier:[_]=yv(A);break;case Is.SimpleBezier:[_]=Qv(A);break;case Is.Step:[_]=Zh({...A,borderRadius:0});break;case Is.SmoothStep:[_]=Zh(A);break;default:[_]=bv(A)}return c.jsx("path",{d:_,fill:"none",className:"react-flow__connection-path",style:t})};ob.displayName="ConnectionLine";const Q4={};function ny(t=Q4){M.useRef(t),Ze(),M.useEffect(()=>{},[t])}function J4(){Ze(),M.useRef(!1),M.useEffect(()=>{},[])}function cb({nodeTypes:t,edgeTypes:n,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:w,connectionLineType:_,connectionLineStyle:A,connectionLineComponent:E,connectionLineContainerStyle:S,selectionKeyCode:N,selectionOnDrag:j,selectionMode:C,multiSelectionKeyCode:D,panActivationKeyCode:z,zoomActivationKeyCode:R,deleteKeyCode:L,onlyRenderVisibleElements:I,elementsSelectable:Q,defaultViewport:Y,translateExtent:X,minZoom:P,maxZoom:U,preventScrolling:J,defaultMarkerColor:T,zoomOnScroll:$,zoomOnPinch:q,panOnScroll:V,panOnScrollSpeed:ne,panOnScrollMode:O,zoomOnDoubleClick:H,panOnDrag:Z,onPaneClick:te,onPaneMouseEnter:le,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneScroll:ce,onPaneContextMenu:fe,paneClickDistance:Ne,nodeClickDistance:ue,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ve,onEdgeMouseLeave:Ae,reconnectRadius:be,onReconnect:De,onReconnectStart:ht,onReconnectEnd:nt,noDragClassName:jt,noWheelClassName:kt,noPanClassName:Gs,disableKeyboardA11y:Ps,nodeExtent:xt,rfId:Ca,viewport:Mn,onViewportChange:os}){return ny(t),ny(n),J4(),q4(a),V4(Mn),c.jsx(d4,{onPaneClick:te,onPaneMouseEnter:le,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneContextMenu:fe,onPaneScroll:ce,paneClickDistance:Ne,deleteKeyCode:L,selectionKeyCode:N,selectionOnDrag:j,selectionMode:C,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:D,panActivationKeyCode:z,zoomActivationKeyCode:R,elementsSelectable:Q,zoomOnScroll:$,zoomOnPinch:q,zoomOnDoubleClick:H,panOnScroll:V,panOnScrollSpeed:ne,panOnScrollMode:O,panOnDrag:Z,defaultViewport:Y,translateExtent:X,minZoom:P,maxZoom:U,onSelectionContextMenu:x,preventScrolling:J,noDragClassName:jt,noWheelClassName:kt,noPanClassName:Gs,disableKeyboardA11y:Ps,onViewportChange:os,isControlledViewport:!!Mn,children:c.jsxs(H4,{children:[c.jsx(L4,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:d,onReconnect:De,onReconnectStart:ht,onReconnectEnd:nt,onlyRenderVisibleElements:I,onEdgeContextMenu:he,onEdgeMouseEnter:me,onEdgeMouseMove:ve,onEdgeMouseLeave:Ae,reconnectRadius:be,defaultMarkerColor:T,noPanClassName:Gs,disableKeyboardA11y:Ps,rfId:Ca}),c.jsx(K4,{style:A,type:_,component:E,containerStyle:S}),c.jsx("div",{className:"react-flow__edgelabel-renderer"}),c.jsx(b4,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:y,nodeClickDistance:ue,onlyRenderVisibleElements:I,noPanClassName:Gs,noDragClassName:jt,disableKeyboardA11y:Ps,nodeExtent:xt,rfId:Ca}),c.jsx("div",{className:"react-flow__viewport-portal"})]})})}cb.displayName="GraphView";const Z4=M.memo(cb),sy=({nodes:t,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:u,fitView:d,fitViewOptions:f,minZoom:m=.5,maxZoom:p=2,nodeOrigin:y,nodeExtent:x,zIndexMode:v="basic"}={})=>{const w=new Map,_=new Map,A=new Map,E=new Map,S=i??n??[],N=a??t??[],j=y??[0,0],C=x??nl;Sv(A,E,S);const D=Wh(N,w,_,{nodeOrigin:j,nodeExtent:C,zIndexMode:v});let z=[0,0,1];if(d&&o&&u){const R=hl(w,{filter:Y=>!!((Y.width||Y.initialWidth)&&(Y.height||Y.initialHeight))}),{x:L,y:I,zoom:Q}=vf(R,o,u,m,p,(f==null?void 0:f.padding)??.1);z=[L,I,Q]}return{rfId:"1",width:o??0,height:u??0,transform:z,nodes:N,nodesInitialized:D,nodeLookup:w,parentLookup:_,edges:S,edgeLookup:E,connectionLookup:A,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:a!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:m,maxZoom:p,translateExtent:nl,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:zr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...rv},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:hT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:av,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},F4=({nodes:t,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:u,fitView:d,fitViewOptions:f,minZoom:m,maxZoom:p,nodeOrigin:y,nodeExtent:x,zIndexMode:v})=>p3((w,_)=>{async function A(){const{nodeLookup:E,panZoom:S,fitViewOptions:N,fitViewResolver:j,width:C,height:D,minZoom:z,maxZoom:R}=_();S&&(await uT({nodes:E,width:C,height:D,panZoom:S,minZoom:z,maxZoom:R},N),j==null||j.resolve(!0),w({fitViewResolver:null}))}return{...sy({nodes:t,edges:n,width:o,height:u,fitView:d,fitViewOptions:f,minZoom:m,maxZoom:p,nodeOrigin:y,nodeExtent:x,defaultNodes:a,defaultEdges:i,zIndexMode:v}),setNodes:E=>{const{nodeLookup:S,parentLookup:N,nodeOrigin:j,elevateNodesOnSelect:C,fitViewQueued:D,zIndexMode:z}=_(),R=Wh(E,S,N,{nodeOrigin:j,nodeExtent:x,elevateNodesOnSelect:C,checkEquality:!0,zIndexMode:z});D&&R?(A(),w({nodes:E,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:E,nodesInitialized:R})},setEdges:E=>{const{connectionLookup:S,edgeLookup:N}=_();Sv(S,N,E),w({edges:E})},setDefaultNodesAndEdges:(E,S)=>{if(E){const{setNodes:N}=_();N(E),w({hasDefaultNodes:!0})}if(S){const{setEdges:N}=_();N(S),w({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:S,nodeLookup:N,parentLookup:j,domNode:C,nodeOrigin:D,nodeExtent:z,debug:R,fitViewQueued:L,zIndexMode:I}=_(),{changes:Q,updatedInternals:Y}=DT(E,N,j,C,D,z,I);Y&&(kT(N,j,{nodeOrigin:D,nodeExtent:z,zIndexMode:I}),L?(A(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),(Q==null?void 0:Q.length)>0&&(R&&console.log("React Flow: trigger node changes",Q),S==null||S(Q)))},updateNodePositions:(E,S=!1)=>{const N=[];let j=[];const{nodeLookup:C,triggerNodeChanges:D,connection:z,updateConnection:R,onNodesChangeMiddlewareMap:L}=_();for(const[I,Q]of E){const Y=C.get(I),X=!!(Y!=null&&Y.expandParent&&(Y!=null&&Y.parentId)&&(Q!=null&&Q.position)),P={id:I,type:"position",position:X?{x:Math.max(0,Q.position.x),y:Math.max(0,Q.position.y)}:Q.position,dragging:S};if(Y&&z.inProgress&&z.fromNode.id===Y.id){const U=Ta(Y,z.fromHandle,ye.Left,!0);R({...z,from:U})}X&&Y.parentId&&N.push({id:I,parentId:Y.parentId,rect:{...Q.internals.positionAbsolute,width:Q.measured.width??0,height:Q.measured.height??0}}),j.push(P)}if(N.length>0){const{parentLookup:I,nodeOrigin:Q}=_(),Y=Nf(N,C,I,Q);j.push(...Y)}for(const I of L.values())j=I(j);D(j)},triggerNodeChanges:E=>{const{onNodesChange:S,setNodes:N,nodes:j,hasDefaultNodes:C,debug:D}=_();if(E!=null&&E.length){if(C){const z=Lv(E,j);N(z)}D&&console.log("React Flow: trigger node changes",E),S==null||S(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:S,setEdges:N,edges:j,hasDefaultEdges:C,debug:D}=_();if(E!=null&&E.length){if(C){const z=Bv(E,j);N(z)}D&&console.log("React Flow: trigger edge changes",E),S==null||S(E)}},addSelectedNodes:E=>{const{multiSelectionActive:S,edgeLookup:N,nodeLookup:j,triggerNodeChanges:C,triggerEdgeChanges:D}=_();if(S){const z=E.map(R=>ya(R,!0));C(z);return}C(Cr(j,new Set([...E]),!0)),D(Cr(N))},addSelectedEdges:E=>{const{multiSelectionActive:S,edgeLookup:N,nodeLookup:j,triggerNodeChanges:C,triggerEdgeChanges:D}=_();if(S){const z=E.map(R=>ya(R,!0));D(z);return}D(Cr(N,new Set([...E]))),C(Cr(j,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:S}={})=>{const{edges:N,nodes:j,nodeLookup:C,triggerNodeChanges:D,triggerEdgeChanges:z}=_(),R=E||j,L=S||N,I=R.map(Y=>{const X=C.get(Y.id);return X&&(X.selected=!1),ya(Y.id,!1)}),Q=L.map(Y=>ya(Y.id,!1));D(I),z(Q)},setMinZoom:E=>{const{panZoom:S,maxZoom:N}=_();S==null||S.setScaleExtent([E,N]),w({minZoom:E})},setMaxZoom:E=>{const{panZoom:S,minZoom:N}=_();S==null||S.setScaleExtent([N,E]),w({maxZoom:E})},setTranslateExtent:E=>{var S;(S=_().panZoom)==null||S.setTranslateExtent(E),w({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:S,triggerNodeChanges:N,triggerEdgeChanges:j,elementsSelectable:C}=_();if(!C)return;const D=S.reduce((R,L)=>L.selected?[...R,ya(L.id,!1)]:R,[]),z=E.reduce((R,L)=>L.selected?[...R,ya(L.id,!1)]:R,[]);N(D),j(z)},setNodeExtent:E=>{const{nodes:S,nodeLookup:N,parentLookup:j,nodeOrigin:C,elevateNodesOnSelect:D,nodeExtent:z,zIndexMode:R}=_();E[0][0]===z[0][0]&&E[0][1]===z[0][1]&&E[1][0]===z[1][0]&&E[1][1]===z[1][1]||(Wh(S,N,j,{nodeOrigin:C,nodeExtent:E,elevateNodesOnSelect:D,checkEquality:!1,zIndexMode:R}),w({nodeExtent:E}))},panBy:E=>{const{transform:S,width:N,height:j,panZoom:C,translateExtent:D}=_();return zT({delta:E,panZoom:C,transform:S,translateExtent:D,width:N,height:j})},setCenter:async(E,S,N)=>{const{width:j,height:C,maxZoom:D,panZoom:z}=_();if(!z)return Promise.resolve(!1);const R=typeof(N==null?void 0:N.zoom)<"u"?N.zoom:D;return await z.setViewport({x:j/2-E*R,y:C/2-S*R,zoom:R},{duration:N==null?void 0:N.duration,ease:N==null?void 0:N.ease,interpolate:N==null?void 0:N.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...rv}})},updateConnection:E=>{w({connection:E})},reset:()=>w({...sy()})}},Object.is);function W4({initialNodes:t,initialEdges:n,defaultNodes:a,defaultEdges:i,initialWidth:o,initialHeight:u,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:m,fitView:p,nodeOrigin:y,nodeExtent:x,zIndexMode:v,children:w}){const[_]=M.useState(()=>F4({nodes:t,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:u,fitView:p,minZoom:d,maxZoom:f,fitViewOptions:m,nodeOrigin:y,nodeExtent:x,zIndexMode:v}));return c.jsx(x3,{value:_,children:c.jsx(H3,{children:w})})}function eC({children:t,nodes:n,edges:a,defaultNodes:i,defaultEdges:o,width:u,height:d,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:w}){return M.useContext(kc)?c.jsx(c.Fragment,{children:t}):c.jsx(W4,{initialNodes:n,initialEdges:a,defaultNodes:i,defaultEdges:o,initialWidth:u,initialHeight:d,fitView:f,initialFitViewOptions:m,initialMinZoom:p,initialMaxZoom:y,nodeOrigin:x,nodeExtent:v,zIndexMode:w,children:t})}const tC={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function nC({nodes:t,edges:n,defaultNodes:a,defaultEdges:i,className:o,nodeTypes:u,edgeTypes:d,onNodeClick:f,onEdgeClick:m,onInit:p,onMove:y,onMoveStart:x,onMoveEnd:v,onConnect:w,onConnectStart:_,onConnectEnd:A,onClickConnectStart:E,onClickConnectEnd:S,onNodeMouseEnter:N,onNodeMouseMove:j,onNodeMouseLeave:C,onNodeContextMenu:D,onNodeDoubleClick:z,onNodeDragStart:R,onNodeDrag:L,onNodeDragStop:I,onNodesDelete:Q,onEdgesDelete:Y,onDelete:X,onSelectionChange:P,onSelectionDragStart:U,onSelectionDrag:J,onSelectionDragStop:T,onSelectionContextMenu:$,onSelectionStart:q,onSelectionEnd:V,onBeforeDelete:ne,connectionMode:O,connectionLineType:H=Is.Bezier,connectionLineStyle:Z,connectionLineComponent:te,connectionLineContainerStyle:le,deleteKeyCode:oe="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ce=!1,selectionMode:fe=sl.Full,panActivationKeyCode:Ne="Space",multiSelectionKeyCode:ue=rl()?"Meta":"Control",zoomActivationKeyCode:he=rl()?"Meta":"Control",snapToGrid:me,snapGrid:ve,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:be,nodesDraggable:De,autoPanOnNodeFocus:ht,nodesConnectable:nt,nodesFocusable:jt,nodeOrigin:kt=Uv,edgesFocusable:Gs,edgesReconnectable:Ps,elementsSelectable:xt=!0,defaultViewport:Ca=k3,minZoom:Mn=.5,maxZoom:os=2,translateExtent:Ys=nl,preventScrolling:Dc=!0,nodeExtent:ka,defaultMarkerColor:zc="#b1b1b7",zoomOnScroll:Uc=!0,zoomOnPinch:Xs=!0,panOnScroll:At=!1,panOnScrollSpeed:Sn=.5,panOnScrollMode:Tt=ja.Free,zoomOnDoubleClick:$c=!0,panOnDrag:Lc=!0,onPaneClick:Bc,onPaneMouseEnter:Oa,onPaneMouseMove:Ra,onPaneMouseLeave:Ma,onPaneScroll:Dn,onPaneContextMenu:Da,paneClickDistance:Ks=1,nodeClickDistance:Hc=0,children:gl,onReconnect:qr,onReconnectStart:Qs,onReconnectEnd:qc,onEdgeContextMenu:pl,onEdgeDoubleClick:xl,onEdgeMouseEnter:yl,onEdgeMouseMove:Ir,onEdgeMouseLeave:Vr,reconnectRadius:vl=10,onNodesChange:bl,onEdgesChange:jn,noDragClassName:ft="nodrag",noWheelClassName:Nt="nowheel",noPanClassName:zn="nopan",fitView:za,fitViewOptions:wl,connectOnClick:Ic,attributionPosition:_l,proOptions:Js,defaultEdgeOptions:Gr,elevateNodesOnSelect:cs=!0,elevateEdgesOnSelect:us=!1,disableKeyboardA11y:ds=!1,autoPanOnConnect:hs,autoPanOnNodeDrag:rt,autoPanSpeed:Sl,connectionRadius:jl,isValidConnection:Un,onError:fs,style:Vc,id:Pr,nodeDragThreshold:Nl,connectionDragThreshold:Gc,viewport:Ua,onViewportChange:$a,width:dn,height:Ot,colorMode:El="light",debug:Pc,onScroll:ms,ariaLabelConfig:Al,zIndexMode:Zs="basic",...Yc},Rt){const Fs=Pr||"1",Tl=D3(El),Yr=M.useCallback($n=>{$n.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ms==null||ms($n)},[ms]);return c.jsx("div",{"data-testid":"rf__wrapper",...Yc,onScroll:Yr,style:{...Vc,...tC},ref:Rt,className:dt(["react-flow",o,Tl]),id:Pr,role:"application",children:c.jsxs(eC,{nodes:t,edges:n,width:dn,height:Ot,fitView:za,fitViewOptions:wl,minZoom:Mn,maxZoom:os,nodeOrigin:kt,nodeExtent:ka,zIndexMode:Zs,children:[c.jsx(Z4,{onInit:p,onNodeClick:f,onEdgeClick:m,onNodeMouseEnter:N,onNodeMouseMove:j,onNodeMouseLeave:C,onNodeContextMenu:D,onNodeDoubleClick:z,nodeTypes:u,edgeTypes:d,connectionLineType:H,connectionLineStyle:Z,connectionLineComponent:te,connectionLineContainerStyle:le,selectionKeyCode:de,selectionOnDrag:ce,selectionMode:fe,deleteKeyCode:oe,multiSelectionKeyCode:ue,panActivationKeyCode:Ne,zoomActivationKeyCode:he,onlyRenderVisibleElements:Ae,defaultViewport:Ca,translateExtent:Ys,minZoom:Mn,maxZoom:os,preventScrolling:Dc,zoomOnScroll:Uc,zoomOnPinch:Xs,zoomOnDoubleClick:$c,panOnScroll:At,panOnScrollSpeed:Sn,panOnScrollMode:Tt,panOnDrag:Lc,onPaneClick:Bc,onPaneMouseEnter:Oa,onPaneMouseMove:Ra,onPaneMouseLeave:Ma,onPaneScroll:Dn,onPaneContextMenu:Da,paneClickDistance:Ks,nodeClickDistance:Hc,onSelectionContextMenu:$,onSelectionStart:q,onSelectionEnd:V,onReconnect:qr,onReconnectStart:Qs,onReconnectEnd:qc,onEdgeContextMenu:pl,onEdgeDoubleClick:xl,onEdgeMouseEnter:yl,onEdgeMouseMove:Ir,onEdgeMouseLeave:Vr,reconnectRadius:vl,defaultMarkerColor:zc,noDragClassName:ft,noWheelClassName:Nt,noPanClassName:zn,rfId:Fs,disableKeyboardA11y:ds,nodeExtent:ka,viewport:Ua,onViewportChange:$a}),c.jsx(M3,{nodes:t,edges:n,defaultNodes:a,defaultEdges:i,onConnect:w,onConnectStart:_,onConnectEnd:A,onClickConnectStart:E,onClickConnectEnd:S,nodesDraggable:De,autoPanOnNodeFocus:ht,nodesConnectable:nt,nodesFocusable:jt,edgesFocusable:Gs,edgesReconnectable:Ps,elementsSelectable:xt,elevateNodesOnSelect:cs,elevateEdgesOnSelect:us,minZoom:Mn,maxZoom:os,nodeExtent:ka,onNodesChange:bl,onEdgesChange:jn,snapToGrid:me,snapGrid:ve,connectionMode:O,translateExtent:Ys,connectOnClick:Ic,defaultEdgeOptions:Gr,fitView:za,fitViewOptions:wl,onNodesDelete:Q,onEdgesDelete:Y,onDelete:X,onNodeDragStart:R,onNodeDrag:L,onNodeDragStop:I,onSelectionDrag:J,onSelectionDragStart:U,onSelectionDragStop:T,onMove:y,onMoveStart:x,onMoveEnd:v,noPanClassName:zn,nodeOrigin:kt,rfId:Fs,autoPanOnConnect:hs,autoPanOnNodeDrag:rt,autoPanSpeed:Sl,onError:fs,connectionRadius:jl,isValidConnection:Un,selectNodesOnDrag:be,nodeDragThreshold:Nl,connectionDragThreshold:Gc,onBeforeDelete:ne,debug:Pc,ariaLabelConfig:Al,zIndexMode:Zs}),c.jsx(C3,{onSelectionChange:P}),gl,c.jsx(j3,{proOptions:Js,position:_l}),c.jsx(S3,{rfId:Fs,disableKeyboardA11y:ds})]})})}var sC=Hv(nC);function aC(t){const[n,a]=M.useState(t),i=M.useCallback(o=>a(u=>Lv(o,u)),[]);return[n,a,i]}function rC(t){const[n,a]=M.useState(t),i=M.useCallback(o=>a(u=>Bv(o,u)),[]);return[n,a,i]}function iC({dimensions:t,lineWidth:n,variant:a,className:i}){return c.jsx("path",{strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:dt(["react-flow__background-pattern",a,i])})}function lC({radius:t,className:n}){return c.jsx("circle",{cx:t,cy:t,r:t,className:dt(["react-flow__background-pattern","dots",n])})}var as;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(as||(as={}));const oC={[as.Dots]:1,[as.Lines]:1,[as.Cross]:6},cC=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ub({id:t,variant:n=as.Dots,gap:a=20,size:i,lineWidth:o=1,offset:u=0,color:d,bgColor:f,style:m,className:p,patternClassName:y}){const x=M.useRef(null),{transform:v,patternId:w}=Ue(cC,Je),_=i||oC[n],A=n===as.Dots,E=n===as.Cross,S=Array.isArray(a)?a:[a,a],N=[S[0]*v[2]||1,S[1]*v[2]||1],j=_*v[2],C=Array.isArray(u)?u:[u,u],D=E?[j,j]:N,z=[C[0]*v[2]||1+D[0]/2,C[1]*v[2]||1+D[1]/2],R=`${w}${t||""}`;return c.jsxs("svg",{className:dt(["react-flow__background",p]),style:{...m,...Rc,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:x,"data-testid":"rf__background",children:[c.jsx("pattern",{id:R,x:v[0]%N[0],y:v[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`,children:A?c.jsx(lC,{radius:j/2,className:y}):c.jsx(iC,{dimensions:D,lineWidth:o,variant:n,className:y})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}ub.displayName="Background";const uC=M.memo(ub);function dC(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:c.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function hC(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:c.jsx("path",{d:"M0 0h32v4.2H0z"})})}function fC(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:c.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function mC(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function gC(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Wo({children:t,className:n,...a}){return c.jsx("button",{type:"button",className:dt(["react-flow__controls-button",n]),...a,children:t})}const pC=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function db({style:t,showZoom:n=!0,showFitView:a=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:u,onZoomOut:d,onFitView:f,onInteractiveChange:m,className:p,children:y,position:x="bottom-left",orientation:v="vertical","aria-label":w}){const _=Ze(),{isInteractive:A,minZoomReached:E,maxZoomReached:S,ariaLabelConfig:N}=Ue(pC,Je),{zoomIn:j,zoomOut:C,fitView:D}=Ef(),z=()=>{j(),u==null||u()},R=()=>{C(),d==null||d()},L=()=>{D(o),f==null||f()},I=()=>{_.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),m==null||m(!A)},Q=v==="horizontal"?"horizontal":"vertical";return c.jsxs(Oc,{className:dt(["react-flow__controls",Q,p]),position:x,style:t,"data-testid":"rf__controls","aria-label":w??N["controls.ariaLabel"],children:[n&&c.jsxs(c.Fragment,{children:[c.jsx(Wo,{onClick:z,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:S,children:c.jsx(dC,{})}),c.jsx(Wo,{onClick:R,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:E,children:c.jsx(hC,{})})]}),a&&c.jsx(Wo,{className:"react-flow__controls-fitview",onClick:L,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:c.jsx(fC,{})}),i&&c.jsx(Wo,{className:"react-flow__controls-interactive",onClick:I,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:A?c.jsx(gC,{}):c.jsx(mC,{})}),y]})}db.displayName="Controls";const xC=M.memo(db);function yC({id:t,x:n,y:a,width:i,height:o,style:u,color:d,strokeColor:f,strokeWidth:m,className:p,borderRadius:y,shapeRendering:x,selected:v,onClick:w}){const{background:_,backgroundColor:A}=u||{},E=d||_||A;return c.jsx("rect",{className:dt(["react-flow__minimap-node",{selected:v},p]),x:n,y:a,rx:y,ry:y,width:i,height:o,style:{fill:E,stroke:f,strokeWidth:m},shapeRendering:x,onClick:w?S=>w(S,t):void 0})}const vC=M.memo(yC),bC=t=>t.nodes.map(n=>n.id),kh=t=>t instanceof Function?t:()=>t;function wC({nodeStrokeColor:t,nodeColor:n,nodeClassName:a="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:u=vC,onClick:d}){const f=Ue(bC,Je),m=kh(n),p=kh(t),y=kh(a),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return c.jsx(c.Fragment,{children:f.map(v=>c.jsx(SC,{id:v,nodeColorFunc:m,nodeStrokeColorFunc:p,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:u,onClick:d,shapeRendering:x},v))})}function _C({id:t,nodeColorFunc:n,nodeStrokeColorFunc:a,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:u,shapeRendering:d,NodeComponent:f,onClick:m}){const{node:p,x:y,y:x,width:v,height:w}=Ue(_=>{const{internals:A}=_.nodeLookup.get(t),E=A.userNode,{x:S,y:N}=A.positionAbsolute,{width:j,height:C}=ls(E);return{node:E,x:S,y:N,width:j,height:C}},Je);return!p||p.hidden||!hv(p)?null:c.jsx(f,{x:y,y:x,width:v,height:w,style:p.style,selected:!!p.selected,className:i(p),color:n(p),borderRadius:o,strokeColor:a(p),strokeWidth:u,shapeRendering:d,onClick:m,id:p.id})}const SC=M.memo(_C);var jC=M.memo(wC);const NC=200,EC=150,AC=t=>!t.hidden,TC=t=>{const n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:t.nodeLookup.size>0?dv(hl(t.nodeLookup,{filter:AC}),n):n,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},CC="react-flow__minimap-desc";function hb({style:t,className:n,nodeStrokeColor:a,nodeColor:i,nodeClassName:o="",nodeBorderRadius:u=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:m,maskColor:p,maskStrokeColor:y,maskStrokeWidth:x,position:v="bottom-right",onClick:w,onNodeClick:_,pannable:A=!1,zoomable:E=!1,ariaLabel:S,inversePan:N,zoomStep:j=1,offsetScale:C=5}){const D=Ze(),z=M.useRef(null),{boundingRect:R,viewBB:L,rfId:I,panZoom:Q,translateExtent:Y,flowWidth:X,flowHeight:P,ariaLabelConfig:U}=Ue(TC,Je),J=(t==null?void 0:t.width)??NC,T=(t==null?void 0:t.height)??EC,$=R.width/J,q=R.height/T,V=Math.max($,q),ne=V*J,O=V*T,H=C*V,Z=R.x-(ne-R.width)/2-H,te=R.y-(O-R.height)/2-H,le=ne+H*2,oe=O+H*2,de=`${CC}-${I}`,ce=M.useRef(0),fe=M.useRef();ce.current=V,M.useEffect(()=>{if(z.current&&Q)return fe.current=GT({domNode:z.current,panZoom:Q,getTransform:()=>D.getState().transform,getViewScale:()=>ce.current}),()=>{var me;(me=fe.current)==null||me.destroy()}},[Q]),M.useEffect(()=>{var me;(me=fe.current)==null||me.update({translateExtent:Y,width:X,height:P,inversePan:N,pannable:A,zoomStep:j,zoomable:E})},[A,E,N,j,Y,X,P]);const Ne=w?me=>{var be;const[ve,Ae]=((be=fe.current)==null?void 0:be.pointer(me))||[0,0];w(me,{x:ve,y:Ae})}:void 0,ue=_?M.useCallback((me,ve)=>{const Ae=D.getState().nodeLookup.get(ve).internals.userNode;_(me,Ae)},[]):void 0,he=S??U["minimap.ariaLabel"];return c.jsx(Oc,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*V:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:dt(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:c.jsxs("svg",{width:J,height:T,viewBox:`${Z} ${te} ${le} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:z,onClick:Ne,children:[he&&c.jsx("title",{id:de,children:he}),c.jsx(jC,{onClick:ue,nodeColor:i,nodeStrokeColor:a,nodeBorderRadius:u,nodeClassName:o,nodeStrokeWidth:d,nodeComponent:f}),c.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-H},${te-H}h${le+H*2}v${oe+H*2}h${-le-H*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}hb.displayName="MiniMap";const kC=M.memo(hb),OC=t=>n=>t?`${Math.max(1/n.transform[2],1)}`:void 0,RC={[Hr.Line]:"right",[Hr.Handle]:"bottom-right"};function MC({nodeId:t,position:n,variant:a=Hr.Handle,className:i,style:o=void 0,children:u,color:d,minWidth:f=10,minHeight:m=10,maxWidth:p=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:v,autoScale:w=!0,shouldResize:_,onResizeStart:A,onResize:E,onResizeEnd:S}){const N=Gv(),j=typeof t=="string"?t:N,C=Ze(),D=M.useRef(null),z=a===Hr.Handle,R=Ue(M.useCallback(OC(z&&w),[z,w]),Je),L=M.useRef(null),I=n??RC[a];M.useEffect(()=>{if(!(!D.current||!j))return L.current||(L.current=a3({domNode:D.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:Y,transform:X,snapGrid:P,snapToGrid:U,nodeOrigin:J,domNode:T}=C.getState();return{nodeLookup:Y,transform:X,snapGrid:P,snapToGrid:U,nodeOrigin:J,paneDomNode:T}},onChange:(Y,X)=>{const{triggerNodeChanges:P,nodeLookup:U,parentLookup:J,nodeOrigin:T}=C.getState(),$=[],q={x:Y.x,y:Y.y},V=U.get(j);if(V&&V.expandParent&&V.parentId){const ne=V.origin??T,O=Y.width??V.measured.width??0,H=Y.height??V.measured.height??0,Z={id:V.id,parentId:V.parentId,rect:{width:O,height:H,...fv({x:Y.x??V.position.x,y:Y.y??V.position.y},{width:O,height:H},V.parentId,U,ne)}},te=Nf([Z],U,J,T);$.push(...te),q.x=Y.x?Math.max(ne[0]*O,Y.x):void 0,q.y=Y.y?Math.max(ne[1]*H,Y.y):void 0}if(q.x!==void 0&&q.y!==void 0){const ne={id:j,type:"position",position:{...q}};$.push(ne)}if(Y.width!==void 0&&Y.height!==void 0){const O={id:j,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:Y.width,height:Y.height}};$.push(O)}for(const ne of X){const O={...ne,type:"position"};$.push(O)}P($)},onEnd:({width:Y,height:X})=>{const P={id:j,type:"dimensions",resizing:!1,dimensions:{width:Y,height:X}};C.getState().triggerNodeChanges([P])}})),L.current.update({controlPosition:I,boundaries:{minWidth:f,minHeight:m,maxWidth:p,maxHeight:y},keepAspectRatio:x,resizeDirection:v,onResizeStart:A,onResize:E,onResizeEnd:S,shouldResize:_}),()=>{var Y;(Y=L.current)==null||Y.destroy()}},[I,f,m,p,y,x,A,E,S,_]);const Q=I.split("-");return c.jsx("div",{className:dt(["react-flow__resize-control","nodrag",...Q,a,i]),ref:D,style:{...o,scale:R,...d&&{[z?"backgroundColor":"borderColor"]:d}},children:u})}M.memo(MC);const nf={input:{bg:"#22c55e",border:"#16a34a",icon:""},output:{bg:"#22c55e",border:"#16a34a",icon:""},thinking:{bg:"#3b82f6",border:"#2563eb",icon:""},llm_call:{bg:"#8b5cf6",border:"#7c3aed",icon:""},tool_call:{bg:"#f59e0b",border:"#d97706",icon:""},tool_result:{bg:"#06b6d4",border:"#0891b2",icon:""},decision:{bg:"#ec4899",border:"#db2777",icon:""},handoff:{bg:"#14b8a6",border:"#0d9488",icon:""},approval:{bg:"#eab308",border:"#ca8a04",icon:""},error:{bg:"#ef4444",border:"#dc2626",icon:""},response:{bg:"#22c55e",border:"#16a34a",icon:""}};function DC({data:t}){const n=nf[t.type]||{border:"#4b5563",icon:""},a=t.status==="running",i=t.type==="error"||t.status==="error";return c.jsxs("div",{className:`px-4 py-3 rounded-lg shadow-lg min-w-[180px] max-w-[280px] transition-all ${a?"ring-2 ring-blue-400 ring-offset-2 ring-offset-gray-900":""}`,style:{backgroundColor:i?"#7f1d1d":"#1f2937",borderWidth:2,borderColor:n.border},children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-lg",children:n.icon}),c.jsx("span",{className:"font-medium text-white text-sm truncate",children:t.label}),a&&c.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse ml-auto"})]}),c.jsx("div",{className:"text-xs text-gray-400",children:t.type}),t.duration&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.duration,"ms"]}),t.tokens&&c.jsxs("div",{className:"text-xs text-gray-500",children:[t.tokens.input+t.tokens.output," tokens"]})]})}const zC={custom:DC};function UC({runId:t,visualization:n,isLive:a,onNodeClick:i}){const[o,u,d]=aC([]),[f,m,p]=rC([]),[y,x]=M.useState(null);M.useEffect(()=>{if(!n)return;const _=n.nodes.map((E,S)=>{let N=0;return(E.type==="tool_call"||E.type==="tool_result")&&(N=(n.nodes.slice(0,S).filter(C=>C.type==="tool_call"||C.type==="tool_result").length%2===0?-1:1)*150),{id:E.id,type:"custom",position:{x:300+N,y:S*120},data:{label:E.label,type:E.type,status:E.status,...E.data},sourcePosition:ye.Bottom,targetPosition:ye.Top}}),A=n.edges.map((E,S)=>({id:`edge-${S}`,source:E.source,target:E.target,label:E.label,animated:a,style:{stroke:"#6b7280",strokeWidth:2},markerEnd:{type:Ur.ArrowClosed,color:"#6b7280"},labelStyle:{fill:"#9ca3af",fontSize:10},labelBgStyle:{fill:"#1f2937"}}));u(_),m(A)},[n,a,u,m]);const v=M.useCallback((_,A)=>{x(A.id),i&&i(A.id,A.data)},[i]),w=M.useMemo(()=>({style:{strokeWidth:2,stroke:"#6b7280"},markerEnd:{type:Ur.ArrowClosed,color:"#6b7280"}}),[]);return!n||n.nodes.length===0?c.jsx("div",{className:"h-full flex items-center justify-center bg-gray-900 rounded-lg",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("p",{children:"No flow data available"}),c.jsx("p",{className:"text-sm mt-2",children:"Run an agent to see the execution flow"})]})}):c.jsxs("div",{className:"h-full w-full bg-gray-900 rounded-lg overflow-hidden",children:[c.jsxs(sC,{nodes:o,edges:f,onNodesChange:d,onEdgesChange:p,onNodeClick:v,nodeTypes:zC,defaultEdgeOptions:w,fitView:!0,fitViewOptions:{padding:.2},minZoom:.2,maxZoom:2,attributionPosition:"bottom-left",children:[c.jsx(uC,{variant:as.Dots,gap:20,size:1,color:"#374151"}),c.jsx(xC,{className:"bg-gray-800 border-gray-700",showInteractive:!1}),c.jsx(kC,{className:"bg-gray-800 border-gray-700",nodeColor:_=>{var E;const A=nf[(E=_.data)==null?void 0:E.type];return(A==null?void 0:A.bg)||"#6b7280"},maskColor:"rgba(0, 0, 0, 0.8)"})]}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800/90 backdrop-blur rounded-lg p-3 border border-gray-700",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2 font-medium",children:"Legend"}),c.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(nf).slice(0,8).map(([_,A])=>c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx("span",{children:A.icon}),c.jsx("span",{className:"text-gray-300 capitalize",children:_.replace("_"," ")})]},_))})]}),a&&c.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 bg-blue-600/90 backdrop-blur px-3 py-1.5 rounded-full",children:[c.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),c.jsx("span",{className:"text-xs text-white font-medium",children:"Live"})]})]})}const Er="";function $C({onClose:t,selectedRunId:n}){const{user:a,getAuthHeaders:i}=Vs(),[o,u]=M.useState("dashboard"),[d,f]=M.useState([]),[m,p]=M.useState(null),[y,x]=M.useState(null),[v,w]=M.useState([]),[_,A]=M.useState([]),[E,S]=M.useState(!0),[N,j]=M.useState(!1),C="demo-user-001";a!=null&&a.id;const D=M.useCallback(()=>{const L=i();return L["x-user-id"]||(L["x-user-id"]=C),L},[i]),z=M.useCallback(async()=>{const L=D();try{const[I,Q,Y,X]=await Promise.all([fetch(`${Er}/api/agents/traces?limit=20`,{headers:L}),fetch(`${Er}/api/agents/stats`,{headers:L}),fetch(`${Er}/api/agents/specialists`,{headers:L}),fetch(`${Er}/api/agents/active`,{headers:L})]);if(I.ok){const P=await I.json();f(P.traces||[])}if(Q.ok){const P=await Q.json();x(P)}if(Y.ok){const P=await Y.json();w(P.specialists||[])}if(X.ok){const P=await X.json();A(P.active||[])}}catch(I){console.error("Error fetching observability data:",I)}finally{S(!1)}},[D]);M.useEffect(()=>{z();const L=setInterval(z,3e3);return()=>clearInterval(L)},[z]);const R=M.useCallback(async L=>{const I=D();try{const Q=await fetch(`${Er}/api/agents/traces/${L}?tree=true`,{headers:I});if(Q.ok){const Y=await Q.json();p(Y.trace)}}catch(Q){console.error("Error fetching trace details:",Q)}},[D]);return M.useEffect(()=>{n&&(R(n),u("flow"))},[n,R]),E?c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-white text-center",children:[c.jsx("div",{className:"animate-spin text-4xl mb-4",children:""}),c.jsx("p",{children:"Loading Agent Observatory..."})]})}):c.jsxs("div",{className:"fixed inset-0 bg-cscx-black z-50 overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"bg-gray-900 border-b border-gray-700 px-6 py-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:""}),"Agent Mission Control"]}),_.length>0&&c.jsxs("span",{className:"flex items-center gap-2 text-sm text-blue-400",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),_.length," active"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>j(!N),className:`px-3 py-1.5 rounded text-sm flex items-center gap-2 transition-colors ${N?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[c.jsx("span",{children:N?"":""}),"Follow Mode"]}),c.jsx("div",{className:"flex bg-gray-800 rounded-lg p-1",children:["dashboard","traces","flow"].map(L=>c.jsxs("button",{onClick:()=>u(L),className:`px-4 py-1.5 rounded text-sm transition-colors ${o===L?"bg-cscx-accent text-white":"text-gray-400 hover:text-white"}`,children:[L==="dashboard"&&" Dashboard",L==="traces"&&" Traces",L==="flow"&&" Flow"]},L))}),t&&c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-xl",children:""})]})]}),c.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="dashboard"&&c.jsx(LC,{stats:y,activeRuns:_,specialists:v,onSelectRun:L=>{R(L),u("flow")}}),o==="traces"&&c.jsx(BC,{traces:d,selectedTrace:m,onSelectTrace:L=>{p(L),R(L.id)}}),o==="flow"&&c.jsx(HC,{trace:m,followMode:N,activeRuns:_,buildHeaders:D})]})]})}function LC({stats:t,activeRuns:n,specialists:a,onSelectRun:i}){var o,u,d,f;return c.jsxs("div",{className:"h-full overflow-auto p-6",children:[c.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total Runs"}),c.jsx("div",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.totalRuns)||0})]}),c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Active Runs"}),c.jsx("div",{className:"text-3xl font-bold text-blue-400",children:(t==null?void 0:t.activeRuns)||0})]}),c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Avg Duration"}),c.jsx("div",{className:"text-3xl font-bold text-white",children:t!=null&&t.avgDuration?`${(t.avgDuration/1e3).toFixed(1)}s`:"-"})]}),c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total Tokens"}),c.jsx("div",{className:"text-xl font-bold text-white",children:t!=null&&t.totalTokens?`${(t.totalTokens.input+t.totalTokens.output).toLocaleString()}`:"-"}),c.jsxs("div",{className:"text-xs text-gray-500",children:["In: ",((u=(o=t==null?void 0:t.totalTokens)==null?void 0:o.input)==null?void 0:u.toLocaleString())||0," | Out: ",((f=(d=t==null?void 0:t.totalTokens)==null?void 0:d.output)==null?void 0:f.toLocaleString())||0]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[c.jsxs("div",{className:"col-span-2 bg-gray-800 rounded-lg border border-gray-700",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:c.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),"Active Agent Runs"]})}),c.jsx("div",{className:"p-4",children:n.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No active runs. Send a message to start an agent."}):c.jsx("div",{className:"space-y-3",children:n.map(m=>c.jsxs("div",{onClick:()=>i(m.id),className:"bg-gray-900 rounded-lg p-3 cursor-pointer hover:bg-gray-700 transition-colors border border-gray-600",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:m.agentType==="orchestrator"?"":""}),c.jsx("span",{className:"font-medium text-white",children:m.agentName})]}),c.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue-500 text-white animate-pulse",children:m.status})]}),c.jsx("div",{className:"text-sm text-gray-400 truncate",children:m.input}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[c.jsxs("span",{children:[m.stepCount," steps"]}),c.jsx("span",{children:new Date(m.startTime).toLocaleTimeString()})]})]},m.id))})})]}),c.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:c.jsx("h3",{className:"font-semibold text-white",children:"Available Specialists"})}),c.jsx("div",{className:"p-4 space-y-2 max-h-[400px] overflow-auto",children:a.map(m=>c.jsxs("div",{className:"bg-gray-900 rounded p-3 border border-gray-700",children:[c.jsx("div",{className:"font-medium text-white text-sm",children:m.name}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:m.description})]},m.id))})]})]}),(t==null?void 0:t.byAgent)&&Object.keys(t.byAgent).length>0&&c.jsxs("div",{className:"mt-6 bg-gray-800 rounded-lg border border-gray-700 p-4",children:[c.jsx("h3",{className:"font-semibold text-white mb-4",children:"Runs by Agent"}),c.jsx("div",{className:"flex items-end gap-4 h-32",children:Object.entries(t.byAgent).map(([m,p])=>{const y=Math.max(...Object.values(t.byAgent)),x=p/y*100;return c.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[c.jsx("div",{className:"w-full bg-cscx-accent rounded-t",style:{height:`${x}%`}}),c.jsx("div",{className:"text-xs text-gray-400 mt-2 text-center truncate w-full",children:m}),c.jsx("div",{className:"text-sm font-bold text-white",children:p})]},m)})})]})]})}function BC({traces:t,selectedTrace:n,onSelectTrace:a}){return c.jsxs("div",{className:"h-full flex",children:[c.jsx("div",{className:"w-96 border-r border-gray-700 overflow-auto",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Recent Traces"}),c.jsx("div",{className:"space-y-2",children:t.map(i=>c.jsxs("div",{onClick:()=>a(i),className:`p-3 rounded-lg cursor-pointer transition-colors ${(n==null?void 0:n.id)===i.id?"bg-cscx-accent/20 border border-cscx-accent":"bg-gray-800 hover:bg-gray-700 border border-transparent"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"font-medium text-white text-sm",children:i.agentName}),c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs text-white ${i.status==="completed"?"bg-green-500":i.status==="failed"?"bg-red-500":i.status==="running"?"bg-blue-500 animate-pulse":"bg-yellow-500"}`,children:i.status})]}),c.jsx("div",{className:"text-xs text-gray-400 truncate mb-2",children:i.input}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[c.jsxs("span",{children:[i.stepCount," steps"]}),i.duration&&c.jsxs("span",{children:[(i.duration/1e3).toFixed(1),"s"]}),c.jsx("span",{children:new Date(i.startTime).toLocaleTimeString()})]})]},i.id))})]})}),c.jsx("div",{className:"flex-1 overflow-auto p-6",children:n?c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:n.agentName}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[c.jsxs("span",{children:["Run ID: ",n.id.substring(0,8),"..."]}),c.jsxs("span",{children:["Status: ",n.status]}),n.duration&&c.jsxs("span",{children:["Duration: ",(n.duration/1e3).toFixed(2),"s"]})]})]}),n.steps&&n.steps.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Execution Steps"}),n.steps.map((i,o)=>c.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-lg",children:i.type==="thinking"?"":i.type==="tool_call"?"":i.type==="llm_call"?"":i.type==="decision"?"":i.type==="handoff"?"":i.type==="approval"?"":i.type==="error"?"":""}),c.jsx("span",{className:"font-medium text-white",children:i.name}),c.jsx("span",{className:"text-xs text-gray-500",children:i.type}),i.duration&&c.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[i.duration,"ms"]})]}),i.description&&c.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i.description}),i.input&&c.jsxs("details",{className:"mt-2",children:[c.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-300",children:"Input"}),c.jsx("pre",{className:"mt-1 p-2 bg-gray-900 rounded text-xs text-gray-300 overflow-auto max-h-32",children:JSON.stringify(i.input,null,2)})]}),i.output&&c.jsxs("details",{className:"mt-2",children:[c.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-300",children:"Output"}),c.jsx("pre",{className:"mt-1 p-2 bg-gray-900 rounded text-xs text-gray-300 overflow-auto max-h-32",children:JSON.stringify(i.output,null,2)})]}),i.tokens&&c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Tokens: ",i.tokens.input," in / ",i.tokens.output," out"]})]},i.id))]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a trace to view details"})})]})}function HC({trace:t,followMode:n,activeRuns:a,buildHeaders:i}){const[o,u]=M.useState(null),[d,f]=M.useState(null),m=n&&a.length>0?a[0]:t;M.useEffect(()=>{if(!(m!=null&&m.id))return;const y=async()=>{try{const v=await fetch(`${Er}/api/agents/traces/${m.id}/visualization`,{headers:i()});if(v.ok){const w=await v.json();u(w)}}catch(v){console.error("Failed to fetch visualization:",v)}};y();let x=null;return m.status==="running"&&(x=setInterval(y,2e3)),()=>{x&&clearInterval(x)}},[m==null?void 0:m.id,m==null?void 0:m.status,i]);const p=M.useCallback((y,x)=>{f({id:y,...x})},[]);return m?c.jsxs("div",{className:"h-full flex",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("div",{className:"absolute top-4 left-4 z-10 bg-gray-800/90 backdrop-blur rounded-lg p-3 border border-gray-700 max-w-sm",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xl",children:m.agentType==="orchestrator"?"":""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h2",{className:"font-bold text-white text-sm truncate",children:m.agentName}),c.jsx("p",{className:"text-xs text-gray-400 truncate",children:m.input})]}),c.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs text-white ${m.status==="completed"?"bg-green-500":m.status==="failed"?"bg-red-500":m.status==="running"?"bg-blue-500 animate-pulse":"bg-yellow-500"}`,children:m.status})]})}),c.jsx(UC,{runId:m.id,visualization:o||void 0,isLive:m.status==="running"||n,onNodeClick:p})]}),d&&c.jsxs("div",{className:"w-80 border-l border-gray-700 bg-gray-900 p-4 overflow-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"font-semibold text-white",children:"Node Details"}),c.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-white",children:""})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Type"}),c.jsx("div",{className:"text-sm text-white",children:d.type})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Name"}),c.jsx("div",{className:"text-sm text-white",children:d.label})]}),d.duration&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Duration"}),c.jsxs("div",{className:"text-sm text-white",children:[d.duration,"ms"]})]}),d.tokens&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Tokens"}),c.jsxs("div",{className:"text-sm text-white",children:[d.tokens.input," in / ",d.tokens.output," out"]})]}),d.input&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Input"}),c.jsx("pre",{className:"text-xs text-gray-300 bg-gray-800 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(d.input,null,2)})]}),d.output&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Output"}),c.jsx("pre",{className:"text-xs text-gray-300 bg-gray-800 p-2 rounded overflow-auto max-h-32",children:typeof d.output=="string"?d.output:JSON.stringify(d.output,null,2)})]})]})]})]}):c.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("p",{children:"Select a trace or enable Follow Mode to visualize agent execution"})]})})}const qC="",IC=async t=>{var n;try{const a=await fetch(`${qC}/api/contracts/parse`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t.type,content:t.content,mimeType:t.mimeType,fileName:t.fileName})});if(!a.ok){const u=await a.json();throw new Error(((n=u.error)==null?void 0:n.message)||"Failed to parse contract")}const i=await a.json(),o=Array.isArray(i.research)?i.research[0]:i.research;return{...i,research:o}}catch(a){throw console.error("Contract parsing error:",a),a}};var Bt=(t=>(t[t.Idle=0]="Idle",t[t.Parsing=1]="Parsing",t[t.Generating=2]="Generating",t[t.Ready=3]="Ready",t[t.Error=4]="Error",t))(Bt||{});const VC=()=>{var O,H;const{isAuthenticated:t,loading:n}=Vs(),[a,i]=M.useState(!1);M.useEffect(()=>{const Z=window.location.pathname;Z==="/auth/callback"?u("auth-callback"):Z==="/login"&&u("login")},[]);const[o,u]=M.useState("customers"),[d,f]=M.useState("onboarding"),[m,p]=M.useState(Bt.Idle),[y,x]=M.useState(null),[v,w]=M.useState("entitlements"),[_,A]=M.useState(null),[E,S]=M.useState(!1),[N,j]=M.useState(null),[C,D]=M.useState(null),[z,R]=M.useState(null),[L,I]=M.useState(null),[Q,Y]=M.useState(null);M.useEffect(()=>{var Z,te,le;N&&Y({name:N.company_name,arr:N.arr,products:((Z=N.entitlements)==null?void 0:Z.map(oe=>oe.description).slice(0,5))||[],stakeholders:((te=N.stakeholders)==null?void 0:te.map(oe=>`${oe.name} (${oe.role})`))||[],contractPeriod:N.contract_period,technicalRequirements:((le=N.technical_requirements)==null?void 0:le.map(oe=>oe.requirement))||[],tasks:N.contract_tasks||[],missingInfo:N.missing_info||[]})},[N]);const X=()=>{u("onboarding"),f("onboarding"),p(Bt.Idle)},P=Z=>{A(Z.id),u("customer-detail")},U=()=>{u("customers"),A(null)},J=M.useCallback(async Z=>{try{p(Bt.Parsing);const te=await IC(Z);j(te.contractData),p(Bt.Generating),D(te.summary),R(te.research),I(te.plan),p(Bt.Ready)}catch(te){console.error(te),x(te instanceof Error?te.message:"An unknown error occurred."),p(Bt.Error)}},[]),T=()=>{u("execution"),f("execution")},$=()=>{u("onboarding"),f("onboarding")},q=()=>{u("customers")},V=[{id:"entitlements",label:"Entitlements"},{id:"stakeholders",label:"Stakeholders"},{id:"technical",label:"Tech Specs"},{id:"tasks",label:"Agent Tasks"},{id:"pricing",label:"Pricing"}],ne=()=>{var Z,te,le,oe,de,ce,fe,Ne,ue,he,me;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:$,className:"px-4 py-2 bg-cscx-gray-800 hover:bg-cscx-gray-700 text-cscx-gray-300 rounded-lg transition-colors flex items-center gap-2",children:" Back to Contract Review"}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-cscx-gray-900 rounded-lg border border-yellow-500/30",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),c.jsx("span",{className:"text-sm text-yellow-500",children:"Ready to Deploy"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cscx-accent to-red-700 rounded-xl flex items-center justify-center text-3xl",children:""}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ready to Execute"}),c.jsx("p",{className:"text-cscx-gray-400",children:"All data extracted and plan generated"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:((Z=N==null?void 0:N.entitlements)==null?void 0:Z.length)||0}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Entitlements"})]}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:((te=N==null?void 0:N.stakeholders)==null?void 0:te.length)||0}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Stakeholders"})]}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:((le=N==null?void 0:N.technical_requirements)==null?void 0:le.length)||0}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Tech Specs"})]}),c.jsxs("div",{className:"bg-cscx-gray-800 rounded-lg p-3 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:((oe=L==null?void 0:L.phases)==null?void 0:oe.reduce((ve,Ae)=>{var be;return ve+(((be=Ae.tasks)==null?void 0:be.length)||0)},0))||0}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:"Plan Tasks"})]})]}),c.jsxs("button",{onClick:T,className:"w-full py-4 px-6 bg-cscx-accent hover:bg-red-700 text-white font-bold rounded-xl transition-all transform hover:scale-[1.01] flex items-center justify-center gap-3 text-lg",children:[c.jsx("span",{children:""}),"Deploy Agents & Start Execution"]}),c.jsx("p",{className:"text-xs text-cscx-gray-500 text-center mt-3",children:"Agents will have full access to contract data and the 30-60-90 plan"})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"What happens next?"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:"Onboarding Agent activates"}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"Orchestrates the entire onboarding process"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:"Meeting Agent available"}),c.jsxs("p",{className:"text-sm text-cscx-gray-400",children:["Schedule kickoff calls with ",((ce=(de=N==null?void 0:N.stakeholders)==null?void 0:de[0])==null?void 0:ce.name)||"stakeholders"]})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:"Training Agent ready"}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"Create onboarding materials based on entitlements"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-medium",children:"Human-in-the-loop approval"}),c.jsx("p",{className:"text-sm text-cscx-gray-400",children:"You approve all critical actions before execution"})]})]})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Customer Summary"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Company"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:N==null?void 0:N.company_name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"ARR"}),c.jsxs("p",{className:"text-lg font-semibold text-cscx-accent",children:["$",(fe=N==null?void 0:N.arr)==null?void 0:fe.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Contract Period"}),c.jsx("p",{className:"text-white",children:(N==null?void 0:N.contract_period)||"Not specified"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider",children:"Plan Duration"}),c.jsxs("p",{className:"text-white",children:[(L==null?void 0:L.timeline_days)||90," days  ",((Ne=L==null?void 0:L.phases)==null?void 0:Ne.length)||3," phases"]})]})]})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Key Stakeholders"}),c.jsxs("div",{className:"space-y-3",children:[(ue=N==null?void 0:N.stakeholders)==null?void 0:ue.slice(0,4).map((ve,Ae)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-cscx-gray-800 rounded-full flex items-center justify-center text-sm font-medium text-cscx-accent",children:ve.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white text-sm font-medium",children:ve.name}),c.jsx("p",{className:"text-xs text-cscx-gray-400",children:ve.role})]})]},Ae)),(((he=N==null?void 0:N.stakeholders)==null?void 0:he.length)||0)>4&&c.jsxs("p",{className:"text-xs text-cscx-gray-500",children:["+",(((me=N==null?void 0:N.stakeholders)==null?void 0:me.length)||0)-4," more stakeholders"]})]})]}),c.jsxs("div",{className:"bg-cscx-gray-900 border border-cscx-gray-800 rounded-xl p-4",children:[c.jsx("p",{className:"text-xs text-cscx-gray-400 uppercase tracking-wider mb-3",children:"Quick Review"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:()=>{$(),w("entitlements")},className:"w-full text-left px-3 py-2 text-sm text-cscx-gray-300 hover:bg-cscx-gray-800 rounded-lg transition-colors",children:" Review Entitlements"}),c.jsx("button",{onClick:()=>{$(),w("technical")},className:"w-full text-left px-3 py-2 text-sm text-cscx-gray-300 hover:bg-cscx-gray-800 rounded-lg transition-colors",children:" Review Tech Specs"}),c.jsx("button",{onClick:()=>{$(),w("tasks")},className:"w-full text-left px-3 py-2 text-sm text-cscx-gray-300 hover:bg-cscx-gray-800 rounded-lg transition-colors",children:" Review Agent Tasks"})]})]})]})]})]})};return n?c.jsx("div",{className:"min-h-screen bg-cscx-black flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-cscx-accent border-t-transparent"})}):o==="auth-callback"?c.jsx(wj,{}):!t&&!a&&Ny()?c.jsx(bj,{onDemoMode:()=>i(!0)}):c.jsx("div",{className:"min-h-screen bg-cscx-black text-white p-4 sm:p-8 font-sans",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("header",{className:"mb-8 sm:mb-12",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-white tracking-tight",children:["CSCX",c.jsx("span",{className:"text-cscx-accent",children:"."}),"AI"]}),c.jsx("p",{className:"text-cscx-gray-300 mt-1",children:o==="customers"?"Customer Success Platform":o==="customer-detail"?"Customer 360 View":o==="execution"?"Agent Control Center":"Customer Onboarding"})]}),c.jsxs("div",{className:"flex items-center gap-3 mt-4 sm:mt-0",children:[(o==="onboarding"||o==="handoff"||o==="execution")&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-cscx-gray-900 rounded-lg border border-cscx-gray-800",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${d==="onboarding"?"bg-blue-500":d==="handoff"?"bg-yellow-500":"bg-green-500"}`}),c.jsx("span",{className:"text-sm text-cscx-gray-300",children:d==="onboarding"?"Setup":d==="handoff"?"Ready":"Executing"})]}),(o==="onboarding"||o==="handoff"||o==="execution")&&c.jsx("button",{onClick:q,className:"px-4 py-2 text-sm border border-cscx-gray-700 rounded-lg hover:bg-cscx-gray-800 hover:text-cscx-accent transition-colors",children:"Back to Customers"}),t&&c.jsx(_j,{}),a&&!t&&c.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-900/30 border border-yellow-600/50 rounded-lg",children:c.jsx("span",{className:"text-xs text-yellow-500",children:"Demo Mode"})})]})]}),c.jsxs("nav",{className:"flex gap-1 p-1 bg-cscx-gray-900 rounded-lg w-fit",children:[c.jsx("button",{onClick:()=>{u("customers"),A(null)},className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${o==="customers"||o==="customer-detail"?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:"Customers"}),c.jsxs("button",{onClick:()=>u("ai-assistant"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${o==="ai-assistant"?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:[c.jsx("span",{children:""})," AI Assistant"]}),c.jsxs("button",{onClick:()=>u("integrations"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${o==="integrations"?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:[c.jsx("span",{children:""})," Integrations"]}),c.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800",children:[c.jsx("span",{children:""})," Mission Control"]}),c.jsx("button",{onClick:X,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${o==="onboarding"||o==="handoff"?"bg-cscx-accent text-white":"text-cscx-gray-400 hover:text-white hover:bg-cscx-gray-800"}`,children:"+ New Onboarding"}),o==="execution"&&c.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-md bg-green-600 text-white",children:"Agent Execution"})]})]}),c.jsxs("main",{className:"space-y-8",children:[o==="ai-assistant"&&c.jsx(Nj,{}),o==="integrations"&&c.jsx(Ej,{}),o==="customers"&&c.jsx(U1,{onSelectCustomer:P,onNewOnboarding:X}),o==="customer-detail"&&_&&c.jsx(L1,{customerId:_,onBack:U}),o==="execution"&&Q&&c.jsx(D1,{customer:Q,contractData:N,plan:L,initialMessage:`I've analyzed the contract for ${N==null?void 0:N.company_name}. They have a $${(O=N==null?void 0:N.arr)==null?void 0:O.toLocaleString()} ARR deal with ${((H=N==null?void 0:N.entitlements)==null?void 0:H.length)||0} entitlements. I've prepared a ${(L==null?void 0:L.timeline_days)||90}-day onboarding plan. What would you like me to do first?`}),o==="handoff"&&c.jsx(ne,{}),o==="onboarding"&&c.jsxs(c.Fragment,{children:[m===Bt.Idle&&c.jsx(O_,{onUpload:J}),m>Bt.Idle&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(sh,{title:"Contract Parsing & Analysis",state:m,successState:Bt.Generating,children:N&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 border-b border-cscx-gray-800 pb-2",children:V.map(Z=>c.jsx("button",{onClick:()=>w(Z.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${v===Z.id?"bg-cscx-accent text-white":"bg-cscx-gray-800 text-cscx-gray-300 hover:bg-cscx-gray-700"}`,children:Z.label},Z.id))}),c.jsxs("div",{className:"min-h-[200px]",children:[v==="entitlements"&&c.jsx(D_,{entitlements:N.entitlements}),v==="stakeholders"&&c.jsx(z_,{stakeholders:N.stakeholders}),v==="technical"&&c.jsx(U_,{requirements:N.technical_requirements}),v==="tasks"&&c.jsx(L_,{tasks:N.contract_tasks}),v==="pricing"&&c.jsx(B_,{pricing:N.pricing_terms})]}),c.jsx(q_,{missingInfo:N.missing_info,nextSteps:N.next_steps})]})}),c.jsxs(sh,{title:"Intelligence Generation",state:m,successState:Bt.Ready,children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C&&c.jsx(V_,{summary:C}),z&&c.jsx(P_,{research:z})]}),c.jsx(_1,{})]}),c.jsx(sh,{title:"30-60-90 Day Onboarding Plan",state:m,successState:Bt.Ready,children:L&&c.jsx(A1,{plan:L})}),m===Bt.Ready&&N&&L&&c.jsx("div",{className:"p-6 bg-gradient-to-r from-cscx-gray-900 to-cscx-gray-800 border border-cscx-accent/30 rounded-xl",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:""}),"Contract Analysis Complete"]}),c.jsxs("p",{className:"text-cscx-gray-300 mt-1",children:["Ready to deploy AI agents for ",N.company_name]})]}),c.jsxs("button",{onClick:()=>{u("handoff"),f("handoff")},className:"px-6 py-3 bg-cscx-accent hover:bg-red-700 text-white font-bold rounded-xl transition-all transform hover:scale-[1.02] flex items-center gap-2 whitespace-nowrap",children:[c.jsx("span",{children:""}),"Deploy Agents"]})]})}),m===Bt.Error&&c.jsxs("div",{className:"bg-cscx-error/10 border border-cscx-error text-cscx-error p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold",children:"Workflow Failed"}),c.jsx("p",{className:"text-sm mt-1",children:y})]})]})]})]}),E&&c.jsx($C,{onClose:()=>S(!1)})]})})},GC=()=>c.jsx(vj,{children:c.jsx(VC,{})}),fb=document.getElementById("root");if(!fb)throw new Error("Could not find root element to mount to");const PC=T_.createRoot(fb);PC.render(c.jsx(ay.StrictMode,{children:c.jsx(GC,{})}));
